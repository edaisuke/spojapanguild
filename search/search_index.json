{"config":{"lang":["ja"],"separator":"[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u30ac\u30a4\u30c9","text":"<p>SPO JAPAN GUILD\u3067\u306f\u3001\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u6563\u5316\u4fc3\u9032\u6d3b\u52d5\u306e\u4e00\u74b0\u3067\u3001\u65e5\u672c\u4eba\u5411\u3051\u306bSPO\u69cb\u7bc9\u30fb\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb\u30fb\u30b5\u30dd\u30fc\u30c8\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3092\u6574\u5099\u3057\u3066\u304a\u308a\u3001\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u306b\u5fc5\u8981\u306a\u77e5\u8b58\u3092\u7fd2\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u60c5\u5831</p> <p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9v10.1.4\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002 \u6700\u7d42\u66f4\u65b0\u65e5\uff1a2025\u5e741\u67088\u65e5 guide version 13.5.2</p> <p>\u30b5\u30dd\u30fc\u30c8</p> <p>\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u30c7\u30a3\u30b9\u30b3\u30fc\u30c9SPO JAPAN GUILD\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u73fe\u5f79\u306eSPO\u306b\u8cea\u554f\u3067\u304d\u307e\u3059</p>"},{"location":"#_2","title":"\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3068\u306f\uff1f","text":"<p>\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30b3\u30f3\u30bb\u30f3\u30b5\u30b9\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306fPoS\u3092\u63a1\u7528\u3057\u3001Cardano\u30ce\u30fc\u30c9\u3092\u904b\u7528\u3059\u308b\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u3088\u3063\u3066\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u51e6\u7406\u3068\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002</p>"},{"location":"#spo","title":"SPO\u3068\u306f\uff1f","text":"<p>SPO\uff1dStake Pool Operator \u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u904b\u7528\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3092\u6307\u3057\u307e\u3059\u3002\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u9069\u5207\u306b\u904b\u7528\u30fb\u76e3\u8996\u3057\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u7dad\u6301\u3057\u307e\u3059\u3002</p>"},{"location":"#spo_1","title":"SPO\u306e\u5fc5\u9808\u30b9\u30ad\u30eb","text":"<p>\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u904b\u55b6\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30b9\u30ad\u30eb\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002</p> <ul> <li>\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u7d99\u7d9a\u7684\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3001\u5b9f\u884c\u3001\u7dad\u6301\u3059\u308b\u904b\u7528\u30b9\u30ad\u30eb</li> <li>\u30ce\u30fc\u30c9\u309224\u6642\u9593\u5e74\u4e2d\u7121\u4f11\u3067\u7dad\u6301\u3059\u308b\u30b3\u30df\u30c3\u30c8</li> <li>\u30b7\u30b9\u30c6\u30e0\u904b\u7528\u30b9\u30ad\u30eb</li> <li>\u30b5\u30fc\u30d0\u7ba1\u7406\u30b9\u30ad\u30eb (\u904b\u7528\u304a\u3088\u3073\u4fdd\u5b88)</li> <li>\u958b\u767a\u3068\u904b\u7528\u7d4c\u9a13 (DevOps)</li> <li>\u30b5\u30fc\u30d0\u5f37\u5316\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u30b9\u30ad\u30eb</li> </ul>"},{"location":"#spo_2","title":"SPO\u306f\u4f55\u3092\u3059\u308b\u306e\u304b\uff1f","text":"<ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9</li> <li>\u30b5\u30fc\u30d0\u30fc(\u30ce\u30fc\u30c9)\u76e3\u8996</li> <li>\u5272\u308a\u5f53\u3066\u30d6\u30ed\u30c3\u30af\u751f\u6210 \u203b\u30ce\u30fc\u30c9\u8a2d\u5b9a\u304c\u6b63\u3057\u3051\u308c\u3070\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059</li> <li>\u30de\u30fc\u30b1\u30c6\u30a3\u30f3\u30b0\u30fb\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u8ca2\u732e\u6d3b\u52d5</li> </ul>"},{"location":"#_3","title":"\u904b\u7528\u30b3\u30b9\u30c8","text":"\u9805\u76ee \u30b3\u30b9\u30c8 \u30d7\u30fc\u30eb\u767b\u9332\u6599(\u521d\u56de\u306e\u307f) 500ADA \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u767a\u884c\u6599(\u521d\u56de\u306e\u307f) 2ADA \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599 \u6570ADA \u30b5\u30fc\u30d0\u30fc\u4ee3(\u6700\u5c0f\u69cb\u6210\uff12\u53f0)/\u6708 16000\u5186\uff5e32000\u5186"},{"location":"#_4","title":"\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c","text":"<p>\u2460\uff0b\uff08 \u30d7\u30fc\u30eb\u7dcf\u5831\u916c - \u2460 \uff09* \u2461\uff1d\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c</p> \u9805\u76ee \u5831\u916c \u2460\u56fa\u5b9a\u5831\u916c \u6700\u4f4e170ADA\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd \u2461\u5909\u52d5\u5831\u916c 0%\uff5e100%\u307e\u3067\u8a2d\u5b9a\u53ef\u80fd <p>\u6ce8\u610f</p> <p>\u203b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u8a2d\u5b9a\u5024\u304c\u5927\u304d\u304f\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u59d4\u4efb\u8005\u306e\u5831\u916c\u304c\u6e1b\u5c11\u3057\u307e\u3059</p>"},{"location":"#_5","title":"\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u8981\u4ef6","text":"\u6700\u5c0f\u69cb\u6210\u63a8\u5968\u69cb\u6210 \u9805\u76ee \u8981\u4ef6 \u30b5\u30fc\u30d0\u30fc BP\u75281\u53f0  \u30ea\u30ec\u30fc\u75282\u53f0  \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f31\u53f0 OS 64-bit Linux (Ubuntu 22.04 LTS) CPU 2Ghz\u4ee5\u4e0a 2\u30b3\u30a2\u306eIntel\u307e\u305f\u306fAMD x86\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc \u30e1\u30e2\u30ea 24GB \u30b9\u30c8\u30ec\u30fc\u30b8 350GB \u30cd\u30c3\u30c8\u30ef\u30fc\u30af 10Mbps \u5e2f\u57df 1\u6642\u9593\u3042\u305f\u308a1GB\u306e\u5e2f\u57df \u96fb\u529b 24\u6642\u9593365\u65e5\u5b89\u5b9a\u4f9b\u7d66 ADA 600ADA \u9805\u76ee \u8981\u4ef6 \u30b5\u30fc\u30d0\u30fc BP\u75281\u53f0  \u30ea\u30ec\u30fc\u75282\u53f0  \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f31\u53f0 OS 64-bit Linux (Ubuntu 22.04 LTS) CPU 2Ghz\u4ee5\u4e0a 4\u30b3\u30a2\u306eIntel\u307e\u305f\u306fAMD x86\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc \u30e1\u30e2\u30ea 24GB over \u30b9\u30c8\u30ec\u30fc\u30b8 350GB\u4ee5\u4e0a \u30cd\u30c3\u30c8\u30ef\u30fc\u30af 100Mbps \u5e2f\u57df \u7121\u5236\u9650 \u96fb\u529b 24\u6642\u9593365\u65e5\u5b89\u5b9a\u4f9b\u7d66 ADA \u7121\u5236\u9650"},{"location":"#_6","title":"\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u30a4\u30e1\u30fc\u30b8","text":"<pre><code>    flowchart BT\n        a2[\u30ea\u30ec\u30fc1] &amp; a3[\u30ea\u30ec\u30fc2] &lt;-- \u958b\u653eFW --&gt; a4[\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af]\n        subgraph ide1[\u30d7\u30fc\u30eb]\n            subgraph \u30ea\u30ec\u30fcIP\u6307\u5b9aFW\n                a1[BP]\n            end\n                a1[BP] &lt;--&gt; a2[\u30ea\u30ec\u30fc1] &amp; a3[\u30ea\u30ec\u30fc2]\n        end\n        c1[PC] --&gt; ide1\n        c1[PC] --&gt; \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7</code></pre> <p>\u30b5\u30dd\u30fc\u30c8</p> <p>\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001SPO JAPAN GUILD\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u73fe\u5f79\u306eSPO\u306b\u8cea\u554f\u3067\u304d\u307e\u3059</p>"},{"location":"#_7","title":"\u30b5\u30fc\u30d0\u30fc\u9078\u5b9a\u306b\u3064\u3044\u3066","text":"<p>\u30ab\u30eb\u30c0\u30ce\u306f\u6700\u3082\u5206\u6563\u5316\u3055\u308c\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5411\u4e0a\u3092\u76ee\u6307\u3057\u3066\u304a\u308a\u3001\u4e16\u754c\u4e2d\u306b\u5206\u6563\u3055\u308c\u305f\u30ce\u30fc\u30c9\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5f62\u6210\u304c\u3001\u30ab\u30eb\u30c0\u30ce\u306b\u3068\u3063\u3066\u6700\u3082\u91cd\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u3053\u3068\u304b\u3089\u3001\u5f53\u30ae\u30eb\u30c9\u5185\u3067\u306f\u300c\u304a\u3059\u3059\u3081\u306e\u30b5\u30fc\u30d0\u30fc(VPS)\u696d\u8005\u300d\u306e\u60c5\u5831\u5171\u6709\u306f\u884c\u3063\u3066\u304a\u308a\u307e\u305b\u3093\u306e\u3067\u3001\u5404\u81ea\u3067\u9078\u5b9a\u3092\u304a\u9858\u3044\u81f4\u3057\u307e\u3059\u3002  </p>"},{"location":"#_8","title":"\u304a\u8a66\u3057\u30ce\u30fc\u30c9\u8d77\u52d5","text":"<ul> <li>Linux\u30b5\u30fc\u30d0\u306e\u30b3\u30de\u30f3\u30c9\u3084\u3001\u30ce\u30fc\u30c9\u8d77\u52d5\u306a\u3069\u304a\u8a66\u3057\u30c6\u30b9\u30c8\u3067\u3084\u3063\u3066\u307f\u305f\u3044\u65b9\u306f\u3001\u624b\u5143\u306e\u30d1\u30bd\u30b3\u30f3\u3067\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u74b0\u5883\u3092\u69cb\u7bc9\u5f8c\u3001\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb\u306e2. \u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\uff01</li> <li>\u3053\u306e\u9805\u76ee\u306f\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u306f\u76f4\u63a5\u7684\u306b\u5f71\u97ff\u304c\u306a\u3044\u306e\u3067\u3001\u305f\u3068\u3048\u9593\u9055\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u9001\u4fe1\u3057\u3066\u3082\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u306f\u554f\u984c\u3054\u3056\u3044\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"changelogs/","title":"\u5909\u66f4\u5c65\u6b74","text":""},{"location":"changelogs/#20250108-ver-1352","title":"2025/01/08\u3000ver. 13.5.2","text":"<ul> <li>cardano-node v10.1.4\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20250102-ver-1351","title":"2025/01/02\u3000ver. 13.5.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20241205-ver-1350","title":"2024/12/05\u3000ver. 13.5.0","text":"<ul> <li>cardano-node v10.1.3\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20241006-ver-1345","title":"2024/10/06\u3000ver. 13.4.5","text":"<ul> <li>\u30b3\u30de\u30f3\u30c9\u306e\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20241001-ver-1344","title":"2024/10/01\u3000ver. 13.4.4","text":"<ul> <li>cardano-node v9.2.1\u5bfe\u5fdc</li> <li>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3SPO\u6295\u7968 CLI\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20240928-ver-1343","title":"2024/09/28\u3000ver. 13.4.3","text":"<ul> <li><code>cardano-cli conway</code>\u5bfe\u5fdc</li> <li>SJG TOOL v3.8.0\u30ea\u30ea\u30fc\u30b9 SPO\u6295\u7968\u5b9f\u88c5</li> </ul>"},{"location":"changelogs/#20240903-ver-1342","title":"2024/09/03\u3000ver. 13.4.2","text":"<ul> <li>cardano-node v9.1.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20240806-ver-1341","title":"2024/08/06\u3000ver. 13.4.1","text":"<ul> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u4fee\u6b63</li> <li>\u624b\u6570\u6599\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u4fee\u6b63</li> <li>SJG TOOL v3.7.5\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20240805-ver-1340","title":"2024/08/05\u3000ver. 13.4.0","text":"<ul> <li>cardano-node v9.1.0\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SJG TOOL v3.7.4\u30ea\u30ea\u30fc\u30b9</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240629-ver-1332","title":"2024/06/29\u3000ver. 13.3.2","text":"<ul> <li>cardano-node v8.9.4\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20240603-ver-1331","title":"2024/06/03\u3000ver. 13.3.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb cnreload\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u5909\u66f4</li> </ul> <p>\u65e2\u5b58\u8a2d\u5b9a\u5024\u4fee\u6b63\u30b3\u30de\u30f3\u30c9 <pre><code>sed -i 's/alias cnreload=\"kill -HUP $(pidof cardano-node)\"/alias cnreload=\"pkill -HUP cardano-node\"/g' $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre> * SJG TOOL v3.7.3\u30ea\u30ea\u30fc\u30b9 * \u8efd\u5fae\u306a\u4fee\u6b63</p>"},{"location":"changelogs/#20240503-ver-1330","title":"2024/05/03\u3000ver. 13.3.0","text":"<ul> <li>cardano-node v8.9.2\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>\u30ea\u30ec\u30fc\u3068BP\u3092\u63a5\u7d9a\u3059\u308b\u306b\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u89e3\u8aac\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240410-ver-1322","title":"2024/04/10\u3000ver. 13.2.2","text":"<ul> <li>mithril-client\u30b3\u30de\u30f3\u30c9\u4fee\u6b63</li> <li>SFTP\u30bd\u30d5\u30c8(FileZilla)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240324-ver-1321","title":"2024/03/24\u3000ver. 13.2.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806cncli.sh\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0</li> <li>SPO Block Notify v2.2.1\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20240322-ver-1320","title":"2024/03/22\u3000ver. 13.2.0","text":"<ul> <li>cardano-node v8.9.0\u5bfe\u5fdc</li> <li>\u4f9d\u5b58\u95a2\u4fc2\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 <code>secp256k1</code> <code>Blst</code></li> <li>\u5168\u30ce\u30fc\u30c9\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u65b9\u5f0f\u3078\u79fb\u884c</li> <li>\u6700\u4f4e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u65702\u4ee5\u4e0a\u3078\u5909\u66f4</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SPO Block Notify v2.2.0\u30ea\u30ea\u30fc\u30b9</li> <li>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u66f4\u65b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240310-ver-1312","title":"2024/03/10\u3000ver. 13.1.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u74b0\u5883\u5909\u6570\u8aad\u307f\u8fbc\u307f\u5931\u6557\u3092\u4fee\u6b63</li> <li>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8faucetURL\u3092\u4fee\u6b63</li> <li>gLiveView\u5c0e\u5165\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240228-ver-1311","title":"2024/02/28\u3000ver. 13.1.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240226-ver-1310","title":"2024/02/26\u3000ver. 13.1.0","text":"<ul> <li>SPO Block Notify\u8a2d\u5b9a\u66f4\u65b0</li> <li>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20240127-ver-1301","title":"2024/01/27\u3000ver. 13.0.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0<ul> <li>cncli.sh \u540c\u671f\u30a8\u30e9\u30fc\u306e\u5bfe\u51e6\u6cd5\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul> </li> </ul>"},{"location":"changelogs/#20240126-ver-1300","title":"2024/01/26\u3000ver. 13.0.0","text":"<ul> <li> <p>\u63a8\u5968\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u5909\u66f4 RAM 16GB\u219224GB / SSD 200GB\u2192300GB</p> </li> <li> <p>Cardano-node8.7.3\u5bfe\u5fdc</p> </li> <li> <p>\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806</p> <ul> <li>blst\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8ffd\u52a0</li> <li>GHCUP\u5909\u6570\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5c0e\u5165</li> </ul> </li> <li> <p>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</p> <ul> <li>cardano-node v8.7.3\u5bfe\u5fdc</li> <li>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u306e\u4f7f\u7528</li> <li>Mithril\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u306e\u5c0e\u5165</li> </ul> </li> <li> <p>\u30b5\u30fc\u30d0\u30fc\u5f15\u8d8a\u3057\u624b\u9806\u8ffd\u52a0 \u30ea\u30ec\u30fc\u7528 / BP\u7528</p> </li> <li> <p>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a Grafana\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u5bfe\u5fdc</p> </li> <li> <p>SJG TOOL v3.7.0\u30ea\u30ea\u30fc\u30b9</p> <ul> <li>CLI 8.17.0.0\u5bfe\u5fdc</li> <li>\u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3068DB\u5bb9\u91cf\u8868\u793a\u8ffd\u52a0</li> </ul> </li> </ul>"},{"location":"changelogs/#20240105-ver-1295","title":"2024/01/05\u3000ver. 12.9.5","text":"<ul> <li>\u30d7\u30fc\u30eb\u60c5\u5831(pool.cert)\u306e\u66f4\u65b0 \u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306bnonce\u5024\u3092\u8ffd\u52a0 \u30d7\u30fc\u30eb\u60c5\u5831\u66f4\u65b0\u6642\u306b\u304a\u3044\u3066\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u307f\u306e\u5909\u66f4\u3067\u3001\u540c\u4e00\u30d5\u30a1\u30a4\u30eb(\u30cf\u30c3\u30b7\u30e5\u5024)\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408\u3001SMASH\u30b5\u30fc\u30d0\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u8aad\u307f\u8fbc\u307f\u306b\u304a\u3044\u3066\u53c2\u7167\u30c7\u30fc\u30bf\u306e\u6574\u5408\u6027\u304c\u53d6\u308c\u305a\u3001KoiosAPI\u3067\u3082\u30c7\u30fc\u30bf\u53c2\u7167\u51fa\u6765\u306a\u3044\u305f\u3081\u30e1\u30bf\u30c7\u30fc\u30bf\u306bnonce\u5024\u3092\u8a2d\u5b9a\u3057\u7570\u306a\u308b\u30cf\u30c3\u30b7\u30e5\u5024\u3067\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3059\u308b\u4ed5\u69d8\u3078\u5909\u66f4\u3002</li> </ul>"},{"location":"changelogs/#20231230-ver-1294","title":"2023/12/30\u3000ver. 12.9.4","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 \u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20231220-ver-1293","title":"2023/12/20\u3000ver. 12.9.3","text":"<ul> <li>8.1.2\u7528\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5143\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20231129-ver-1292","title":"2023/11/29\u3000ver. 12.9.2","text":"<ul> <li>SJG TOOL v3.6.4\u30ea\u30ea\u30fc\u30b9</li> <li>\u30d7\u30fc\u30ebID\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4   stakepoolid_hex \u2192 pool.id   stakepoolid_bech32 \u2192 pool.id-bech32</li> </ul>"},{"location":"changelogs/#20231125-ver-1291","title":"2023/11/25\u3000ver. 12.9.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306eP2P\u8a2d\u5b9a\u3092\u524a\u9664</li> </ul>"},{"location":"changelogs/#20231120-ver-1290","title":"2023/11/20\u3000ver. 12.9.0","text":"<ul> <li>R-Login\u4f7f\u7528\u6642\u306e\u63a8\u5968\u8a2d\u5b9a\u3092\u63b2\u8f09 Ubuntu\u521d\u671f\u8a2d\u5b9a</li> <li>Tracemempool\u521d\u671f\u5024\u5909\u66f4\u5bfe\u5fdc</li> <li>SPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u8b70\u4e8b\u9332\u30ea\u30f3\u30af\u63b2\u8f09 SJG\u30e9\u30fc\u30cb\u30f3\u30b0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20231028-ver-1289","title":"2023/10/28\u3000ver. 12.8.9","text":"<ul> <li>minPoolCost\u5909\u66f4\u306b\u4f34\u3046\u8868\u8a18\u304a\u3088\u3073\u30b3\u30de\u30f3\u30c9\u4fee\u6b63</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u306bKES\u6b8b\u65e5\u6570\u3068\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230927-ver-1288","title":"2023/09/27\u3000ver. 12.8.8","text":"<ul> <li>DB\u540c\u671f(Mithril)\u30d9\u30fc\u30bf\u7248\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230919-ver-1287","title":"2023/09/19\u3000ver. 12.8.7","text":"<ul> <li>Grafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u624b\u9806\u4fee\u6b63</li> <li>Grafana\u30ea\u30dd\u30b8\u30c8\u30ea \u66f4\u65b0\u624b\u9806\u8ffd\u52a0</li> <li>\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ce\u30fc\u30c9\u30d3\u30eb\u30c9\u524d\u306bTMUX\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230811-ver-1286","title":"2023/08/11\u3000ver. 12.8.6","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 BP\u306b\u304a\u3051\u308bCNCLI\u518d\u30d3\u30eb\u30c9\u6ce8\u610f\u66f8\u304d\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230725-ver-1285","title":"2023/07/25\u3000ver. 12.8.5","text":"<ul> <li>Cardano-node8.1.2\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20230718-ver-1284","title":"2023/07/18\u3000ver. 12.8.4","text":"<ul> <li>SJG TOOL v3.6.0\u30ea\u30ea\u30fc\u30b9(Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u5b9f\u88c5)</li> <li>Catalyst\u6709\u6a29\u8005\u767b\u9332 Catalyst\u6709\u6a29\u8005\u767b\u9332\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230718-ver-1283","title":"2023/07/18\u3000ver. 12.8.3","text":"<ul> <li>KES\u66f4\u65b0 \u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u624b\u9806\u8ffd\u52a0</li> <li>\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 Prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230627-ver-1282","title":"2023/06/27\u3000ver. 12.8.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806 2-6\u30922-5\u3078\u7d71\u5408</li> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806 \u300c3-3.\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u81ea\u52d5\u5316\u300d\u3092\u8ffd\u52a0</li> <li>1.Ubuntu\u521d\u671f\u8a2d\u5b9a \u300cUbuntu22.04\u306e\u5834\u5408\u306e\u7279\u5225\u8a2d\u5b9a\u300d\u3092\u8ffd\u52a0</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a 2-2\u4fee\u6b63</li> <li>7.\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u767b\u9332\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\u65b9\u6cd5\u3092\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20230620-ver-1281","title":"2023/06/20\u3000ver. 12.8.1","text":"<ul> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u66f4\u65b0\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230620-ver-1280","title":"2023/06/20\u3000ver. 12.8.0","text":"<ul> <li>Cardano-node8.1.1\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>Ubuntu22.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u624b\u9806\u8ffd\u52a0</li> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u8cc7\u6599\u8ffd\u52a0</li> <li>[\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a]\u30c8\u30dd\u30ed\u30b8\u30fc\u30ea\u30ed\u30fc\u30c9\u7528\u74b0\u5883\u5909\u6570\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230518-ver-1271","title":"2023/05/18\u3000ver. 12.7.1","text":"<ul> <li>SJG TOOL v3.5\u30ea\u30ea\u30fc\u30b9(SPO\u6295\u7968\u6a5f\u80fd\u5b9f\u88c5)</li> <li>SPO\u6295\u7968\u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230513-ver-1270","title":"2023/05/13\u3000ver. 12.7.0","text":"<ul> <li>Cardano-node8.0.0\u5bfe\u5fdc</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> </ul>"},{"location":"changelogs/#20230504-ver-1263","title":"2023/05/04\u3000ver. 12.6.3","text":"<ul> <li>SPO\u6295\u7968(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230413-ver-1262","title":"2023/04/13\u3000ver. 12.6.2","text":"<ul> <li>CNCLI 5.3.2 musl\u30d3\u30eb\u30c9\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20230404-ver-1261","title":"2023/04/04\u3000ver. 12.6.1","text":"<ul> <li>CNCLI 5.3.2\u5bfe\u5fdc</li> <li>P2P\u8a2d\u5b9a\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230404-ver-1260","title":"2023/04/04\u3000ver. 12.6.0","text":"<ul> <li>Cardano-node1.35.7\u5bfe\u5fdc</li> <li>[\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a] \u30de\u30cb\u30e5\u30a2\u30eb\u8ffd\u52a0</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.9.3</li> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u8cc7\u6599\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230307-ver-1251","title":"2023/03/07\u3000ver. 12.5.1","text":"<ul> <li>[\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7] prometheus.yml\u5185\u5bb9\u4fee\u6b63</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.9.0</li> </ul>"},{"location":"changelogs/#20230307-ver-1250","title":"2023/03/07\u3000ver. 12.5.0","text":"<ul> <li>Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u8a2d\u5b9a\u8ffd\u52a0</li> <li>Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a\u8ffd\u52a0</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8.9 \u3000\u901a\u77e5\u8a2d\u5b9a\u6709\u7121\u691c\u77e5\u3001\u8d77\u52d5\u6642\u901a\u77e5\u6a5f\u80fd\u8ffd\u52a0</li> <li>CNCLI5.3.1\u5bfe\u5fdc</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230210-ver-1248","title":"2023/02/10\u3000ver. 12.4.8","text":"<ul> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8.6 \u3000\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u6a5f\u80fd\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230208-ver-1247","title":"2023/02/08\u3000ver. 12.4.7","text":"<ul> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30c6\u30b9\u901a\u77e5 v1.8 \u3000\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u6a5f\u80fd\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20230204-ver-1246","title":"2023/02/04\u3000ver. 12.4.6","text":"<ul> <li>CNCLI5.3.0\u5bfe\u5fdc</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230129-ver-1245","title":"2023/01/29\u3000ver. 12.4.5","text":"<ul> <li>Cardano-node1.35.5\u5bfe\u5fdc</li> <li>cncli.sh\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u624b\u9806\u3092\u5909\u66f4</li> <li>\u8ca2\u732e\u8005\u30da\u30fc\u30b8\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230123-ver-1244","title":"2023/01/23\u3000ver. 12.4.4","text":"<ul> <li>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20230105-ver-1243","title":"2023/01/05\u3000ver. 12.4.3","text":"<ul> <li>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u5897\u8a2d\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221220-ver-1242","title":"2022/12/20\u3000ver. 12.4.2","text":"<ul> <li>\u6700\u65b0\u30ea\u30ea\u30fc\u30b91.35.4\u30d3\u30eb\u30c9\u5931\u6557\u306e\u56de\u907f\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u8a18</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221203-ver-1241","title":"2022/12/03\u3000ver. 12.4.1","text":"<ul> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221202-ver-1240","title":"2022/12/02\u3000ver. 12.4.0","text":"<ul> <li>Cardano-node1.35.4\u5bfe\u5fdc</li> <li>prometheus-node-exporter1.5.0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u8ffd\u52a0     (9.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3001\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8)</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u4f5c\u6210 \u30da\u30fc\u30b8\u65b0\u8a2d\u3002Version7\u5bfe\u5fdc</li> <li>1.Ubuntu\u521d\u671f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306e\u4e00\u90e8\u3092\u5909\u66f4     (\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u5404\u30da\u30fc\u30b8(3-\u30ea\u30ec\u30fc/BP\u306e\u63a5\u7d9a\u30019.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7)\u3078\u79fb\u52d5)</li> <li>\u30ea\u30ec\u30fc2\u53f0\u76ee\u4ee5\u964d\u306e\u8a2d\u5b9a\u624b\u9806\u3092\u5404\u30da\u30fc\u30b8\u306b\u8ffd\u52a0</li> <li>Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f4\u65b0\u3002     (KoiosAPI\u3092\u5229\u7528\u3057\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3001\u30d7\u30fc\u30eb\u59d4\u4efb\u91cf\u3001\u59d4\u4efb\u8005\u6570\u60c5\u5831\u8868\u793a)</li> <li>\u30d7\u30fc\u30eb\u904b\u7528\u30ac\u30a4\u30c9\u30ab\u30c6\u30b4\u30ea\u3092\u6574\u7406</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20221017-ver-1236","title":"2022/10/17\u3000ver. 12.3.6","text":"<ul> <li>2. \u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5143URL\u3092\u5909\u66f4</li> <li>config\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\u5185\u5bb9\u30b3\u30de\u30f3\u30c9\u5316</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u3082\u30ed\u30b0\u51fa\u529b\u3059\u308b\u3088\u3046\u624b\u9806\u4fee\u6b63</li> <li>\u63a5\u7d9a\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(\u30e1\u30a4\u30f3\u30cd\u30c3\u30c8/\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)\u3092\u9078\u629e\u53ef\u80fd\u306b\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220910-ver-1235","title":"2022/09/10\u3000ver. 12.3.5","text":"<ul> <li>9.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 (\u9805\u76ee9\u306eJSON\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4)</li> <li>SPO JAPAN GUILD TOOL v3.3.0 \u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20220828-ver-1234","title":"2022/08/28\u3000ver. 12.3.4","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u5185\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7secp256k1\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220827-ver-1233","title":"2022/08/27\u3000ver. 12.3.3","text":"<ul> <li>logMonitor.sh\u53d6\u5f97\u5148\u3092\u5909\u66f4 </li> </ul>"},{"location":"changelogs/#20220827-ver-1232","title":"2022/08/27\u3000ver. 12.3.2","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u4e00\u90e8\u4fee\u6b63 </li> <li>SSH\u8a8d\u8a3c\u9375\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u30b3\u30fc\u30c9\u3092SHA2\u306b\u5909\u66f4</li> </ul>"},{"location":"changelogs/#20220825-ver-1231","title":"2022/08/25\u3000ver. 12.3.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u4e00\u90e8\u4fee\u6b63 </li> </ul>"},{"location":"changelogs/#20220825-ver-1230","title":"2022/08/25\u3000ver. 12.3.0","text":"<ul> <li>cardano-node v1.35.3 \u306b\u5bfe\u5fdc</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u4f5c\u6210\u624b\u9806\u66f4\u65b0</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806\u66f4\u65b0</li> <li>SFTP\u30bd\u30d5\u30c8\u8a2d\u5b9a\u624b\u9806\u8ffd\u52a0    </li> </ul>"},{"location":"changelogs/#20220724-ver-1220","title":"2022/07/24\u3000ver. 12.2.0","text":"<ul> <li>RSYNC+SSH\u30b5\u30fc\u30d0\u30fc\u9593\u8ee2\u9001\u8a2d\u5b9a\u624b\u9806\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220606-ver-1211","title":"2022/06/06\u3000ver. 12.1.1","text":"<ul> <li>env\u30d5\u30a1\u30a4\u30eb\u306eCCLI\u884c\u306bRTS\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0</li> <li>\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220530-ver-121","title":"2022/05/30\u3000ver. 12.1","text":"<ul> <li>\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30b3\u30fc\u30c9\u3092\u4fee\u6b63  \u3000\u30ce\u30fc\u30c9\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u306b\u30ac\u30d9\u30fc\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u554f\u984c\u306b\u5bfe\u5fdc\u3057\u305fRTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220510-ver-120","title":"2022/05/10\u3000ver. 12.0","text":"<ul> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u4f5c\u6210\u624b\u9806\u3092\u8ffd\u52a0  </li> <li>Linux\u30b3\u30de\u30f3\u30c9\u96c6\u3092\u8ffd\u52a0</li> <li>SJG Tool\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7</li> <li>\u305d\u306e\u4ed6\u8efd\u5fae\u306a\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220420-ver-114","title":"2022/04/20\u3000ver. 11.4","text":"<ul> <li>\u30ce\u30fc\u30c9\u8d77\u52d5\u30fb\u518d\u8d77\u52d5\u30fb\u505c\u6b62\u30a8\u30a4\u30ea\u30a2\u30b9\u30b3\u30de\u30f3\u30c9\u8ffd\u52a0 (2-\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb)</li> <li>\u5bc4\u4ed8\u5148\u30a2\u30c9\u30ec\u30b9\u306bada $handle\u3092\u8ffd\u52a0</li> </ul>"},{"location":"changelogs/#20220414-ver-113","title":"2022/04/14\u3000ver. 11.3","text":"<ul> <li>SPO JAPAN GUILD TOOL\u3092\u30ea\u30ea\u30fc\u30b9</li> </ul>"},{"location":"changelogs/#20220407-ver-112","title":"2022/04/07\u3000ver. 11.2","text":"<ul> <li>payment.addr\u306b\u30cd\u30a4\u30c6\u30a3\u30d6\u30c8\u30fc\u30af\u30f3\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306eTx\u9001\u4fe1\u30a8\u30e9\u30fc\u4fee\u6b63 \u30d7\u30fc\u30eb\u60c5\u5831\u306e\u66f4\u65b0 / \u8cc7\u91d1\u5f15\u304d\u51fa\u3057 / \u30d7\u30fc\u30eb\u5ec3\u6b62 </li> <li>\u904b\u7528\u30ac\u30a4\u30c9\u5185\u30ea\u30f3\u30af\u4fee\u6b63</li> </ul>"},{"location":"changelogs/#20220311-ver-111","title":"2022/03/11\u3000ver. 11.1","text":"<ul> <li>[8-P2P\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a] \u306b[\u30ce\u30fc\u30c9\u8d77\u52d5\u6700\u7d42\u8abf\u6574]\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"changelogs/#20220307-ver-110","title":"2022/03/07\u3000ver. 11.0","text":"<ul> <li>cardano-node v1.34.1 \u306b\u5bfe\u5fdc</li> </ul>"},{"location":"changelogs/#20220301-ver-100","title":"2022/03/01\u3000ver. 10.0","text":"<ul> <li>\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u624b\u9806\u65e5\u672c\u8a9e\u7ffb\u8a33\u3092\u5237\u65b0\u3057\u3001\u300cSPO JAPAN GUILD DOCS\u300d\u3068\u3057\u3066\u751f\u307e\u308c\u5909\u308f\u308a\u307e\u3057\u305f\uff01</li> </ul>"},{"location":"contributors/","title":"SJG\u8ca2\u732e\u8005","text":"<p>\u5275\u8a2d\u30fb\u904b\u55b6\u8005 BTBF  | Pool: [XSP]X-StakePool / [XSP2]X-StakePool <code>\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u904b\u55b6</code>/<code>\u6280\u8853\u30b5\u30dd\u30fc\u30c8</code>/<code>\u30c4\u30fc\u30eb\u958b\u767a</code>/<code>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6574\u5099</code> \u62c5\u5f53</p>"},{"location":"contributors/#_1","title":"\u4e3b\u306a\u8ca2\u732e\u8005","text":"<p><code>\u30c7\u30a3\u30b9\u30b3\u30fc\u30c9\u5185\u30b5\u30dd\u30fc\u30c8</code> <code>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5bc4\u7a3f\u30fb\u4fee\u6b63</code> <code>\u6280\u8853\u691c\u8a3c\u4f5c\u696d</code>\u306a\u3069\u306b\u3054\u5354\u529b\u9802\u3044\u305f\u7686\u69d8\u3067\u3059\u3002</p> <p>\u30fbSAKAKIBARA  | Pool: [1JPN] \u65e5\u672c\u58f1\u30d7\u30fc\u30eb \u30fbAkyo  | Pool:[AKYO] AKYO\ud83e\udd41 \u30fbSMAN  | Pool:[SA8] SMAN8 \u30fbAICHI  | Pool:[AICHI] Aichi Stake Pool / [TOKAI] Tokai Stake Pool \u30fbNori  | Pool:[1STEP] 1STEP \u30fbSUGAR  | Pool:[SUGAR] Sugar Stake Pool \u30fbMOBC  | Pool: [MOBC] MOBC StakePoolServer And More...  </p>"},{"location":"learning/","title":"SJG\u30e9\u30fc\u30cb\u30f3\u30b0","text":"<p>SJG\u30e9\u30fc\u30cb\u30f3\u30b0\u3068\u306f\uff1f</p> <p>\u3053\u3061\u3089\u306e\u5185\u5bb9\u306fSJG\u30c7\u30a3\u30b9\u30b3\u30fc\u30c9\u3067\u6bce\u9031\u571f\u66dc\u65e521\u6642\u304b\u3089\u958b\u50ac\u306eSPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u5185\u3067\u4e0d\u5b9a\u671f\u306b\u5b9f\u65bd\u3057\u3066\u3044\u308bSJG\u30e9\u30fc\u30cb\u30f3\u30b0\u6559\u6750\u3067\u3059\u3002\u30d7\u30fc\u30eb\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u304a\u3051\u308b\u57fa\u790e\u77e5\u8b58\u3092\u5171\u6709\u3057SPO\u306e\u30ec\u30d9\u30eb\u30a2\u30c3\u30d7\u3092\u56f3\u308a\u307e\u3059\u3002</p> <p>SPO\u30df\u30fc\u30c6\u30a3\u30f3\u30b0\u8b70\u4e8b\u9332\u306f\u3053\u3061\u3089</p>"},{"location":"learning/#1","title":"\u7b2c1\u56de \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3068\u30dd\u30fc\u30c8\u306e\u57fa\u790e\u77e5\u8b58","text":""},{"location":"learning/#2","title":"\u7b2c2\u56de \u30ab\u30eb\u30c0\u30ce\u30fb\u30d7\u30ed\u30c8\u30b3\u30eb\u30d1\u30e9\u30e1\u30fc\u30bf","text":""},{"location":"learning/#3","title":"\u7b2c3\u56de \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\u306e\u95a2\u4fc2\u6027","text":""},{"location":"learning/#4","title":"\u7b2c4\u56de \u30ea\u30ec\u30fc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30dd\u30ed\u30b8\u30fc","text":""},{"location":"learning/#5","title":"\u7b2c5\u56de \u76e3\u8996\u30e1\u30c8\u30ea\u30af\u30b9","text":""},{"location":"learning/#6-cardano-cli","title":"\u7b2c6\u56de cardano-cli\u306e\u4f7f\u3044\u65b9","text":""},{"location":"learning/#7-p2p","title":"\u7b2c7\u56de \u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P","text":""},{"location":"learning/#8","title":"\u7b2c8\u56de \u30ce\u30fc\u30c9\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":""},{"location":"faq/blocklog/","title":"\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u95a2\u9023\u306e\u3088\u304f\u3042\u308b\u8cea\u554f","text":""},{"location":"faq/blocklog/#q1","title":"Q1.\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u539f\u56e0\u306f\u4f55\u3067\u3057\u3087\u3046\u304b\uff1f","text":"A.\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059 Stolen\u306e\u5834\u5408ghosted\u306e\u5834\u5408Missed\u306e\u5834\u5408Invalid\u306e\u5834\u5408 <p>\u901a\u79f0\uff1aSlotBattle VRF\u5024\u304c\u5c0f\u3055\u3044\u307b\u3046\u306e\u30d6\u30ed\u30c3\u30af\u304c\u63a1\u7528\u3055\u308c\u308b\u305f\u3081\u904b\u6b21\u7b2c\u3068\u306a\u3063\u3066\u304a\u308a\u89e3\u6c7a\u65b9\u6cd5\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>1\u30a8\u30dd\u30c3\u30af = 432000slot\u306e\u3046\u3061\u30d6\u30ed\u30c3\u30af\u751f\u6210\u53ef\u80fd\u30b9\u30ed\u30c3\u30c8\u306f5%(21600slot)\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u30d7\u30fc\u30eb\u9593\u540c\u58eb\u3067\u306f\u8abf\u6574\u3055\u308c\u306a\u3044\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u8907\u6570\u306e\u30d7\u30fc\u30eb\u306b\u540c\u4e00\u30b9\u30ed\u30c3\u30c8\u306b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002  </p> <p>\u3057\u304b\u3057\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u63a1\u7528\u3055\u308c\u308b\u30d6\u30ed\u30c3\u30af\u306f1\u30b9\u30ed\u30c3\u30c81\u30d6\u30ed\u30c3\u30af\u306a\u306e\u3067\u3001\u3069\u306e\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u3092\u63a1\u7528\u3059\u308b\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u969b\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6642\u306b\u30d7\u30fc\u30eb\u304c\u30e9\u30f3\u30c0\u30e0\u306b\u6392\u51fa\u3059\u308bVRF\u5024\u304c\u5c0f\u3055\u3044\u65b9\u306e\u30d6\u30ed\u30c3\u30af\u3092\u63a1\u7528\u3059\u308b\u4ed5\u69d8\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</p> <p>\u539f\u56e01:VRF\u5024\u306b\u3088\u308b\u5224\u5b9a\u306e\u305f\u3081\u904b\u6b21\u7b2c \u901a\u79f0\uff1aHeightBattle \u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u5f71\u97ff\u3092\u53d7\u3051\u3066\u3044\u307e\u3059\u3002</p> <p>\u73fe\u5728\u306e\u30ab\u30eb\u30c0\u30ce\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306f5\u79d2\u4ee5\u5185\u306b\u4f1d\u64ad\u3067\u304d\u308c\u3070\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u554f\u984c\u306a\u3044\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3\u3068\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3067\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u51e6\u7406\u901f\u5ea6\u3092\u3042\u3052\u308b\u305f\u3081\u306b\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3084\u30b9\u30de\u30fc\u30c8\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306a\u3069\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u3068\u305d\u306e\u5206\u4f1d\u64ad\u901f\u5ea6\u3082\u9045\u304f\u306a\u308a\u307e\u3059\u3002</p> <p>\u3053\u306e\u3053\u3068\u304b\u3089\u30011\u79d2\uff5e3\u79d2\u524d\u5f8c\u306b\u8907\u6570\u306e\u30d7\u30fc\u30eb\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u767a\u751f\u3057\u3084\u3059\u304f\u3001\u5206\u6563\u5316\u306e\u89b3\u70b9\u304b\u3089\u30d7\u30fc\u30eb\u9593\u306e\u5730\u7406\u7684\u512a\u4f4d\u6027\u3092\u7121\u304f\u3059\u305f\u3081\u306bVRF\u5024\u306b\u3088\u308b\u5224\u5b9a\u3067\u63a1\u7528\u30d6\u30ed\u30c3\u30af\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <p>\u539f\u56e02:\u30b5\u30fc\u30d0\u30fc\u6642\u9593\u306e\u30ba\u30ec\u304b\u3089\u767a\u751f \u30ab\u30eb\u30c0\u30ce\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u8981\u4ef6\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001\u30b5\u30fc\u30d0\u30fc\u5185\u90e8\u6642\u8a08\u3068\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u6642\u9593(NTP\u30b5\u30fc\u30d0\u30fc)\u304c\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u4e88\u5b9a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u9023\u7d9a\u3057\u3066\u767a\u751f\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30ea\u30ec\u30fc\u304a\u3088\u3073BP\u306b\u3066Chrony\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>chronyc tracking\n</code></pre> \u2192 \u300cLeap status\u300d\u304c\u300cNormal\u300d\u306a\u3089OK\u3002\u300cNot synchronized\u300d\u306a\u3089NG</p> <p>\u30df\u30b9\u3057\u305f\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u7528\u3044\u3066\u3001\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059  </p> <p>55901248\u3092\u30df\u30b9\u3057\u305f\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u306b\u76f4\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME/logs\ncat node*.json | grep 55901248\n</code></pre> <p>\u8a72\u5f53\u30b9\u30ed\u30c3\u30c8\u306e\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408 \u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u5f71\u97ff\u3092\u53d7\u3051\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 1\u79d2\uff5e3\u79d2\u524d\u5f8c\u306b\u8907\u6570\u306e\u30d7\u30fc\u30eb\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3067\u767a\u751f\u3057\u3084\u3059\u304f\u3001\u81ea\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u307e\u3067\u306b\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3092\u53d7\u3051\u53d6\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 \u5730\u7406\u7684\u306b\u5206\u6563\u3057\u305f\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u304b\u3001\u30ea\u30ec\u30fc/BP\u306e<code>mainnet-config.json</code>\u306b<code>\"MaxConcurrencyDeadline\":4,</code>\u3092\u8a2d\u5b9a\u3057\u3066\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>\u8a72\u5f53\u30b9\u30ed\u30c3\u30c8\u306e\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408 \u30ce\u30fc\u30c9\u304c\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3044\u305f\u304b\u3001slotsMissed\u306b\u306a\u3063\u305f\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 \u30ea\u30ec\u30fc1\u53f0\u306e\u5834\u5408\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304c\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u3068BP\u3067\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002 \u304b\u305f\u3084\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304c\u7a3c\u50cd\u3057\u3066\u3044\u3066\u3082\u3001BP\u30ce\u30fc\u30c9\u304c\u30b7\u30e3\u30c3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u305f\u5834\u5408\u3082\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002 Grafana\u306a\u3069\u3067\u30ce\u30fc\u30c9\u7a3c\u50cd\u72b6\u614b\u3092\u76e3\u8996\u3057\u3001\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u305f\u5834\u5408\u306b\u30b9\u30de\u30db\u306a\u3069\u3078\u901a\u77e5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002 miss\u306b\u306a\u3063\u305f\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u306e\u3001\u524d\u5f8c\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f720\uff5e30\u3050\u3089\u3044\u3092\u30ed\u30b0\u691c\u7d22\u3057\u3066\u51fa\u3066\u304f\u308c\u3070\u3001\u30ce\u30fc\u30c9\u306f\u52d5\u3044\u3066\u3044\u305f\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002</p> <p>slotsMissed\u3068\u306f\uff1f [gLiveView\u306b\u8868\u793a\u3055\u308c\u308bMissed slot leader checks]  BP\u30ce\u30fc\u30c9\u306f\u6bce\u79d2\u3054\u3068\u306b\u81ea\u5206\u304c\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306a\u306e\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u306e\u72b6\u614b\u3084\u30b5\u30fc\u30d0\u30fc\u8ca0\u8377\u306b\u3088\u3063\u3066\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u30c1\u30a7\u30c3\u30af\u306b\u5931\u6557\u3057\u307e\u3059\u3002 \u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u91cd\u306a\u308b\u3068\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3067\u304d\u307e\u305b\u3093\u3002</p> <p>\u73fe\u5728\u308f\u304b\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u3001\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306bRTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u8efd\u6e1b\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u306e\u5185\u90e8\u4ed5\u69d8\u306b\u3088\u3063\u3066\u3082\u5909\u308f\u3063\u3066\u304f\u308b\u3088\u3046\u306a\u306e\u3067 slotsMissed\u306e\u767a\u751f\u304c\u591a\u3044\u5834\u5408\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u4e57\u308a\u63db\u3048\u3082\u691c\u8a0e\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002(\u30b5\u30fc\u30d0\u30fc\u5185\u90e8\u8a2d\u5b9a\u306f\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5074\u3067\u306f\u5909\u66f4\u3067\u304d\u307e\u305b\u3093)</p> <p>KES\u66f4\u65b0\u30fb\u904b\u7528\u8a3c\u660e\u66f8\u306e\u767a\u884c\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059</p> <p>logmonitor\u306b\u8868\u793a\u3055\u308c\u308b\u3001base64\u30b3\u30fc\u30c9\u3092\u30c7\u30b3\u30fc\u30c9\u3057\u3066\u539f\u56e0\u3092\u63a2\u308a\u307e\u3059\u3002</p> <p><pre><code>tmux a -t logmonitor\n</code></pre> \u30ed\u30b0\u30e2\u30cb\u30bf\u30fc\u306b\u8868\u793a\u3055\u308c\u308b\u3001<code>echo \uff5e jq -r</code>\u307e\u3067\u3092\u30b3\u30d4\u30fc\u3059\u308b \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u4f8b\u3067\u3059\u3002</p> <p>echo eyJ0aHJlYWQiOiIxMzUiLCJzZXYiOiJFcnJvciIsImRhdGEiOnsidmFsIjp7ImtpbmQiOiJUcmFjZUZvcmdlZEludmFsaWRCbG9jayIsInNsb3QiOjQ5MTY1ODc5LCJyZWFzb24iOnsia2luZCI6IlZhbGlkYXRpb25FcnJvciIsImVycm9yIjp7ImtpbmQiOiJIZWFkZXJQcm90b2NvbEVycm9yIiwiZXJyb3IiOnsiZmFpbHVyZXMiOlt7Im9wQ2VydEV4cGVjdGVkS0VTRXZvbHV0aW9ucyI6IjI1Iiwia2luZCI6IkludmFsaWRLZXNTaWduYXR1cmVPQ0VSVCIsIm9wQ2VydEtFU1N0YXJ0UGVyaW9kIjoiMzU0Iiwib3BDZXJ0S0VTQ3VycmVudFBlcmlvZCI6IjM3OSIsImVycm9yIjoiUmVqZWN0In1dLCJraW5kIjoiQ2hhaW5UcmFuc2l0aW9uRXJyb3IifX19fSwiY3JlZGVudGlhbHMiOiJDYXJkYW5vIn0sImxvYyI6bnVsbCwiZW52IjoiMS4zMi4xOjRmNjVmIiwibXNnIjoiIiwiYXBwIjpbXSwiaG9zdCI6ImlwLTE3Mi0yIiwiYXQiOiIyMDIxLTEyLTI4VDIyOjU2OjEwLjQzWiIsIm5zIjpbImNhcmRhbm8ubm9kZS5Gb3JnZSJdLCJwaWQiOiIzODY1MzAifQ== | base64 -d | jq -r</p> <p><code>Ctrl+b d</code>\u3067\u30c7\u30bf\u30c3\u30c1\u3057\u3066\u3001\u4e0a\u8a18\u3067\u30b3\u30d4\u30fc\u3057\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002 <code>\"error\":\"failures\":\"kind\":</code>\u306e\u5024\u304c\u5931\u6557\u3057\u305f\u7406\u7531\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002 <pre><code>{\n    \"thread\": \"135\",\n    \"sev\": \"Error\",\n    \"data\": {\n        \"val\": {\n        \"kind\": \"TraceForgedInvalidBlock\",\n        \"slot\": 49165879,\n        \"reason\": {\n            \"kind\": \"ValidationError\",\n            \"error\": {\n            \"kind\": \"HeaderProtocolError\",\n            \"error\": {\n                \"failures\": [\n                {\n                    \"opCertExpectedKESEvolutions\": \"25\",\n                    \"kind\": \"InvalidKesSignatureOCERT\",\n                    \"opCertKESStartPeriod\": \"354\",\n                    \"opCertKESCurrentPeriod\": \"379\",\n                    \"error\": \"Reject\"\n                }\n                ],\n                \"kind\": \"ChainTransitionError\"\n            }\n            }\n        }\n        },\n        \"credentials\": \"Cardano\"\n    },\n    \"loc\": null,\n    \"env\": \"1.32.1:4f65f\",\n    \"msg\": \"\",\n    \"app\": [],\n    \"host\": \"ip-172-2\",\n    \"at\": \"2021-12-28T22:56:10.43Z\",\n    \"ns\": [\n        \"cardano.node.Forge\"\n    ],\n    \"pid\": \"386530\"\n}\n</code></pre></p>"},{"location":"faq/blocklog/#q2sns","title":"Q2.\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092SNS\u3067\u516c\u958b\u3057\u3066\u3082\u3044\u3044\u3067\u3059\u304b\uff1f","text":"A.NG\u3067\u3059 <p>\u672a\u6765\u306e\u751f\u6210\u4e88\u5b9a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u516c\u958b\u3059\u308b\u3068\u3001\u305d\u306e\u6642\u9593\u3092\u72d9\u3063\u3066\u60aa\u610f\u306e\u3042\u308b\u8005\u304b\u3089\u653b\u6483\u3092\u53d7\u3051\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001 \u4e88\u5b9a\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u516c\u958b\u3059\u308b\u3053\u3068\u306f\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u640d\u306a\u3046\u91cd\u5927\u306a\u554f\u984c\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"faq/monitoring/","title":"\u30ce\u30fc\u30c9\u76e3\u8996\u306b\u95a2\u3059\u308b\u3088\u304f\u3042\u308b\u8cea\u554f","text":""},{"location":"faq/monitoring/#q1grafana","title":"Q1.Grafana\u306e\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5fd8\u308c\u307e\u3057\u305f","text":"A.\u30ed\u30b0\u30a4\u30f3\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u521d\u671f\u5316\u3057\u307e\u3059 <p>\u30ea\u30ec\u30fc\uff11\u306b\u3066\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002 <pre><code>sudo sqlite3 /var/lib/grafana/grafana.db\n</code></pre> <pre><code>update user set password = '59acf18b94d7eb0694c61e60ce44c110c7a683ac6a8f09580d626f90f4a242000746579358d77dd9e570e83fa24faa88a8a6', salt = 'F3FAxVm33R' where login = 'admin';\n</code></pre> <pre><code>.quit\n</code></pre> \u4ee5\u4e0b\u306e\u60c5\u5831\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>Username:<code>admin</code> password:<code>admin</code></p>"},{"location":"faq/node/","title":"\u30ce\u30fc\u30c9\u306b\u95a2\u3059\u308b\u3088\u304f\u3042\u308b\u8cea\u554f","text":""},{"location":"faq/node/#q1","title":"Q1.\u30ce\u30fc\u30c9\u304c\u8d77\u52d5\u30fb\u540c\u671f\u3057\u307e\u305b\u3093","text":"A.\u8d77\u52d5\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <p>\u30ce\u30fc\u30c9\u8d77\u52d5\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u30a8\u30e9\u30fc\u8868\u793a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p> <p>\u300cInvalidYaml (Just (YamlParseException\u300d\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408</p> <ul> <li><code>mainnet-config.json</code> \u69cb\u6587\u30a8\u30e9\u30fc\u306e\u305f\u3081\u30d5\u30a1\u30a4\u30eb\u5185\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <p><code>,</code> <code>{}</code> <code>()</code>\u306a\u3069\u304c\u629c\u3051\u3066\u3044\u305f\u308a\u3001\u591a\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002 </p> </li> </ul> <p>\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u305f\u3089\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>JSON\u69cb\u6587\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\uff08\u30e9\u30c3\u30b3\u30c4\u30fc\u30eb\u30ba\uff09</p> <p> \u300cIs your topology file formatted correctly?\u300d \u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408</p> <ul> <li>mainnet-topology.json \u69cb\u6587\u30a8\u30e9\u30fc\u306e\u305f\u3081\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u76f4\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u305f\u3089\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>Progress: xx.xx%\u306e\u8868\u793a\u304c\u3042\u308b\u5834\u5408 \u524d\u56de\u30ce\u30fc\u30c9\u7d42\u4e86\u6642\u306b\u30e1\u30e2\u30ea\u4e0d\u8db3\u306a\u3069\u3067\u5f37\u5236\u7d42\u4e86\u3057\u305f\u305f\u3081\u3001DB\u518d\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u540c\u671f\u307e\u3067\u306b\u7d0420\u5206\u4ee5\u4e0a\u304b\u304b\u308a\u307e\u3059\u306e\u3067\u305d\u306e\u307e\u307e\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002</p> <p>\u6ce8\u610f</p> <p>\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u540c\u671f\u3057\u306a\u3044\u3046\u3061\u306b\u30ce\u30fc\u30c9\u8d77\u52d5\u30fb\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001DB\u518d\u30c1\u30a7\u30c3\u30af\u304c\u884c\u308f\u308c\u308b\u305f\u3081\u540c\u671f\u304c\u3055\u3089\u306b\u9045\u304f\u306a\u308a\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044</p> <p>BP\u304c\u540c\u671f\u3057\u306a\u3044\u5834\u5408 \u30ea\u30ec\u30fc\u3068\u306e\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <ul> <li>BP\u306emainnet-topology.json</li> <li>BP\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a</li> <li>\u30ea\u30ec\u30fc\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a</li> <li>\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u72ec\u81ea\u306e\u4ed5\u69d8</li> </ul>"},{"location":"faq/node/#q2","title":"Q2.\u30ce\u30fc\u30c9\u304c\u518d\u8d77\u52d5\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059","text":"A.\u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <p><pre><code>df -h /usr\n</code></pre> \u623b\u308a\u5024\u306e<code>Use%</code>\u304c100%\u306b\u8fd1\u3044\u3068\u30ce\u30fc\u30c9DB\u3092\u66f4\u65b0\u3059\u308b\u7a7a\u304d\u5bb9\u91cf\u304c\u8db3\u308a\u306a\u3044\u305f\u3081\u3001\u518d\u8d77\u52d5\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002\u5951\u7d04VPS\u306e\u30b5\u30fc\u30d0\u30fc\u30b9\u30da\u30c3\u30af\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/add-relay/","title":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u5897\u8a2d\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u307e\u305a\u306f\u3001\u5897\u8a2d\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u30671~3\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p>"},{"location":"operation/add-relay/#1ubuntu","title":"1.Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>https://docs.spojapanguild.net/setup/1-ubuntu-setup/</p>"},{"location":"operation/add-relay/#2","title":"2.\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>https://docs.spojapanguild.net/setup/2-node-setup/</p>"},{"location":"operation/add-relay/#3","title":"3.\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a","text":"<p>https://docs.spojapanguild.net/setup/3-relay-bp-setup/#3-1</p>"},{"location":"operation/add-relay/#4bp1","title":"4.BP\u3068\u30ea\u30ec\u30fc1\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u5909\u66f4","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": null,\n\"localRoots\": [\n    {\n      \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(1)!\n        \"port\": 6000 #(2)!\n        },\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff12\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n      ],\n      \"advertise\": false,#(8)!\n      \"trustable\": true,\n      \"valency\": 2 #(5)!\n    }\n],\n\"publicRoots\": [],#(6)!\n\"useLedgerAfterSlot\": -1 #(7)!\n}\nEOF\n</code></pre></p> <ol> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u56fa\u5b9a\u63a5\u7d9a\u30d4\u30a2\u306e\u6570\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\"publicRoots\":\u3092\u7a7a\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> <li><code>-1</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u53f0\u5e33\u304b\u3089\u63a5\u7d9a\u5148\u3092\u53d6\u5f97\u3057\u306a\u3044BP\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059</li> <li>\u3053\u3053\u3067\u306f<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": [\n    {\n    \"address\": \"backbone.cardano.iog.io\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.emurgornd.com\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.cardanofoundation.org\",\n    \"port\": 3001\n    }\n],\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"BP\u306eIP\",#(1)!\n        \"port\": 00000 #(2)!\n        }\n    ],\n        \"advertise\": false,#(5)!\n        \"trustable\": true,\n        \"valency\": 1\n    },\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc2\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n        \"advertise\": true,\n        \"trustable\": true,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    {\n    \"accessPoints\": [],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 128908821\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc2\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc2\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>accessPoints\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>cnrestart\n</code></pre></p>"},{"location":"operation/add-relay/#5","title":"5.\u30d7\u30fc\u30eb\u60c5\u5831\u66f4\u65b0","text":"<p>\u30d7\u30fc\u30eb\u60c5\u5831\u306e\u66f4\u65b0\u3092\u5b9f\u884c\u3057\u3001\u5897\u8a2d\u3057\u305f\u30ea\u30ec\u30fc\u3092\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3057\u307e\u3059\u3002</p>"},{"location":"operation/add-relay/#6grafana","title":"6.Grafana\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"\u5897\u8a2d\u30ea\u30ec\u30fc\u3067\u5b9f\u65bdGrafana\u5c0e\u5165\u6e08\u307f\u306e\u30ea\u30ec\u30fc\u3067\u5b9f\u65bd <p>9-1.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u300cBP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d\u300d\u30bf\u30d6\u3068\u300c\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP\u300d\u30bf\u30d6\u3092\u5897\u8a2d\u30ea\u30ec\u30fc\u3067\u5b9f\u65bd https://docs.spojapanguild.net/setup/9-monitoring-tools-setup/#9-1</p> <p>9-2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210   Grafana\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd #9-2 https://docs.spojapanguild.net/setup/9-monitoring-tools-setup/#2</p>"},{"location":"operation/blocknotify-reinstall/","title":"SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u3064\u3044\u3066</p> <p>\u25a0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5bfe\u8c61\u30d1\u30bf\u30fc\u30f3</p> <ol> <li>\u300c\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> <li>\u300cSPO Block Notify v.2.1.2/v2.1.3\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> <li>\u300c\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u300d\u2192\u300cSPO Block Notify v.2.2.1\u300d</li> </ol> <p>\u25a0\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc</p> <ul> <li>BP\u30b5\u30fc\u30d0\u30fc</li> </ul> <p>\u25a0\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u304b\u3089\u306e\u5909\u66f4\u70b9</p> <ul> <li><code>~/cnode/scripts/block-notify/i18n/</code>\u5185\u306b\u3042\u308b\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3067\u591a\u8a00\u8a9e\u901a\u77e5\u304c\u53ef\u80fd</li> <li>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092<code>.env</code>\u304b\u3089<code>config.ini</code>\u3078\u5909\u66f4</li> <li>tmux\u3067\u306e\u5e38\u99d0\u3092\u5ec3\u6b62\u3057\u3001systemd\u5358\u4f53\u3067\u5e38\u99d0\u3055\u305b\u308b</li> <li><code>leaderlog.service</code>\u306b\u3088\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u3078\u5909\u66f4</li> <li>\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u306e\u901a\u77e5\u6709\u7121\u3092\u9078\u629e\u53ef\u80fd</li> </ul> <p>\u4ee5\u4e0b\u306f\u73fe\u5728\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 SPO Block Notify v.2.1.2/v2.1.3\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 \u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"operation/blocknotify-reinstall/#v1xx","title":"\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 v.1.x.x\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install --upgrade watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#1","title":"1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>tmux\u7d42\u4e86\u78ba\u8a8d <pre><code>tmux ls\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b</p> <p>no server running on ~~~~</p> <p>\u65e2\u5b58\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u30b5\u30fc\u30d3\u30b9\u3092\u524a\u9664\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl disable cnode-blockcheck.service\nsudo rm /etc/systemd/system/cnode-blockcheck.service\nsudo systemctl daemon-reload\n</code></pre></p> <p>\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u305d\u308c\u305e\u308c\u306e\u30bf\u30d6\u3092\u5168\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> cnclivalidateleaderloglogmonitorblocknotify \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\nsudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\nsudo chmod 644 /etc/systemd/system/cnode-blocknotify.service\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre> blockNotify\u3092\u767b\u9332\u3059\u308b <pre><code>sudo systemctl enable cnode-blocknotify.service\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2spo-block-notify","title":"2.SPO Block Notify\u8a2d\u5b9a","text":"<p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <p>Block Notify\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9  <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\n</code></pre></p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u5c55\u958b <pre><code>cd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n/ block-notify-${bn_release}/config.ini\nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\ncd block-notify\n</code></pre></p> <p>\u65e7<code>.env</code>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>cp $NODE_HOME/guild-db/blocklog/.env $NODE_HOME/scripts/block-notify/.env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5024\u5909\u66f4 <pre><code>sed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> \u65e7<code>.env</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u4e2d\u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f <pre><code>cat $NODE_HOME/scripts/block-notify/.env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u306e(8)\u3067\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3ID Line Notify\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#3","title":"3.\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5","text":"<p>\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u306b\u3064\u3044\u3066</p> <ul> <li><code>cncli</code>\u304a\u3088\u3073<code>logmonitor</code>\u306f<code>cnode-node.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059</li> <li><code>validate</code>\u3001<code>leaderlog</code>\u3001<code>blockNotifi</code>\u306f<code>cnode-cncli-sync.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre>"},{"location":"operation/blocknotify-reinstall/#4","title":"4.\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u78ba\u8a8d","text":"<p>\u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnclilog='\"journalctl --no-hostname -u cnode-cncli-sync -f\"' &gt;&gt; $HOME/.bashrc\necho alias validate='\"journalctl --no-hostname -u cnode-cncli-validate -f\"' &gt;&gt; $HOME/.bashrc\necho alias leaderlog='\"journalctl --no-hostname -u cnode-cncli-leaderlog -f\"' &gt;&gt; $HOME/.bashrc\necho alias logmonitor='\"journalctl --no-hostname -u cnode-logmonitor -f\"' &gt;&gt; $HOME/.bashrc\necho alias blocknotify='\"journalctl --no-hostname -u cnode-blocknotify -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre> \u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre> \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u30ed\u30b0\u304c\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002 \u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <code>cnclilog</code> <code>validate</code> <code>leaderlog</code> <code>logmonitor</code> <code>blocknotify</code></p> <p>\u4ed6\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> cnclivalidateleaderloglogmonitorblockNotify <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30ce\u30fc\u30c9\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u304b\u3089\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059</p> <pre><code>cnclilog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>INFO  cncli::nodeclient::sync &gt; block xxxxxxxxx of xxxxxxxxx: 100.00% synced</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u4efb\u610f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3057\u307e\u3059\u3002</p> <pre><code>blocknotify\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"operation/blocknotify-reinstall/#5","title":"5. \u65e7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<pre><code>rm $NODE_HOME/guild-db/blocklog/block_check.py $NODE_HOME/guild-db/blocklog/send.txt\n</code></pre>"},{"location":"operation/blocknotify-reinstall/#spo-block-notify-v212v213","title":"SPO Block Notify v.2.1.2/v2.1.3\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install --upgrade watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#1_1","title":"1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b</p> blocknotify \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>sudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2spo-block-notify_1","title":"2.SPO Block Notify\u518d\u8a2d\u5b9a","text":"<p><code>.env</code>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>cp $NODE_HOME/scripts/block-notify/.env $NODE_HOME/scripts/block-notify-env\n</code></pre></p> <p>\u65e2\u5b58\u30b9\u30af\u30ea\u30d7\u30c8\u524a\u9664 <pre><code>rm -rf $NODE_HOME/scripts/block-notify\n</code></pre></p> <p>Block Notify\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9  <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\n</code></pre></p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u5c55\u958b <pre><code>cd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n/ block-notify-${bn_release}/config.ini\nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\ncd block-notify\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5024\u5909\u66f4 <pre><code>sed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> \u65e7<code>.env</code>\u30d5\u30a1\u30a4\u30eb\u306b\u8a2d\u5b9a\u4e2d\u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f <pre><code>cat $NODE_HOME/scripts/block-notify-env\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u306e(8)\u3067\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3ID Line Notify\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#3_1","title":"3.\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5","text":"<p>\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u306b\u3064\u3044\u3066</p> <ul> <li><code>cncli</code>\u304a\u3088\u3073<code>logmonitor</code>\u306f<code>cnode-node.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059</li> <li><code>validate</code>\u3001<code>leaderlog</code>\u3001<code>blockNotifi</code>\u306f<code>cnode-cncli-sync.service</code>\u306b\u7d10\u3065\u3044\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002</li> </ul> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> cnclivalidateleaderloglogmonitorblockNotify <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30ce\u30fc\u30c9\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u304b\u3089\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059</p> <pre><code>cnclilog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>INFO  cncli::nodeclient::sync &gt; block xxxxxxxxx of xxxxxxxxx: 100.00% synced</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u4efb\u610f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3057\u307e\u3059\u3002</p> <pre><code>blocknotify\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"operation/blocknotify-reinstall/#_1","title":"\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5 \u672a\u5c0e\u5165\u304b\u3089\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>TMUX\u8d77\u52d5\u306e\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u304c\u5c0e\u5165\u6e08\u307f\u3067\u304b\u3064\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u304c\u672a\u5c0e\u5165\u306e\u5834\u5408</p>"},{"location":"operation/blocknotify-reinstall/#1_2","title":"1. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"<p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>tmux\u7d42\u4e86\u78ba\u8a8d <pre><code>tmux ls\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b</p> <p>no server running on ~~~~</p> <p>\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u305d\u308c\u305e\u308c\u306e\u30bf\u30d6\u3092\u5168\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> cnclivalidateleaderloglogmonitor \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\n</code></pre> <p>\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl daemon-reload\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-cncli-sync.service\nsudo systemctl start cnode-logmonitor.service\n</code></pre></p>"},{"location":"operation/blocknotify-reinstall/#2spo-block-notify_2","title":"2.SPO Block Notify\u8a2d\u5b9a","text":"<p>11.SPO BlockNotify\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-move/","title":"BP\u30b5\u30fc\u30d0\u30fc\u306e\u5f15\u8d8a\u3057\u624b\u9806\uff08\u65e7VPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\uff09","text":"<p>\u524d\u63d0\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>\u672c\u307e\u3068\u3081\u306f\u73feVPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\u3078\u3068 <code>BP\u306e\u307f</code> \u3092\u79fb\u884c\u3059\u308b\u307e\u3068\u3081\u3067\u3059\u3002</li> <li>\u5b9f\u969b\u306b\u884c\u3046\u969b\u306b\u306f\u624b\u9806\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u307e\u3067\u4f59\u88d5\u304c\u3042\u308b\u6642\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u65e7BP\u306f3-3.\u65e7BP\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u307e\u3067\u3001\u8d77\u52d5\u72b6\u614b \u306b\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/bp-move/#1bp","title":"1.\u65b0BP\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u7559\u610f\u4e8b\u9805</p> <ol> <li>\u30b5\u30fc\u30d0\u72ec\u81ea\u6a5f\u80fd\u306b\u7559\u610f\u3059\u308b<ul> <li>\u3055\u304f\u3089\u306e\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3084\u3001AWS\u306eFW\u8a2d\u5b9a\u306a\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u72ec\u81ea\u306e\u6a5f\u80fd\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u65b0BP\u306e\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306f\u3001\u65e7BP\u3068\u540c\u3058\u8a2d\u5b9a\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u65e7BP\u306e\u30e6\u30fc\u30b6\u30fc\u540d\uff08\u4f8b\uff1aubuntu\uff09\u3068\u65b0BP\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u306f\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002<ul> <li>\u3082\u3057\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d1\u30b9\u540d\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>startBlockProducingNode.sh</code> DIRECTORY=/home/\u30e6\u30fc\u30b6\u30fc\u540d/cnode</li> </ul> </li> </ol>"},{"location":"operation/bp-move/#1-1ubuntu","title":"1-1.Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>\u65b0\u30b5\u30fc\u30d0\u30fc\u3067Ubuntu\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002  </p>"},{"location":"operation/bp-move/#1-2","title":"1-2.\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<ol> <li>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u301c gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u3068BP\u3092\u63a5\u7d9a\u3059\u308b\u306e\u300cBP\u306e\u5834\u5408\u300d\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"operation/bp-move/#2","title":"2.\u65e2\u5b58\u30ea\u30ec\u30fc\u4f5c\u696d","text":"<p>\u30ea\u30ec\u30fc\u30c8\u30dd\u30ed\u30b8\u30fc\u60c5\u5831\u5909\u66f4 </p> \u624b\u52d5P2P\u306e\u5834\u5408\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u306e\u5834\u5408 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <p><pre><code>nano $NODE_HOME/relay-topology_pull.sh\n</code></pre> \u65e7BP\u306eIP\u3068\u30dd\u30fc\u30c8\u3092\u65b0BP\u306eIP\u3068\u30dd\u30fc\u30c8\u306b\u5909\u66f4\u3059\u308b</p> <ul> <li>BLOCKPRODUCING_IP=xxx.xxx.xxx</li> <li>BLOCKPRODUCING_PORT=xxxx</li> </ul> <p>relay-topology_pull.sh\u3092\u5b9f\u884c\u3057\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002  </p> <p><pre><code>cd $NODE_HOME\n./relay-topology_pull.sh\n</code></pre> \u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>gLiveview\u3067\u30ea\u30ec\u30fc\u304c\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u3059\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044</p> <pre><code>nano $NODE_HOME/${NODE_CONFIG}-topology.json\n</code></pre> <p>\u65e7BP\u306eIP\u3068\u30dd\u30fc\u30c8\u3092\u65b0BP\u306eIP\u3068\u30dd\u30fc\u30c8\u306b\u5909\u66f4\u3059\u308b</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u518d\u8aad\u307f\u8fbc\u307f <pre><code>cnreload\n</code></pre></p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u6709\u52b9\u6642\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u306b\u3088\u308b\u518d\u8d77\u52d5\u306f\u4e0d\u8981\u3067\u3059\u3002</p>"},{"location":"operation/bp-move/#3bp","title":"3.\u65e7BP\u79fb\u884c\u51e6\u7406","text":""},{"location":"operation/bp-move/#3-1bp","title":"3-1.\u65e7BP\u30ce\u30fc\u30c9\u505c\u6b62","text":"\u65e7BP <p><pre><code>sudo systemctl stop cardano-node\n</code></pre> <pre><code>sudo systemctl disable cardano-node\n</code></pre></p>"},{"location":"operation/bp-move/#3-2bp","title":"3-2.\u65e7BP\u30d5\u30a1\u30a4\u30eb\u79fb\u52d5","text":"\u53c2\u8003\uff09\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7 \u30d5\u30a1\u30a4\u30eb\u540d \u7528\u9014 vrf.skey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 vrf.vkey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 kes.skey \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 kes.vkey KES\u516c\u958b\u9375 node.cert \u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u9808 payment.addr \u6b8b\u9ad8\u78ba\u8a8d\u3067\u5fc5\u8981 stake.addr \u6b8b\u9ad8\u78ba\u8a8d\u3067\u5fc5\u8981 poolMetaData.json pool.cert\u4f5c\u6210\u6642\u306b\u5fc5\u8981 poolMetaDataHash.txt pool.cert\u4f5c\u6210\u6642\u306b\u5fc5\u8981 startBlockProducingNode.sh \u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 pool.id-bech32 stakepoolid(bech32\u5f62\u5f0f) pool.id stakepoolid(hex\u5f62\u5f0f) guild-db \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u95a2\u9023\u30d5\u30a9\u30eb\u30c0(cncli.db\u4ee5\u5916) \u65e7BP <p>Zstandard\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install zstd\n</code></pre></p> <p>\u4e0a\u8a18\u306e\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5727\u7e2e\u3059\u308b <pre><code>cd $NODE_HOME\ntar --exclude \"guild-db/cncli/cncli.db\" -acvf bp-move.zst guild-db/ vrf.skey vrf.vkey kes.skey kes.vkey node.cert payment.addr stake.addr poolMetaData.json poolMetaDataHash.txt startBlockProducingNode.sh pool.id-bech32 pool.id\n</code></pre></p> <p>\u65e7BP\u306ecnode\u306b\u3042\u308b<code>bp-move.zst</code>\u3092\u65b0BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3059\u308b <pre><code>graph LR\n    A[\u65e7BP] --&gt;|bp-move.zst| B[\u65b0BP];</code></pre></p>"},{"location":"operation/bp-move/#4bp","title":"4.\u65b0BP\u518d\u8a2d\u5b9a","text":""},{"location":"operation/bp-move/#4-1","title":"4-1.\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u5fa9\u5143","text":"\u65b0BP <p>\u30ce\u30fc\u30c9\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u78ba\u8a8d <pre><code>ls $NODE_HOME/bp-move.zst\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002 \u4f8b\uff09<code>/home/cardano/cnode/bp-move.zst</code></p> <p>\u30d5\u30a1\u30a4\u30eb\u5c55\u958b <pre><code>cd $NODE_HOME\ntar -xvf bp-move.zst\n</code></pre></p> <p>\u623b\u308a\u5024\u306b\u79fb\u884c\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u5727\u7e2e\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b <pre><code>rm bp-move.zst\n</code></pre></p>"},{"location":"operation/bp-move/#4-2","title":"4-2. \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4","text":"\u65b0BP <pre><code>cd $NODE_HOME\nchmod 400 vrf.skey\nchmod 400 vrf.vkey\nchmod +x startBlockProducingNode.sh\n</code></pre> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl start cardano-node\n</code></pre> \u30ce\u30fc\u30c9\u30ed\u30b0\u78ba\u8a8d <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p>"},{"location":"operation/bp-move/#4-3-bp","title":"4-3. \u65b0BP\u63a5\u7d9a\u78ba\u8a8d","text":"<p>gLiveView\u3067\u65b0BP\u304c\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u5f8c\u3001\u30ea\u30ec\u30fc\u3068\u758e\u901a(I/O)\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u65b0BP <p>gLiveView\u78ba\u8a8d <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre></p> <p>Peer\u30ea\u30b9\u30c8\u306b\u30ea\u30ec\u30fc\u306eIP\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-move/#4-4-paramsjson","title":"4-4. params.json\u518d\u4f5c\u6210","text":"\u65b0BP <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    --mainnet \\\n    --out-file params.json\n</code></pre>"},{"location":"operation/bp-move/#4-5","title":"4-5. \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u8a2d\u5b9a","text":"<ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u5c0e\u5165\u624b\u9806</li> </ul> <p>\u6ce8\u610f</p> <p>\u300c10-6. \u904e\u53bb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u5b9f\u7e3e\u53d6\u5f97\u300d\u306f\u5b9f\u65bd\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-move/#4-6-sjg","title":"4-6. SJG\u30c4\u30fc\u30eb\u5c0e\u5165","text":"<ul> <li>SPO JAPAN GUILD TOOL</li> </ul>"},{"location":"operation/bp-move/#4-7","title":"4-7. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af","text":"<p>SJG\u30c4\u30fc\u30eb\u3092\u8d77\u52d5\u3057\u3001\u300c[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u300d\u3067\u3059\u3079\u3066\u306e\u9805\u76ee\u304cOK\u306b\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/bp-move/#4-8","title":"4-8. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u8a2d\u5b9a","text":"<p>(SPO Block Notify)</p> \u65e7BP\u3067\u5c0e\u5165\u6e08\u307f\u306e\u5834\u5408\u65e7BP\u3067\u672a\u5c0e\u5165\u306e\u5834\u5408 <ol> <li>\u65b0BP\u306711-1. \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u307f\u3092\u5b9f\u65bd\u3059\u308b</li> <li>\u65e7BP\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3059\u308b</li> </ol> <p><pre><code>cat $NODE_HOME/scripts/block-notify/.env\n</code></pre> \u307e\u305f\u306f <pre><code>cat $NODE_HOME/guild-db/blocklog/.env\n</code></pre> \u307e\u305f\u306f <pre><code>cat $NODE_HOME/scripts/block-notify/config.ini\n</code></pre></p> <ol> <li>\u65b0BP\u306711-3. \u901a\u77e5\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3059\u308b \uff08config.ini\u306e\u8a2d\u5b9a\u5024\u306f\u65e7BP\u3067\u8868\u793a\u3055\u308c\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u53c2\u8003\u306b\u3059\u308b\uff09</li> </ol> <p>SPO Block Notify\u8a2d\u5b9a\u304b\u3089\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bp-move/#5-prometheus","title":"5. Prometheus\u8a2d\u5b9a","text":""},{"location":"operation/bp-move/#5-1bpnode-exporter","title":"5-1.\u65b0BP<code>node exporter</code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u65b0BP <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre></p> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bp-move/#5-2grafanaprometheusyml","title":"5-2.Grafana\u30b5\u30fc\u30d0\u30fc<code>prometheus.yml</code>\u306e\u4fee\u6b63","text":"Grafana\u30b5\u30fc\u30d0\u30fc(\u30ea\u30ec\u30fc1) <p><code>prometheus.yml</code>\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u65e7BP\u306eIP\u3092\u65b0BP\u306eIP\u3078\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre></p> <p>Grafana\u306bBP\u306e\u30e1\u30c8\u30ea\u30af\u30b9(KES\u306a\u3069)\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/bp-move/#6","title":"6.\u6700\u7d42\u4f5c\u696d","text":""},{"location":"operation/bp-move/#6-1bp","title":"6-1.\u65e7BP\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3","text":"\u65e7BP <pre><code>sudo shutdown -h now\n</code></pre>"},{"location":"operation/bp-move/#6-2tracemempool","title":"6-2.Tracemempool\u7121\u52b9\u5316","text":"<p>Tx\u306e\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089Tracemempool\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002</p> \u65b0BP <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bp-move/#6-3mithril-signer","title":"6-3.Mithril-Signer\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u65e7\u30b5\u30fc\u30d0\u30fc\u3067Mithril-Signer-Node\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e0d\u660e\u70b9\u304c\u3042\u308b\u5834\u5408\u306fBTBF SPO LAB.\u3067\u3054\u8cea\u554f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/bpport/","title":"BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u5909\u66f4\u624b\u9806","text":"<p>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u30926000\u756a\u3067\u904b\u7528\u3055\u308c\u3066\u308b\u65b9\u5411\u3051\u306e\u5909\u66f4\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u3059\u3002</p> <p>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\u7406\u7531</p> <p>CNTOOL\u3067\u306f\u53c2\u8003\u3068\u3057\u30666000\u30dd\u30fc\u30c8\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u304a\u308a\u3001\u3053\u3061\u3089\u306b\u5408\u308f\u305b\u308b\u5f62\u3067\u5f53\u30de\u30cb\u30e5\u30a2\u30eb\u30826000\u3092\u63a1\u7528\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u304c\u30016000\u30dd\u30fc\u30c8\u306f\u300cx window system\u300d\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u308b\u30dd\u30fc\u30c8\u3067\u3001\u4f7f\u308f\u306a\u3051\u308c\u3070\u4f7f\u3063\u3066\u3082\u5927\u4e08\u592b\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3057\u3001BP\u30dd\u30fc\u30c8=6000\u3068\u3044\u3046\u8a8d\u8b58\u304c\u5e83\u307e\u3063\u3066\u3044\u304f\u3068\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u597d\u307e\u3057\u304f\u306a\u304f\u5404\u30d7\u30fc\u30eb\u3067\u72ec\u81ea\u30dd\u30fc\u30c8\u3092\u63a1\u7528\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u305f\u3081\u3002</p>"},{"location":"operation/bpport/#_1","title":"\u5909\u66f4\u70b9","text":"<ol> <li>\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30dd\u30fc\u30c8(49513\uff5e65535\u307e\u3067\u306e\u756a\u53f7)\u3092\u4f7f\u3044\u307e\u3059\u3002</li> <li>$NODE_HOME/<code>startBlockProducingNode.sh</code>\u306ePORT=6000\u3092\u5909\u66f4\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3078\u3068\u66f8\u304d\u63db\u3048\u307e\u3059\u3002</li> <li>$NODE_HOME/scripts/<code>env</code>\u306eCNODE_PORT=6000\u3092\u5909\u66f4\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3078\u3068\u66f8\u304d\u63db\u3048\u307e\u3059\u3002</li> </ol>"},{"location":"operation/bpport/#bp_1","title":"BP\u306b\u3066\u5b9f\u65bd","text":"<p>\u65b0\u3057\u3044BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6c7a\u3081\u308b\u70ba\u3001xxxxx\u3092(49513\uff5e65535)\u306e\u7bc4\u56f2\u5185\u3067\u6c7a\u3081\u3066\u5165\u529b\u3057\u307e\u3059\u3002</p> <pre><code>PORT=xxxxx\n</code></pre> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30dd\u30fc\u30c8\u3092\u65b0\u3057\u3044\u30dd\u30fc\u30c8\u306b\u66f8\u304d\u63db\u3048\u308b(\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c) <pre><code>sed -i $NODE_HOME/startBlockProducingNode.sh \\\n    -e '1,73s!PORT=6000!PORT='${PORT}'!'\nsed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!CNODE_PORT=6000!CNODE_PORT='${PORT}'!'\n</code></pre></p>"},{"location":"operation/bpport/#bpufw","title":"BP\u30b5\u30fc\u30d0\u30fcufw\u8a2d\u5b9a\u5909\u66f4","text":"<p>ufw\u3092\u4f7f\u308f\u306a\u3044\u30b1\u30fc\u30b9</p> <p>AWS\u3084VSP\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a(\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb)\u3092\u884c\u3046\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u5834\u5408\u306f\u3001\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u65b0\u3057\u3044\u30dd\u30fc\u30c8\u756a\u53f7\u53d6\u5f97 <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u65e7BP\u30dd\u30fc\u30c8\u8a31\u53ef\u3092\u524a\u9664</p> <p>\u5c71\u304b\u3063\u3053&lt;&gt;\u306f\u4e0d\u8981\u3067\u3059 <pre><code>sudo ufw status numbered\n</code></pre> <pre><code>sudo ufw delete &lt;\u524a\u9664\u3057\u305f\u3044\u756a\u53f7&gt;\n</code></pre></p> <p>\u65b0\u3057\u3044BP\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u8a31\u53ef\u3092\u8a2d\u5b9a\uff08\u30ea\u30ec\u30fc\u304c\uff12\u53f0\u3042\u308b\u60f3\u5b9a\uff09  Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\uff11&gt; to any port ${b_PORT}\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\uff12&gt; to any port ${b_PORT}\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/bpport/#_2","title":"\u5909\u66f4\u78ba\u8a8d","text":"<ul> <li>BP\u30dd\u30fc\u30c8\u304c\u304d\u3061\u3093\u3068\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> <pre><code>ps aux | grep cardano-node\n</code></pre> <p>\u623b\u308a\u5024\u306e --port \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <ul> <li>BP\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u5f8c\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u5e38\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3053\u3068\u3082\u4f75\u305b\u3066\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002</li> </ul> <pre><code>tmux a -t cncli\ntmux a -t leaderlog\ntmux a -t logmonitor\ntmux a -t validate\ntmux a -t blockcheck\n</code></pre> <p>blockcheck\u30b5\u30fc\u30d3\u30b9\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u30b3\u30de\u30f3\u30c9\u3082\u4f75\u305b\u3066\u8a18\u8f09\u3057\u3066\u307e\u3059\u3002</p> \u88dc\u8db3   \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9 <pre><code>sudo systemctl reload-or-restart cnode-cncli-sync.service\n</code></pre> \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30c3\u30af\u518d\u8d77\u52d5\u30b3\u30de\u30f3\u30c9 <pre><code>sudo systemctl reload-or-restart cnode-blockcheck.service\n</code></pre>  \u30c7\u30bf\u30c3\u30c1\u65b9\u6cd5 <pre><code>Ctrl + b \u2192 d\n</code></pre>"},{"location":"operation/bpport/#_3","title":"\u30ea\u30ec\u30fc\u306b\u3066\u5b9f\u65bd","text":"<p>\u758e\u901a\u78ba\u8a8d</p> <p>0.0.0.0\u3092BPIP\u306b\u66f8\u304d\u63db\u3048\u3066\u3001 xxxxx\u3092BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u5b9f\u884c\u3002     <pre><code>nc -vz 0.0.0.0 xxxxx\n</code></pre></p> <p>port [tcp/*] succeeded! \u3067\u3042\u308c\u3070OK\u3067\u3059\u3002</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u66f8\u304d\u63db\u3048</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u5171\u6709\u306e\u305f\u3081\u5225\u30d5\u30a1\u30a4\u30eb\u3092\u81ea\u8eab\u3067\u4f5c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u305d\u3061\u3089\u3067\u3082\u5fd8\u308c\u305a\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002 xxxxx\u306f\u3001BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <p><pre><code>PORT=xxxxx\n</code></pre> <pre><code>sed -i $NODE_HOME/relay-topology_pull.sh \\\n    -e '1,10s!BLOCKPRODUCING_PORT=6000!BLOCKPRODUCING_PORT='${PORT}'!'\n</code></pre></p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u4f5c\u6210\u3057\u307e\u3059\u3002 <pre><code>cd $NODE_HOME\n./relay-topology_pull.sh\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>BP\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cat $NODE_HOME/mainnet-topology.json\n</code></pre></p>"},{"location":"operation/bpport/#_4","title":"\u6700\u7d42\u78ba\u8a8d","text":"<p>BP\u306eGliveView\u3092\u8d77\u52d5\u3057\u3001[p] Peer Analysis\u3092\u8868\u793a\u3002 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306eIP\u304c<code>i</code>\u3068<code>o</code>\u4e21\u65b9\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/catalyst-voting/","title":"\u30ab\u30bf\u30ea\u30b9\u30c8\u6709\u6a29\u8005\u767b\u9332","text":"<p>\u6982\u8981</p> <ul> <li> <p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306f\u3001\u30d7\u30fc\u30eb\u306epayment.addr\u3092\u6709\u6a29\u8005\u767b\u9332\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002   payment.addr\u306e\u8cc7\u91d1\u3092Voting\u30d1\u30ef\u30fc\u306b\u4f7f\u7528\u3067\u304d\u3001Catalyst\u6295\u7968\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002</p> </li> <li> <p>\u4f9d\u5b58\u95a2\u4fc2\u306f<code>BP</code>\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li>\u6709\u6a29\u8005\u767b\u9332\u4f5c\u696d\u306fSJG TOOL\u3067\u884c\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"operation/catalyst-voting/#1","title":"1. \u4e8b\u524d\u6e96\u5099\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u4ee5\u4e0b\u306e\u4f9d\u5b58\u95a2\u4fc2\u306fBP\u30b5\u30fc\u30d0\u30fc\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>\u5fc5\u8981\u306a\u30d0\u30a4\u30ca\u30ea</p> bech32 cardano-signer catalyst-toolbox v1.1.3 v1.13.0 v0.5.0"},{"location":"operation/catalyst-voting/#bech32","title":"Bech32\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\nwget https://github.com/input-output-hk/bech32/archive/refs/tags/$(curl -s https://api.github.com/repos/input-output-hk/bech32/releases/latest | jq -r .tag_name).tar.gz\ntar -xf $(curl -s https://api.github.com/repos/input-output-hk/bech32/releases/latest | jq -r .tag_name).tar.gz\nmv bech32-$(curl -s https://api.github.com/repos/input-output-hk/bech32/releases/latest | jq -r .tag_name | tr -d v) bech32\nrm $(curl -s https://api.github.com/repos/input-output-hk/bech32/releases/latest | jq -r .tag_name).tar.gz\n</code></pre> <p>\u30d3\u30eb\u30c9</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd bech32\ncabal update\ncabal build bech32\n</code></pre> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp $(find $HOME/git/bech32/dist-newstyle/build -type f -name \"bech32\") /usr/local/bin/bech32\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>bech32 -v\n</code></pre> <p>\u623b\u308a\u5024 1.1.3</p>"},{"location":"operation/catalyst-voting/#cardano-signer","title":"cardano-signer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\nwget https://github.com/gitmachtl/cardano-signer/releases/download/$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name)/cardano-signer-$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name | tr -d v)_linux-x64.tar.gz\ntar -xf cardano-signer-$(curl -s https://api.github.com/repos/gitmachtl/cardano-signer/releases/latest | jq -r .tag_name | tr -d v)_linux-x64.tar.gz\n</code></pre> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo cp $HOME/git/cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-signer help | grep -m 1 \"cardano-signer\"\n</code></pre> <p>cardano-signer 1.13.0</p>"},{"location":"operation/catalyst-voting/#_1","title":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3078\u30b3\u30d4\u30fc","text":"<p>BP\u306e<code>$HOME/git/</code>\u76f4\u4e0b\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>$HOME/git/</code>\u76f4\u4e0b\u306b\u30b3\u30d4\u30fc\u3059\u308b</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306b\u3042\u308b<code>cardano-signer</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306e$HOME/git/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|cardano-signer| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sudo cp $HOME/git/cardano-signer /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sudo chmod 755 /usr/local/bin/cardano-signer\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cardano-signer help | grep -m 1 \"cardano-signer\"\n</code></pre> <p>cardano-signer 1.13.0</p>"},{"location":"operation/catalyst-voting/#catalyst-toolbox","title":"catalyst-toolbox\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/input-output-hk/catalyst-toolbox.git\ncd catalyst-toolbox\ngit checkout 6c3ebb7\n</code></pre> <p>Rust\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>rustup update\n</code></pre> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd catalyst-toolbox\ncargo install --path . --force\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>catalyst-toolbox --version\n</code></pre> <p>catalyst-toolbox 0.5.0</p>"},{"location":"operation/catalyst-voting/#2","title":"2. \u6709\u6a29\u8005\u767b\u9332\u4f5c\u696d","text":""},{"location":"operation/catalyst-voting/#sjgtool","title":"SJGTOOL\u8d77\u52d5","text":"<p>\u6709\u6a29\u8005\u767b\u9332\u306e\u6d41\u308c</p> <pre><code>    graph LR\n        A[\u4f9d\u5b58\u95a2\u4fc2\u30c1\u30a7\u30c3\u30af] --&gt; B[\u6295\u7968\u7528\u30ad\u30fc\u4f5c\u6210] --&gt; C[\u30e1\u30bf\u30c7\u30fc\u30bf\u4f5c\u6210] --&gt; D[Tx\u4f5c\u6210/\u9001\u4fe1] --&gt; E[QR\u30b3\u30fc\u30c9\u4f5c\u6210];</code></pre> <p>\u4f5c\u6210\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066</p> <p><code>XXX_voting.skey</code> / <code>XXX_voting.vkey</code> / <code>XXX_voting.json</code> (XXX\u306f\u30c6\u30a3\u30c3\u30ab\u30fc\u540d)</p> <ul> <li>\u4e0a\u8a18\u306e3\u30d5\u30a1\u30a4\u30eb\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001USB\u306a\u3069\u3078\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li><code>XXX_voting.json</code>\u306b\u306f\u3001\u5fa9\u5143\u30d5\u30ec\u30fc\u30ba\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002 Fund11\u304b\u3089\u958b\u59cb\u4e88\u5b9a\u306eWeb\u7248Catalyst\u6295\u7968\u30bb\u30f3\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\u969b\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u53b3\u91cd\u306b\u4fdd\u7ba1\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u4e2d\u65ad\u3057\u305f\u5834\u5408</p> <p>\u51e6\u7406\u304c\u9014\u4e2d\u3067\u4e2d\u65ad\u3057\u305f\u5834\u5408\u3067\u3082\u3001SJGTOOL\u3092\u8d77\u52d5\u3057<code>[5]Catalyst\u6709\u6a29\u8005\u767b\u9332</code>\u3092\u9078\u629e\u3059\u308c\u3070\u9014\u4e2d\u304b\u3089\u518d\u958b\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/catalyst-voting/#qr","title":"QR\u30b3\u30fc\u30c9\u4f5c\u6210\u5f8c","text":"<p>QR\u30b3\u30fc\u30c9\u304c\u767a\u884c\u3067\u304d\u305f\u3089<code>$HOME/CatalystVoting</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u30d5\u30a1\u30a4\u30eb\u306e\u6574\u7406\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> \u30d5\u30a1\u30a4\u30eb\u540d \u30b5\u30fc\u30d0\u30fc\u5185\u51e6\u7406 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7 XXX_voting.skey \u524a\u9664 \u5fc5\u9808 XXX_voting.vkey \u524a\u9664 \u5fc5\u9808 XXX_voting.json \u524a\u9664 \u5fc5\u9808 vote-registration.cbor \u524a\u9664 \u4efb\u610f XXX_vote_qrcode.png \u4fdd\u7ba1 \u5fc5\u9808 txhash.log \u4fdd\u7ba1 \u4efb\u610f"},{"location":"operation/cert-update/","title":"\u30d7\u30fc\u30eb\u60c5\u5831(pool.cert)\u306e\u66f4\u65b0","text":"<p>\u6982\u8981</p> <ul> <li>\u8a93\u7d04\u3001\u56fa\u5b9a\u624b\u6570\u6599\u3001\u5909\u52d5\u624b\u6570\u6599\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306b\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u307f\u5909\u66f4\u306b\u306a\u308b\u5834\u5408\u3067\u3082\u300c\u30e1\u30bf\u30c7\u30fc\u30bf\u66f4\u65b0\u3092\u542b\u3080\u5834\u5408\u300d\u3092\u5b9f\u65bd\u3057\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u6ce8\u610f</p> <p>\u8a93\u7d04\u30fb\u56fa\u5b9a\u624b\u6570\u6599\u30fb\u5909\u52d5\u624b\u6570\u6599\u306e\u53cd\u6620\u306f\u63d0\u51fa\u30a8\u30dd\u30c3\u30af\uff0b3\u30a8\u30dd\u30c3\u30af\u5f8c\u304b\u3089\u306b\u306a\u308a\u307e\u3059\u3002 \u4f8b\uff09 320\u30a8\u30dd\u30c3\u30af\u306b\u5909\u66f4\u7533\u8acb 321\u30a8\u30dd\u30c3\u30af\u3067\u6709\u52b9\u5316 322\u30a8\u30dd\u30c3\u30af\u3067\u5f85\u6a5f 323\u30a8\u30dd\u30c3\u30af\u3067\u53cd\u6620  </p> \u30e1\u30bf\u30c7\u30fc\u30bf\u66f4\u65b0\u3092\u542b\u3080\u5834\u5408\u8a93\u7d04\u3001\u624b\u6570\u6599\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u306e\u307f\u66f4\u65b0\u306e\u5834\u5408 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u5909\u6570\u306b\u30d7\u30fc\u30eb\u30e1\u30bf\u30c7\u30fc\u30bf\u5024\u3092\u8a2d\u5b9a\u3057\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u6587\u5b57\u5217\u306f<code>''</code>\u3067\u56f2\u3063\u3066\u304f\u3060\u3055\u3044 extended\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f <code>''</code>\u306e\u307e\u307e\u3067\u5927\u4e08\u592b\u3067\u3059 <pre><code>name=''\ndescription=''\nticker=''\nhomepage=''\nextended=''\n</code></pre></p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/poolMetaData.json &lt;&lt; EOF\n{\n    \"name\": \"$name\",\n    \"description\": \"$description\",\n    \"ticker\": \"$ticker\",\n    \"homepage\": \"$homepage\",\n    \"extended\": \"$extended\",\n    \"nonce\":\"$(date +%s)\"\n}\nEOF\n</code></pre> <p>poolMetaData.json\u3092\u5404\u30db\u30b9\u30c8\u30b5\u30fc\u30d0\u30fc\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b</p> <p>poolMetaData.json\u3092\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001Github\u307e\u305f\u306f\u3054\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u6240\u5b9a\u306e\u4f4d\u7f6e\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool metadata-hash --pool-metadata-file poolMetaData.json &gt; poolMetaDataHash.txt\n</code></pre> <p>\u30aa\u30f3\u30e9\u30a4\u30f3\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> <p><code>https:****.**.**</code>\u3092\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306eURL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME\nwget -O onlineMetaData.json https:****.**.**\n</code></pre> <p>\u30aa\u30f3\u30e9\u30a4\u30f3\u30e1\u30bf\u30c7\u30fc\u30bf\u30cf\u30c3\u30b7\u30e5\u5024 <pre><code>cardano-cli conway stake-pool metadata-hash --pool-metadata-file onlineMetaData.json &gt; onlineMetaDataHash.txt\n</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024 <pre><code>printf \"\\n\u3000\u30b5\u30fc\u30d0\u30fc:$(cat poolMetaDataHash.txt)\\n\u30aa\u30f3\u30e9\u30a4\u30f3:$(cat onlineMetaDataHash.txt)\\n\\n\"\n</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u7570\u306a\u308b\u5834\u5408\u306f\u30db\u30b9\u30c8\u30b5\u30fc\u30d0\u30fc\u3078\u6b63\u3057\u304f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u305f\u3089\u3001\u78ba\u8a8d\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\u3002 <pre><code>rm onlineMetaDataHash.txt\nrm onlineMetaData.json\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>poolMetaDataHash.txt</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|poolMetaDataHash.txt| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\necho $(cat poolMetaDataHash.txt)\n</code></pre> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\necho $(cat poolMetaDataHash.txt)\n</code></pre> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001BP\u306epoolMetaDataHash.txt\u304c\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u6b63\u3057\u304f\u30b3\u30d4\u30fc\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002</p> <p>\u767b\u9332\u8a3c\u660e\u66f8\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b</p> <p>\u8907\u6570\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306f \u8907\u6570\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u69cb\u6210\u3059\u308b\u8a18\u8ff0\u65b9\u6cd5 \u3092\u53c2\u8003\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u6307\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002  </p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u53c2\u8003\u30b3\u30fc\u30c9\u3067\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u8a2d\u5b9a\u5024\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044 \u4f8b\uff09  </p> <ul> <li>\u56fa\u5b9a\u8cbb\u30fb\u30fb\u30fb170ADA</li> <li>Margin\u30fb\u30fb\u30fb5%</li> <li>\u8a93\u7d04\u30fb\u30fb\u30fb1000ADA</li> </ul> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\n</code></pre> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool registration-certificate \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --vrf-verification-key-file vrf.vkey \\\n    --pool-pledge 1000000000 \\\n    --pool-cost 170000000 \\\n    --pool-margin 0.05 \\\n    --pool-reward-account-verification-key-file stake.vkey \\\n    --pool-owner-stake-verification-key-file stake.vkey \\\n    $NODE_NETWORK \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --metadata-url https://xxx.xxx.xxx/poolMetaData.json \\\n    --metadata-hash $(cat poolMetaDataHash.txt) \\\n    --out-file pool.cert\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u81ea\u30d7\u30fc\u30eb\u7528\u306e\u8a2d\u5b9a\u306b\u4fee\u6b63\u3057\u305f\u3089\u3001\u6b21\u56de\u3082\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u8a93\u7d04\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address stake-delegation-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --out-file deleg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>pool.cert</code>\u3068<code>deleg.cert</code>\u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.cert / deleg.cert| B[BP];</code></pre></p> <p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 3 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"operation/command/","title":"6.Linux\u30b3\u30de\u30f3\u30c9\u96c6","text":"<p>[AKYO] AKYO\ud83e\udd41 Akyo\u3055\u3093\u304b\u3089\u3054\u63d0\u4f9b\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p>"},{"location":"operation/command/#_1","title":"\u30ce\u30fc\u30c9\u505c\u6b62","text":"<pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnstop\n</code></pre></p>"},{"location":"operation/command/#_2","title":"\u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnstart\n</code></pre></p>"},{"location":"operation/command/#_3","title":"\u30ce\u30fc\u30c9\u518d\u8d77\u52d5","text":"<pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre> <p>\u203b\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u6e08\u307f\u306e\u5834\u5408 <pre><code>cnrestart\n</code></pre></p>"},{"location":"operation/command/#_4","title":"\u30b5\u30fc\u30d0\u518d\u8d77\u52d5","text":"<p>\u88dc\u8db3 - \u30ce\u30fc\u30c9\u505c\u6b62\u3057\u3066\u304b\u3089\u5b9f\u65bd\u3057\u307e\u3057\u3087\u3046\u3002 <pre><code>sudo reboot\n</code></pre></p>"},{"location":"operation/command/#_5","title":"\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d","text":"<p>\u88dc\u8db3 - \u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u30b5\u30fc\u30d3\u30b9 <pre><code>ps aux | grep cardano-node\n</code></pre></p>"},{"location":"operation/command/#_6","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u78ba\u8a8d","text":"<pre><code>networkctl status -a\n</code></pre>"},{"location":"operation/command/#_7","title":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u758e\u901a\u78ba\u8a8d","text":"<pre><code>nc -vz &lt;IP&gt; &lt;Port&gt;\n</code></pre>"},{"location":"operation/command/#_8","title":"\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u5404\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5","text":"<p>\u88dc\u8db3 - (cncli / leaderlog / validate / logmonitor) <pre><code>sudo systemctl reload-or-restart cnode-cncli-sync.service\n</code></pre></p>"},{"location":"operation/command/#_9","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0","text":"<p>\u88dc\u8db3 - \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u53ca\u3073\u66f4\u65b0\u3001\u78ba\u8a8d <pre><code>cd $NODE_HOME\ndate=`date +\\%Y\\%m\\%d`\nmv params.json params-$date.json\ncardano-cli conway query protocol-parameters \\\n    --mainnet \\\n    --out-file params.json\n</code></pre> <pre><code>nano params.json\n</code></pre></p>"},{"location":"operation/command/#tracemempooltruefalse","title":"TraceMempool\u3092True\u304b\u3089False\u306b\u3059\u308b","text":"<p><pre><code>cd $NODE_HOME\nsed -i ${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> - \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/command/#tracemempoolfalsetrue","title":"TraceMempool\u3092False\u304b\u3089True\u306b\u3059\u308b","text":"<p><pre><code>cd $NODE_HOME\nsed -i ${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": false/TraceMempool\\\": true/g\"\n</code></pre> - \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p>"},{"location":"operation/command/#_10","title":"\u65e2\u5b58\u306e\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<pre><code>cd $HOME\nsudo swapoff /swapfile\nsudo rm /swapfile\n</code></pre>"},{"location":"operation/command/#_11","title":"\u30b9\u30ef\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u88dc\u8db3 - 8GB\u306e\u30b9\u30ef\u30c3\u30d7\u3092\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9 <pre><code>sudo systemctl stop cardano-node\n</code></pre> <pre><code>cd $HOME\nsudo fallocate -l 8G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\nsudo swapon --show\nsudo cp /etc/fstab /etc/fstab.bak\necho '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab\necho 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf\necho 'vm.vfs_cache_pressure=50' | sudo tee -a /etc/sysctl.conf\ncat /proc/sys/vm/vfs_cache_pressure\ncat /proc/sys/vm/swappiness\n</code></pre> <pre><code>sudo reboot\n</code></pre></p>"},{"location":"operation/command/#ssh","title":"SSH\u63a5\u7d9a","text":"<pre><code>ssh -i /Users/\u30ed\u30fc\u30ab\u30eb\u30e6\u30fc\u30b6\u540d/\u30ed\u30fc\u30ab\u30eb\u683c\u7d0d\u5148/id_rsa \u63a5\u7d9a\u5148\u30e6\u30fc\u30b6\u540d@\u63a5\u7d9a\u5148IP -p \u30dd\u30fc\u30c8\u756a\u53f7\n</code></pre>"},{"location":"operation/command/#systemd","title":"systemd\u6d3b\u7528\u30b3\u30de\u30f3\u30c9","text":""},{"location":"operation/command/#_12","title":"\ud83d\uddc4 \u30ed\u30b0\u306e\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0","text":"<p>\u6628\u65e5\u306e\u30ed\u30b0 <pre><code>journalctl --unit=cardano-node --since=yesterday\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p> <p>\u4eca\u65e5\u306e\u30ed\u30b0 <pre><code>journalctl --unit=cardano-node --since=today\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p> <p>\u671f\u9593\u6307\u5b9a <pre><code>journalctl --unit=cardano-node --since='2020-07-29 00:00:00' --until='2020-07-29 12:00:00'\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p>"},{"location":"operation/gov-spo-vote/","title":"\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3SPO\u6295\u7968","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u6295\u7968\u624b\u9806\u306f\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u306eSPO\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002</li> <li>SJG Tool\u306b\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u304c\u5b9f\u884c\u7d50\u679c\u306f\u540c\u3058\u3067\u3059\u3002</li> <li>\u6295\u7968\u306b\u306f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u304c\u5fc5\u8981\u3067\u3059\u3002</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306fpayment.addr\u304b\u3089\u5f15\u304d\u843d\u3068\u3055\u308c\u307e\u3059\u3002\u30d7\u30fc\u30eb\u8a93\u7d04\u3092\u4e0b\u56de\u3089\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u78ba\u8a8d\u30b5\u30a4\u30c8 https://cardanoscan.io/govActions https://gov.tools/governance_actions</p> BP/\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>\u521d\u3081\u3066\u4f5c\u696d\u3059\u308b\u5834\u5408\u306f\u30ac\u30d0\u30ca\u30f3\u30b9\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b <pre><code>mkdir -p $NODE_HOME/governance\n</code></pre></p>"},{"location":"operation/gov-spo-vote/#1","title":"1.\u6295\u7968\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u6295\u7968\u4f8b</p> <p>\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3ID:<code>59fd353253eb177e2104e8f23ea4c63e3d32ef95c7865d03e90d3884424dc1db</code>\u306b\u5bfe\u3057\u3066 <code>No</code>\u3067\u6295\u7968\u3059\u308b\u5834\u5408</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u6295\u7968\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <ol> <li><code>gov_id</code>\u5909\u6570\u306b\u6295\u7968\u3059\u308b\u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3ID\u3092\u6307\u5b9a\u3059\u308b(Bech32ID\u306f\u6307\u5b9a\u3067\u304d\u306a\u3044) </li> <li>\u6295\u7968\u30d5\u30e9\u30b0\u306f\u6b21\u306e3\u3064\u306e\u3044\u305a\u308c\u304b\u3092\u6307\u5b9a <code>--yes</code> <code>--no</code> <code>--abstain</code> </li> </ol> <pre><code>gov_id=\"59fd353253eb177e2104e8f23ea4c63e3d32ef95c7865d03e90d3884424dc1db\"\n</code></pre> <pre><code>chmod u+rwx $HOME/cold-keys\ncd $NODE_HOME\ncardano-cli conway governance vote create \\\n--no \\\n--governance-action-tx-id $gov_id \\\n--governance-action-index \"0\" \\\n--cold-verification-key-file $HOME/cold-keys/node.vkey \\\n--out-file $NODE_HOME/governance/vote.file\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306evote.file\u3092BP\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|vote.file| B[BP];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3068BP\u3067<code>vote.file</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote.file\n</code></pre> BP <pre><code>sha256sum $NODE_HOME/governance/vote.file\n</code></pre>"},{"location":"operation/gov-spo-vote/#2","title":"2.\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"BP <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53d6\u5f97\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre></p> <p>\u672a\u4f7f\u7528UTXO\u3092\u53d6\u5f97\u3059\u308b <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre></p> <pre><code>cd $NODE_HOME\ncardano-cli conway transaction build \\\n$NODE_NETWORK \\\n${tx_in} \\\n--change-address $(cat $NODE_HOME/payment.addr) \\\n--vote-file $NODE_HOME/governance/vote.file \\\n--witness-override 2 \\\n--out-file $NODE_HOME/governance/vote-tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306evote-tx.raw\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|vote-tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>vote-tx.raw</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> BP <pre><code>sha256sum $NODE_HOME/governance/vote-tx.raw\n</code></pre> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote-tx.raw\n</code></pre>"},{"location":"operation/gov-spo-vote/#3","title":"3.\u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>cardano-cli conway transaction sign \\\n--tx-body-file $NODE_HOME/governance/vote-tx.raw \\\n--signing-key-file $HOME/cold-keys/node.skey \\\n--signing-key-file $NODE_HOME/payment.skey \\\n--out-file $NODE_HOME/governance/vote-tx.signed\n\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306evote-tx.signed\u3092BP\u306e~/cnode/governance/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|vote-tx.signed| B[BP];</code></pre></p> <p>\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3068BP\u3067<code>vote-tx.signed</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b \u5fc5\u305a\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <pre><code>sha256sum $NODE_HOME/governance/vote-tx.signed\n</code></pre> BP <pre><code>sha256sum $NODE_HOME/governance/vote-tx.signed\n</code></pre>"},{"location":"operation/gov-spo-vote/#4","title":"4.\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1","text":"BP <pre><code>cd $NODE_HOME\ncardano-cli conway transaction submit \\\n--tx-file $NODE_HOME/governance/vote-tx.signed \\\n$NODE_NETWORK\n</code></pre>"},{"location":"operation/grafana-alert/","title":"Grafana\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a","text":"<p>\u6982\u8981</p> <p>\u30b5\u30fc\u30d0\u30fc\u7570\u5e38\u72b6\u614b\u767a\u751f\u6642\u306b\u4efb\u610f\u306e\u30a2\u30d7\u30ea\u3078\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002 \u30b5\u30fc\u30d0\u30fc\u76e3\u8996\u306b\u306f\u5fc5\u9808\u8a2d\u5b9a\u3068\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"operation/grafana-alert/#1","title":"1.\u4e8b\u524d\u78ba\u8a8d","text":"<ul> <li>Grafana\u30d0\u30fc\u30b8\u30e7\u30f3v9.4.1\u4ee5\u4e0a</li> <li>Grafana SJG\u6700\u65b0\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u9069\u7528\u6e08\u307f</li> </ul>"},{"location":"operation/grafana-alert/#grafana_1","title":"Grafana\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<pre><code>grafana-cli -v\n</code></pre>"},{"location":"operation/grafana-alert/#grafana_2","title":"Grafana\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre>"},{"location":"operation/grafana-alert/#2","title":"2.\u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u306e\u4f5c\u6210","text":"<p>\u901a\u77e5\u306e\u57fa\u6e96\u3068\u306a\u308b\u30a2\u30e9\u30fc\u30c8\u30eb\u30fc\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  </p> <p>1.\u300c\u5de6\u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc\u300d\u2192\u300cAlerting\u300d\u306e\u53f3\u306e\u77e2\u5370\u2192\u300cAlert rules\u300d\u2192\u300cNew alert rule\u300d\u306e\u9806\u306b\u30af\u30ea\u30c3\u30af\u3059\u308b </p>"},{"location":"operation/grafana-alert/#2-1","title":"2-1.\u30ce\u30fc\u30c9\u30b9\u30ed\u30c3\u30c8\u76e3\u8996","text":"<ul> <li>\u2460:<code>Relay1-\u30b9\u30ed\u30c3\u30c8\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d</li> <li>\u2461:<code>Metrics Browser</code>\u3092\u30af\u30ea\u30c3\u30af</li> <li>\u2462:<code>cardano_node_metrics_slotInEpoch_int</code>\u3092\u9078\u629e</li> <li>\u2463:<code>alias</code>\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d</li> <li>\u2464:\u76e3\u8996\u3059\u308b\u30ce\u30fc\u30c9\u540d\u3092\u9078\u629e</li> <li> <p>\u2465:<code>Use query</code>\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p>\u2466:<code>B</code>\u306e\u30b4\u30df\u7bb1\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af</p> </li> <li>\u2467:<code>C</code>\u306e\u30b4\u30df\u7bb1\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af</li> <li> <p>\u2468:<code>Add expression</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>Classic_condition</code>\u3092\u9078\u629e </p> </li> <li> <p>\u2469:<code>last() / A / HAS NO VALUE</code>\u9078\u629e</p> </li> <li>\u246a:<code>Set as alert condition</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>Alert condition</code>\u306e\u8868\u793a\u306b\u5909\u3048\u308b</li> <li>\u246b:<code>New folder</code>\u3092\u9078\u629e\u3057\u3001<code>SJG</code>\u3092\u5165\u529b\u3057\u3066<code>Create</code></li> <li>\u246c:<code>New evaluation group</code>\u3092\u9078\u629e\u3057\u3001<code>Evaluation group name</code>\u306b<code>\u30ce\u30fc\u30c9\u76e3\u8996</code>\u3001<code>Evaluation interval</code>\u306b<code>10s</code>\u3092\u5165\u529b\u3057\u3066<code>Create</code></li> <li>\u246d:<code>20s</code>\u3092\u5165\u529b</li> <li>\u246e:<code>Alerting</code>\u3092\u9078\u629e</li> <li> <p>\u246f:<code>Alerting</code>\u3092\u9078\u629e </p> </li> <li> <p>\u2470:<code>Add custom annotaion</code>\u3092\u9078\u629e</p> </li> <li>\u2471:<code>\u691c\u77e5\u5185\u5bb9</code>\u3092\u5165\u529b</li> <li>\u2472:\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u691c\u77e5\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b \u4f8b\uff09<code>Relay1\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u53d6\u5f97\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30ce\u30fc\u30c9\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e </li> </ul> <p>\u6b8b\u308a\u306e\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30b9\u30ed\u30c3\u30c8\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>cardano_node_metrics_slotInEpoch_int{alias=\"block-producing-node\"}</code> <code>cardano_node_metrics_slotInEpoch_int{alias=\"relaynode2\"}</code></p> </li> <li> <p>\u300c4 Add annotations\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-2bp","title":"2-2.BP\u2192\u30ea\u30ec\u30fc\u63a5\u7d9a\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>BP\u30ea\u30ec\u30fc\u63a5\u7d9a\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>cardano_node_metrics_peers_connectedPeers_int{alias=\"block-producing-node\"}</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>1</code>\u3092\u5165\u529b</li> <li>\u246e:<code>Alerting</code>\u3092\u9078\u629e</li> <li>\u246f:<code>Alerting</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>BP\u304b\u3089\u30ea\u30ec\u30fc\u3078\u306e\u63a5\u7d9a\u304c\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u3002\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-3","title":"2-3.\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>cardano_node_metrics_density_real{alias=\"relaynode1\"} * 100</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>4.5</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u304c4.5\uff05\u3092\u4e0b\u56de\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u30ab\u30eb\u30c0\u30ce\u30c1\u30a7\u30fc\u30f3\u5168\u4f53\u306e\u554f\u984c\u3067\u3059</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-4","title":"2-4.\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>Relay1-\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>node_timex_maxerror_seconds{alias=\"relaynode1\"} * 1000</code>\u306b\u7f6e\u304d\u63db\u3048\u308b </li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS ABOVE</code>\u306b\u5207\u308a\u66ff\u3048<code>100</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>Relay1\u306e\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u304c100ms\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002chrony\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul> <p>\u6b8b\u308a\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30ce\u30fc\u30c9\u30bf\u30a4\u30e0\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>node_timex_maxerror_seconds{alias=\"block-producing-node\"} * 1000</code> <code>node_timex_maxerror_seconds{alias=\"relaynode2\"} * 1000</code> </p> </li> <li> <p>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-5kes","title":"2-5.KES\u6b8b\u308a\u65e5\u6570\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>BP-KES\u6b8b\u308a\u65e5\u6570\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>(cardano_node_metrics_remainingKESPeriods_int * 1.5)</code>\u306b\u7f6e\u304d\u63db\u3048\u308b</li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS BELOW</code>\u306b\u5207\u308a\u66ff\u3048<code>10</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>KES\u30ad\u30fc\u306e\u671f\u9650\u304c\u8feb\u3063\u3066\u3044\u307e\u3059\u3002\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u306e\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067KES\u30ad\u30fc\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#2-6","title":"2-6.\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996","text":"<p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460:<code>Relay1-\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996</code>\u306a\u3069\u4efb\u610f\u306e\u30eb\u30fc\u30eb\u540d\u306b\u66f8\u304d\u63db\u3048\u308b</li> <li>\u2461:<code>Metrics Browser</code>\u3092<code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"relaynode1\",mountpoint=\"/\"}</code>\u306b\u7f6e\u304d\u63db\u3048\u308b </li> <li>\u2469:<code>last()</code> / <code>A</code> / <code>IS ABOVE</code>\u306b\u5207\u308a\u66ff\u3048<code>0.9</code>\u3092\u5165\u529b</li> <li>\u246e:<code>OK</code>\u3092\u9078\u629e</li> <li>\u246f:<code>OK</code>\u3092\u9078\u629e</li> <li>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09<code>Relay1\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u304c90%\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002100%\u306b\u9054\u3059\u308b\u524d\u306b\u5951\u7d04\u30b5\u30fc\u30d0\u30fc\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306a\u3069\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059</code></li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul> <p>\u6b8b\u308a\u5168\u3066\u306e\u30ce\u30fc\u30c9\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u7387\u76e3\u8996\u3092\u8a2d\u5b9a\u3059\u308b  </p> <p>\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30eb\u30fc\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b </p> <ul> <li>\u2460\u3092\u66f8\u304d\u63db\u3048\u308b</li> <li> <p>\u2461:<code>Metrics Browser</code>\u3092\u66f8\u304d\u63db\u3048\u308b \u4f8b\uff09 <code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"block-producing-node\",mountpoint=\"/\"}</code> <code>1 - node_filesystem_avail_bytes / node_filesystem_size_bytes{alias=\"relaynode2\",mountpoint=\"/\"}</code> </p> </li> <li> <p>\u300c4 Add annotation\u300d\u306e\u691c\u77e5\u5185\u5bb9\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b</p> </li> <li>\u2473:\u30da\u30fc\u30b8\u4e0a\u90e8\u306e<code>Save rule and exit</code>\u3092\u9078\u629e</li> </ul>"},{"location":"operation/grafana-alert/#3","title":"3.\u901a\u77e5\u5148\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a","text":"<p>\u901a\u77e5\u5148\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a</p> <p>\u30a2\u30e9\u30fc\u30c8\u306e\u901a\u77e5\u5148\u306fLINE/Discord/Telegram/Slack\u3092\u8907\u6570\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u306e\u901a\u77e5\u30a2\u30d7\u30ea\u8a2d\u5b9a\u3067\u8a2d\u5b9a\u3057\u305f\u624b\u9806\u3068\u540c\u69d8\u306b\u3001\u901a\u77e5\u5148\u540d\u306a\u3069\u3092\u5909\u3048\u3066\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p>"},{"location":"operation/grafana-alert/#4","title":"4.\u901a\u77e5\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u8a2d\u5b9a","text":"<ul> <li> <p>\u300cContact points\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u300cAdd template\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p>\u4efb\u610f\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d<code>SJG</code>\u3092\u5165\u529b\u3057\u3001\u4ee5\u4e0b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30c7\u30fc\u30bf\u3092\u5165\u529b <pre><code>{{ define \"myalert\" }}\n{{ if gt (len .Annotations) 0 }}{{ range .Annotations.SortedPairs }}{{ .Name }}: {{ .Value }}{{ end }}\n{{ end }}{{ end }}\n\n\n{{ define \"mymessage\" }}\n{{ if gt (len .Alerts.Firing) 0 }} \u3010 \u274c\u969c\u5bb3\u767a\u751f\u274c \u3011{{len .Alerts.Firing}}\u4ef6 {{ range .Alerts.Firing }}\n{{ template \"myalert\" .}} {{ end }}{{ end }}\n{{ if gt (len .Alerts.Resolved) 0 }}\u2705\u4ee5\u4e0b\u306e\u969c\u5bb3\u306f\u5fa9\u65e7\u3057\u307e\u3057\u305f\u2705{{len .Alerts.Resolved}}\u4ef6{{ range .Alerts.Resolved }}\n{{ template \"myalert\" .}} {{ end }}{{ end }}\n{{ end }}\n</code></pre> </p> </li> <li> <p>\u300cSave tempelate\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> </ul>"},{"location":"operation/grafana-alert/#5","title":"5.\u901a\u77e5\u5148\u8a2d\u5b9a","text":"<ul> <li>\u300cAdd contact point\u300d\u3092\u30af\u30ea\u30c3\u30af </li> </ul> <p>\u901a\u77e5\u5148\u3092\u6307\u5b9a\u3059\u308b</p> <ul> <li>\u4efb\u610f\u306e\u901a\u77e5\u540d<code>Self-Alert</code>\u3092\u5165\u529b</li> <li>\u901a\u77e5\u5148\u3092\u9078\u629e\u3057\u60c5\u5831\u3092\u5165\u529b</li> <li>[3.\u901a\u77e5\u5148\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a]\u3067\u53d6\u5f97\u3057\u305f\u901a\u77e5\u30a2\u30d7\u30ea\u3054\u3068\u306e\u30c8\u30fc\u30af\u30f3ID\u3084WebhookURL\u3092\u5165\u529b\u3059\u308b</li> <li><code>Option *** Settings</code>\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Discription</code>\u306b\u4ee5\u4e0b\u306e\u30bf\u30b0\u3092\u5165\u529b <pre><code>{{ template \"mymessage\" . }}\n</code></pre></li> </ul> <p>\u901a\u77e5\u5148\u3054\u3068\u306e\u30bf\u30b0\u5165\u529b\u6b04\u8868\u8a18\u9055\u3044</p> <ul> <li>LINE\u2192Description</li> <li>Discord\u2192Message Content</li> <li>Slack\u2192Text Body</li> <li>Telegram\u2192Message</li> </ul> <p></p> <ul> <li>\u300cSave contact point\u300d\u3092\u30af\u30ea\u30c3\u30af</li> </ul> <p>\u8907\u6570\u306e\u901a\u77e5\u5148\u3092\u8a2d\u5b9a\u53ef\u80fd</p> <p>\u300cAdd contact point integration\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001\u8907\u6570\u306e\u901a\u77e5\u5148\u3092\u8a2d\u5b9a\u53ef\u80fd</p> <ul> <li> <p>\u300cNotification policies\u300d\u2192\u300cEdit\u300d\u3092\u30af\u30ea\u30c3\u30af </p> </li> <li> <p><code>Self-Alert</code>\u3092\u9078\u629e</p> </li> <li><code>Group by</code>\u306b<code>grafana_folder</code>\u3068<code>alertname</code>\u3092\u6307\u5b9a</li> <li><code>Group interval</code>\u2192 <code>1 Minutes</code>\u306b\u8a2d\u5b9a</li> <li><code>Repeat interval</code>\u2192 <code>10 Minutes</code>\u306b\u8a2d\u5b9a</li> <li>\u300cUpdate default policy\u300d\u3092\u30af\u30ea\u30c3\u30af </li> </ul>"},{"location":"operation/grafana-alert/#6url","title":"6.\u901a\u77e5\u5185\u5bb9URL\u30ab\u30b9\u30bf\u30de\u30a4\u30ba","text":"<p>\u6ce8\u610f</p> <ul> <li>\u4e8b\u524d\u306bGrafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\u4ee5\u4e0b\u306fGrafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p><code>xxxx.bbb.com</code>\u3092[Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a]\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b <code>https://</code>\u306f\u4e0d\u8981 <pre><code>domain=xxxx.bbb.com\n</code></pre></p> <p>\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3059\u308b <pre><code>sudo sed -i /etc/grafana/grafana.ini \\\n    -e 's!;domain = localhost!domain = '${domain}'!' \\\n    -e 's!;root_url = %(protocol)s://%(domain)s:%(http_port)s/!root_url = https://%(domain)s/!'\n</code></pre></p> <p>Grafana\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart grafana-server.service\n</code></pre></p>"},{"location":"operation/grafana-repo/","title":"Grafana\u30ea\u30dd\u30b8\u30c8\u30ea\u8a2d\u5b9a\u5909\u66f4\u624b\u9806","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306f\u65e7\u5f0f\u306eGrafana\u66f4\u65b0\u7528APT\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</li> <li> <p>Grafana\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc(Relay1)\u306e\u307f\u5bfe\u8c61\u3067\u3059\u3002</p> </li> <li> <p>\u8a2d\u5b9a\u6e08\u307f\u306eAPT\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u78ba\u8a8d\u3059\u308b <pre><code>cat /etc/apt/sources.list.d/grafana.list | grep \"https://packages.grafana.com/oss/deb\"\n</code></pre></p> <p><code>deb https://packages.grafana.com/oss/deb stable main</code>\u306e\u623b\u308a\u5024\u304c\u3042\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u4f5c\u696d\u5bfe\u8c61\u3067\u3059\u3002</p> </li> </ul>"},{"location":"operation/grafana-repo/#1gpg","title":"1.GPG\u30ad\u30fc\u306e\u78ba\u8a8d","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eGPG\u7f72\u540d\u30ad\u30fc\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>sudo apt-key list | grep -B 1 Grafana\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\u300cWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\u300d\u3068\u3044\u3046\u6587\u5b57\u304c\u51fa\u307e\u3059\u304c\u7121\u8996\u3067\u5927\u4e08\u592b\u3067\u3059\u3002</p> <p>\u623b\u308a\u5024  \u4f8b\uff09 <pre><code>       4E40 DDF6 D76E 284A 4A67  80E4 8C8C 34C5 2409 8CB6\n uid           [ unknown] Grafana &lt;info@grafana.com&gt;\n</code></pre></p>"},{"location":"operation/grafana-repo/#2gpg","title":"2.\u65e7GPG\u7f72\u540d\u30ad\u30fc\u524a\u9664","text":"<p>\u30ad\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u3066\u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002</p> <p>\u524a\u9664\u30b3\u30de\u30f3\u30c9 \u4f8b\uff09 <pre><code>sudo apt-key del \"4E40 DDF6 D76E 284A 4A67  80E4 8C8C 34C5 2409 8CB6\"\n</code></pre></p> <p>\u78ba\u8a8d</p> <ul> <li>\"\"\u5185\u306e\u30ad\u30fc\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>\u623b\u308a\u5024\u306b\u30ad\u30fc\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30ad\u30fc\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>Ubuntu22.04\u306e\u5834\u5408\u306f\u300cWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\u300d\u3068\u3044\u3046\u6587\u5b57\u304c\u51fa\u307e\u3059\u304c\u7121\u8996\u3067\u5927\u4e08\u592b\u3067\u3059\u3002</li> </ul>"},{"location":"operation/grafana-repo/#3","title":"3.\u65b0\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0","text":"<pre><code>echo \"deb [signed-by=/usr/share/keyrings/grafana.key] https://apt.grafana.com stable main\" | sudo tee -i /etc/apt/sources.list.d/grafana.list\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u884c</p> <p><pre><code>sudo apt update -y &amp;&amp; sudo apt install -y needrestart\n</code></pre> <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install -y apt-transport-https software-properties-common\n</code></pre></p> <p>\u65b0GPG\u30ad\u30fc\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo wget -q -O /usr/share/keyrings/grafana.key https://apt.grafana.com/gpg.key\n</code></pre></p> <p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>Grafana\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>grafana-server -v\n</code></pre></p> <p>Version 10.1.2 (commit: 8e428858dd, branch: HEAD) \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u5b9f\u65bd\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u52d5\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/grafana-security/","title":"Grafana\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u8a2d\u5b9a","text":"<p>\u6982\u8981</p> <p>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306fGrafana\u306e\u30ea\u30e2\u30fc\u30c8\u30a2\u30af\u30bb\u30b9\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3059\u308b\u305f\u3081HTTPS\u5316\u3068\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u5c0e\u5165\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002</p>"},{"location":"operation/grafana-security/#_1","title":"\u25a0\u4e8b\u524d\u78ba\u8a8d","text":"<p>\u4ee5\u4e0b\u306e\u624b\u9806\u306f\u30019.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067Grafana\u3092\u5c0e\u5165\u3057\u305f\u65e2\u5b58\u306e\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u5b9f\u65bd\u53ef\u80fd\u3067\u3059\u3002</p> <p>\uff5e\u4f5c\u696d\u306e\u6d41\u308c\uff5e</p> <ol> <li>\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97 \u3000 \u203b\u7121\u6599\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u624b\u9806\u3082\u63b2\u8f09</li> <li>WEB\u30b5\u30fc\u30d0\u30fcnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a</li> <li>certbot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</li> <li>\u7121\u6599SSL\u8a3c\u660e\u66f8(Let\u2019s Encrypt)\u3092\u53d6\u5f97</li> <li>nginx\u8a2d\u5b9a\u5909\u66f4</li> <li>SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0\u3092\u8a2d\u5b9a</li> </ol> <p>\u4f5c\u696d\u524d\u306e\u6ce8\u610f\u4e8b\u9805</p> <p>\u4ee5\u4e0b\u306e\u6587\u7ae0\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5fd8\u308c\u30fb\u30b3\u30de\u30f3\u30c9\u30b3\u30d4\u30fc\u30df\u30b9\u306a\u3069\u306b\u5341\u5206\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/grafana-security/#1","title":"1.\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b","text":"<p>\u78ba\u8a8d</p> <p>\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306a\u3069\u306e\u904b\u7528\u3067\u3059\u3067\u306b\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u6e08\u307f\u306e\u5834\u5408\u306f\u305d\u3061\u3089\u3092\u4f7f\u7528\u51fa\u6765\u307e\u3059\u3002\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\u306f\u7121\u6599\u30c0\u30a4\u30ca\u30df\u30c3\u30afDNS\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002</p> \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u306e\u65b9\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u65b9 <p>\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u304a\u6301\u3061\u306e\u65b9\u306f\u3001\u767b\u9332\u30ec\u30b8\u30b9\u30c8\u30e9\u306eDNS\u8a2d\u5b9a\u3067Grafana\u7528\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u53c2\u8003\uff09 \u30db\u30b9\u30c8\u540d\uff1a\u4efb\u610f\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d TYPE\uff1aA VALUE(\u5024):\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fcIP\u30a2\u30c9\u30ec\u30b9 </p> <p>DDNS Now\u3067\u7121\u6599\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 DDNS Now\u306f\u5b8c\u5168\u7121\u6599\u30fb\u5b9a\u671f\u901a\u77e5\u4e0d\u8981\u30fb\u30b5\u30fc\u30d3\u30b9\u4fdd\u969c\u7a3c\u50cd\u7387100%\u306a\u3069\u3001\u4f7f\u3044\u3084\u3059\u3044DDNS\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u305f\u3060\u3057\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306a\u3069\u306f\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093\u30021\u30a2\u30ab\u30a6\u30f3\u30c81\u30c9\u30e1\u30a4\u30f3</p> <p>\u30c9\u30e1\u30a4\u30f3(\u30a2\u30ab\u30a6\u30f3\u30c8)\u3092\u53d6\u5f97\u3059\u308b \u3053\u3053\u3067\u53d6\u5f97\u3057\u305f\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u304cGrafana\u306eURL\u306b\u306a\u308a\u307e\u3059\u3002</p> <p>\u4f8b\uff09grafana-abc.f5.si </p> <p>\u8a73\u7d30\u8a2d\u5b9a\u304b\u3089DNS\u306eA\u30ec\u30b3\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b \u300cA\u30ec\u30b3\u30fc\u30c9(IPv4\u30a2\u30c9\u30ec\u30b9)\u300d\u6b04\u306bGrafana\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u300c\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>\u767b\u9332\u60c5\u5831\u78ba\u8a8d </p>"},{"location":"operation/grafana-security/#2nginx","title":"2.nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b","text":"<p><pre><code>sudo apt install nginx -y\n</code></pre> \u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d <pre><code>sudo systemctl --no-pager status nginx\n</code></pre></p> <p>\u7dd1\u8272\u3067\u300cactive (running)\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> <p>HTTP/HTTPS\u7528\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b <pre><code>sudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n</code></pre></p> <p>\u958b\u653e\u4e2d\u306eGrafana\u75283000\u30dd\u30fc\u30c8\u3092\u524a\u9664\u3059\u308b numbered \u3067\u8868\u793a\u3055\u308c\u305f3000\u30dd\u30fc\u30c8\u306e\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw status numbered\nsudo ufw delete \u756a\u53f7\n</code></pre></p> <p>ufw\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b <pre><code>sudo ufw reload\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089 <code>http://\u30ea\u30ec\u30fcIP\u30a2\u30c9\u30ec\u30b9</code> \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066 Nginx Welcome\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\uff01 </p> <p><code>xxxx.bbb.com</code>\u3092[1.\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b]\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b</p> <pre><code>domain=xxxx.bbb.com\n</code></pre> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>sudo cat &gt; $HOME/$domain.conf &lt;&lt; EOF\nserver { \n    listen 80;\n    server_name $domain;\n\n    location / {\n    proxy_set_header Host \\$http_host;\n    proxy_pass http://localhost:3000;\n    } \n}\nEOF\n</code></pre></p> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092nginx\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3059\u308b <pre><code>sudo mv $HOME/$domain.conf /etc/nginx/sites-enabled/\n</code></pre></p> <p>nginx\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart nginx\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089<code>http://\u30c9\u30e1\u30a4\u30f3\u540d</code>\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001Grafana\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u306b\u6210\u529f\u3057\u307e\u3057\u305f\uff01</p> <p>\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b <pre><code>sudo rm /etc/nginx/sites-enabled/default\n</code></pre></p>"},{"location":"operation/grafana-security/#3certbot","title":"3.certbot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b","text":"<pre><code>sudo snap install core; sudo snap refresh core\n</code></pre> <p>\u300cDownload snap \"core\" (14784) from channel \"stable\"\u300d\u3068\u8868\u793a\u3055\u308c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6570\u5206\u304b\u304b\u308a\u307e\u3059\u3002  </p> \u623b\u308a\u5024\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u7570\u306a\u308b\u5834\u5408(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) \u30d1\u30bf\u30fc\u30f31\u30d1\u30bf\u30fc\u30f32 <pre><code>snap \"core\" is already installed, see 'snap help refresh'\nsnap \"core\" has no updates available\n</code></pre> <p>\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3059\u3002\u6b21\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <p><pre><code>sudo: snap: command not found \nsudo: snap: command not found\n</code></pre> \u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306fsnap\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002 \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo apt update -y\nsudo apt install snapd -y\n</code></pre> <p>snap\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo snap install core; sudo snap refresh core\n</code></pre> <p>\uff1c\u623b\u308a\u5024\uff1e <pre><code>\u300cDownload snap \"core\" (14784) from channel \"stable\"\u300d \n\n2023-02-24T10:18:49+01:00 INFO Waiting for automatic snapd restart...\ncore 16-2.58.2 from Canonical\u2713 installed\nsnap \"core\" has no updates available\n</code></pre></p> <p>\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u6b21\u306b\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002</p> <pre><code>sudo snap install --classic certbot\n</code></pre> <p>\u300cDownload snap \"core20\" (1822) from channel \"stable\u300d\u3068\u8868\u793a\u3055\u308c\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u6570\u5206\u304b\u304b\u308a\u307e\u3059</p> <p>certbot\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>sudo ln -s /snap/bin/certbot /usr/bin/certbot\n</code></pre></p>"},{"location":"operation/grafana-security/#4ssllets-encrypt","title":"4.\u7121\u6599SSL\u8a3c\u660e\u66f8(Let\u2019s Encrypt)\u3092\u53d6\u5f97\u3059\u308b","text":"<pre><code>sudo certbot --nginx\n</code></pre> <p>\u753b\u9762\u4e0a\u306e\u8cea\u554f\u306b\u56de\u7b54\u3057\u307e\u3059\u3002</p> <ol> <li> <p>\u4efb\u610f\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332 \u3053\u3053\u3067\u767b\u9332\u3057\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306bSSL\u8a3c\u660e\u66f8\u66f4\u65b0\u524d\u30fb\u671f\u9650\u5207\u308c\u60c5\u5831\u306e\u901a\u77e5\u304c\u5c4a\u304d\u307e\u3059\u3002 </p> </li> <li> <p>Let's Encrypt\u30b5\u30fc\u30d3\u30b9\u5229\u7528\u898f\u7d04\u3078\u306e\u540c\u610f\u78ba\u8a8d </p> </li> <li> <p>\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\u30e1\u30fc\u30eb\u767b\u9332\u78ba\u8a8d(\u4e0d\u8981\u306a\u3089N) </p> </li> <li> <p>SSL\u8a3c\u660e\u66f8\u767b\u9332\u30c9\u30e1\u30a4\u30f3\u306e\u78ba\u8a8d <code>1:</code>\u306b\u3054\u81ea\u8eab\u306e\u30c9\u30e1\u30a4\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001<code>1</code>\u3092\u5165\u529b </p> </li> <li> <p>SSL\u8a3c\u660e\u66f8\u53d6\u5f97\u78ba\u8a8d <code>This certificate expires on</code>\u306f\u53d6\u5f97\u3057\u305fSSL\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u306a\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff01 <code>Congratulations!</code>\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u7f72\u540d\u66f8\u53d6\u5f97\u6210\u529f\u3067\u3059\uff01</p> </li> </ol> <p>\u78ba\u8a8d</p> <p>\u30ed\u30fc\u30ab\u30eb\u30d6\u30e9\u30a6\u30b6\u304b\u3089<code>https://\u30c9\u30e1\u30a4\u30f3\u540d</code>\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001Grafana\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070HTTPS\u5316\u306b\u6210\u529f\u3057\u307e\u3057\u305f\uff01 \u30c9\u30e1\u30a4\u30f3\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305f\u969b\u306eURL\u6b04\u306b\u304a\u3044\u3066\u3001http\u306e\u5f8c\u306bs\u304c\u3064\u3044\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/grafana-security/#5nginx","title":"5.nginx\u8a2d\u5b9a\u5909\u66f4","text":"<p>1.websocket\u3092\u6709\u52b9\u306b\u3059\u308b <code>xxxx.bbb.com</code>\u3092[1.\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u3092\u53d6\u5f97\u3059\u308b]\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3(\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3)\u306b\u7f6e\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b <pre><code>domain=xxxx.bbb.com\n</code></pre></p> <p>\u4eee\u60f3\u30db\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo nano /etc/nginx/sites-enabled/$domain.conf\n</code></pre></p> <p><code>location /</code>\u30d6\u30ed\u30c3\u30af\u3092\u4ee5\u4e0b\u306e\u5185\u5bb9\u306b\u66f8\u304d\u63db\u3048\u308b <pre><code>    location / {\n    proxy_set_header Host $http_host;\n    proxy_pass http://localhost:3000;\n    }\n\n    location /api/live {\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection $connection_upgrade;\n    proxy_set_header Host $http_host;\n    proxy_pass http://localhost:3000;\n    }\n</code></pre></p> <p>\u7de8\u96c6\u5f8c\u53c2\u8003\uff09 </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p> <p>2.nginx \u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u306e\u5f37\u5316 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo nano /etc/nginx/nginx.conf\n</code></pre></p> <p><code>SSL Settings</code>\u306e <code>TLSv1</code>\u3068<code>TLSv1.1</code>\u3092\u524a\u9664\u3059\u308b \u7de8\u96c6\u5f8c\u53c2\u8003\uff09 </p> <p>\u7d9a\u3051\u3066\u3001\u4ee5\u4e0b\u306e\u6587\u3092\u5168\u3066\u30b3\u30d4\u30fc\u3057\u3066<code>include /etc/nginx/site-enabled/*;</code>\u306e\u5f8c\u306b\u8ffd\u8a18\u3059\u308b <pre><code>        ## Start: Size Limits &amp; Buffer Overflows ##\n        client_body_buffer_size  3K;\n        client_header_buffer_size 3k;\n        client_max_body_size 80k;\n        large_client_header_buffers 2 10k;\n        ## END: Size Limits &amp; Buffer Overflows ##\n\n        ### Directive describes the zone, in which the session states are stored i.e. store in slimits. ###\n        ### 1m can handle 32000 sessions with 32 bytes/session, set to 5m x 32000 session ###\n        limit_conn_zone $binary_remote_addr zone=addr:5m;\n\n        ### Control maximum number of simultaneous connections for one session i.e. ###\n        ### restricts the amount of connections from a single ip address ###\n        limit_conn addr 10;\n\n        map $http_upgrade $connection_upgrade {\n            default upgrade;\n            ''      close;\n        }\n</code></pre></p> <p>\u8d64\u67a0\u306e <code>}</code> \u306e\u4f4d\u7f6e\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u7de8\u96c6\u5f8c\u53c2\u8003\uff09   </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p> <p>nginx\u30a8\u30e9\u30fc\u30c1\u30a7\u30c3\u30af <pre><code>sudo nginx -t\n</code></pre></p> <p>\u623b\u308a\u5024</p> \u6b63\u5e38\u306a\u5834\u5408\u30a8\u30e9\u30fc\u304c\u3042\u308b\u5834\u5408(\u4f8b)  <pre><code>nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n</code></pre> <p><pre><code>nginx: [emerg] unexpected \"}\" in /etc/nginx/sites-enabled/******.conf:8\nnginx: configuration file /etc/nginx/nginx.conf test failed\n</code></pre> \u30a8\u30e9\u30fc\u7b87\u6240\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>nginx\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart nginx\n</code></pre></p>"},{"location":"operation/grafana-security/#6ssl","title":"6.SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0","text":"<p>1.SSL\u8a3c\u660e\u66f8\u81ea\u52d5\u66f4\u65b0\u30bf\u30a4\u30de\u30fc\u78ba\u8a8d \u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067SSL\u8a3c\u660e\u66f8\u304c\u81ea\u52d5\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002 <pre><code>systemctl status snap.certbot.renew.timer\n</code></pre></p> <p>\u7dd1\u8272\u3067\u300cactive(wating)\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> <p>2.nginx\u81ea\u52d5\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 \u81ea\u52d5\u66f4\u65b0\u3055\u308c\u305fSSL\u8a3c\u660e\u66f8\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u3001nginx\u518d\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>cat &gt; $HOME/nginx-reload.sh &lt;&lt; EOF\n#!/bin/bash \nsudo systemctl reload nginx\nEOF\n</code></pre> <pre><code>sudo mv $HOME/nginx-reload.sh /etc/letsencrypt/renewal-hooks/deploy/\n</code></pre> <pre><code>sudo chmod 755 /etc/letsencrypt/renewal-hooks/deploy/nginx-reload.sh\n</code></pre></p> <p>3.\u6307\u5b9a\u30e6\u30fc\u30b6\u30fc\u3068\u6307\u5b9a\u30b3\u30de\u30f3\u30c9\u3067sudo\u30d1\u30b9\u30ef\u30fc\u30c9\u8981\u6c42\u3092\u7121\u52b9\u306b\u3059\u308b \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u3067sudo\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u52d5\u5b9f\u884c\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u8981\u6c42\u3092\u30b9\u30eb\u30fc\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002  </p> <p>\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u78ba\u8a8d\u3059\u308b(\u63a7\u3048\u308b) <pre><code>whoami\n</code></pre> sudo\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f <pre><code>sudo visudo\n</code></pre> \u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u306e<code>xxxx</code>\u3092\u3001\u4e0a\u8a18\u3067\u8abf\u3079\u305f\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u8ffd\u8a18\u3059\u308b <pre><code>xxxx ALL=NOPASSWD: /bin/systemctl\n</code></pre></p> <p>\u3053\u306e\u307e\u307e\u8ffd\u8a18\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002xxxx\u3092\u30e6\u30fc\u30b6\u30fc\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</p> <p>\u7de8\u96c6\u5f8c\u53c2\u8003\uff09   </p> <p>\u8ffd\u8a18\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u9589\u3058\u308b</p>"},{"location":"operation/kes-update/","title":"KES\u306e\u66f4\u65b0","text":"<p>\u6982\u8981</p> <p>(KES=Key Evolving Signature)\u306e\u7565 \u30ad\u30fc\u3092\u60aa\u7528\u3059\u308b\u30cf\u30c3\u30ab\u30fc\u304b\u3089\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u300190\u65e5\u3054\u3068\u306b\u518d\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u308b\u524d\u306b\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u671f\u9650\u5185\u306a\u3089\u3044\u3064\u66f4\u65b0\u3057\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002  </p> <p>\u4ee5\u4e0b\u306e\u624b\u9806\u306f\u3001\u5168\u3066\u624b\u4f5c\u696d\u3067\u66f4\u65b0\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002</p> <p>KES\u66f4\u65b0\u306f\u3001\u534a\u81ea\u52d5\u66f4\u65b0\u304c\u53ef\u80fd\u306aSJG TOOL\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <ul> <li>KES\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u308b\u3068\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u304c\u51fa\u6765\u306a\u304f\u306a\u308a\u307e\u3059\u306e\u3067\u671f\u9650\u304c\u5207\u308c\u308b\u524d\u306b\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>1.35.x\u304b\u3089\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u66f4\u65b0\u306e\u30ec\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5909\u66f4\u306b\u306a\u308a\u307e\u3057\u305f\u3002   --\u5fc5\u305a\u81ea\u30d7\u30fc\u30eb\u306e\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7+1 \u3067\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002   --\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u306b\u307e\u3060\u81ea\u30d7\u30fc\u30eb\u304c\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u304c\u306a\u3044\u5834\u5408\u306f\u6bce\u56de0\u3067\u66f4\u65b0\u3057\u307e\u3059\u3002  </li> </ul> <p>\u25a0KES\u66f4\u65b0\u306e\u6d41\u308c 0.BP\uff1aKES\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u78ba\u8a8d\u3059\u308b 1.BP\uff1a\u65b0\u3057\u3044KES\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b 2.BP\uff1aKES\u30d5\u30a1\u30a4\u30eb(kes.skey/kes.vkey)\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b 3.BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b 4.BP:\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u7b97\u51fa\u3059\u308b\u3002 5.\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7: node.counter\u3092\u751f\u6210\u3059\u308b 6.BP\uff1a\u73fe\u5728\u306eKesPeriod\u3092\u7b97\u51fa\u3059\u308b 7.\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1anode.cert\u3092\u751f\u6210\u3059\u308b (1\u3067\u7b97\u51fa\u3057\u305fKesPeriod\u3092\u4f7f\u3046\u3053\u3068)  8.\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1anode.cert\u30d5\u30a1\u30a4\u30eb\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b 9.BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b 10.BP\uff1a\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b    </p>"},{"location":"operation/kes-update/#0kes","title":"0.KES\u66f4\u65b0\u30bf\u30a4\u30df\u30f3\u30b0\u30c1\u30a7\u30c3\u30af","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>slotNumInt=`curl -s http://localhost:12798/metrics | grep cardano_node_metrics_slotNum_int | awk '{ print $2 }'`\necho \"scale=6; ${slotNumInt} / 129600\" | bc | awk '{printf \"%.5f\\n\", $0}'\n</code></pre> <p>\u623b\u308a\u5024\u306e\u5c0f\u6570\u70b9\u4ee5\u4e0b\u304c<code>.99800</code>\u4ed8\u8fd1\u306e\u5834\u5408\u3001<code>startKesPeriod</code>\u306e\u5207\u308a\u66ff\u308f\u308a\u304c\u8fd1\u3044\u305f\u3081\u3001\u5207\u308a\u66ff\u308f\u3063\u3066\u304b\u3089\u4ee5\u4e0b\u306e\u4f5c\u696d\u3092\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/kes-update/#1kes","title":"1.KES\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cp $NODE_HOME/kes.vkey $NODE_HOME/kes-bk.vkey\ncp $NODE_HOME/kes.skey $NODE_HOME/kes-bk.skey\ncp $NODE_HOME/node.cert $NODE_HOME/node-bk.cert\n</code></pre> <p>KES\u30d5\u30a1\u30a4\u30eb\u65b0\u898f\u4f5c\u6210 <pre><code>cardano-cli conway node key-gen-KES \\\n    --verification-key-file $NODE_HOME/kes.vkey \\\n    --signing-key-file $NODE_HOME/kes.skey\n</code></pre></p>"},{"location":"operation/kes-update/#2kesag","title":"2.KES\u30d5\u30a1\u30a4\u30eb\u3092AG\u306b\u30b3\u30d4\u30fc","text":"<p>KES\u30d5\u30a1\u30a4\u30eb(kes.skey/kes.vkey)\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306b\u3042\u308b<code>kes.skey/kes.vkey</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|kes.skey / kes.vkey| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p>"},{"location":"operation/kes-update/#3","title":"3.\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d","text":"<p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>\u78ba\u8a8d</p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p>"},{"location":"operation/kes-update/#4","title":"4.\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u53d6\u5f97","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>kesperiodinfo=$(cardano-cli conway query kes-period-info $NODE_NETWORK --op-cert-file $NODE_HOME/node.cert --out-file kesperiod.json)\nlastBlockCnt=`cat kesperiod.json | jq -r '.qKesNodeStateOperationalCertificateNumber'`\n\nif expr \"$lastBlockCnt\" : \"[0-9]*$\" &gt;&amp;/dev/null; then\necho '----------------------------------------------'\necho \u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f: $lastBlockCnt \u3067\u3059\u3002\necho \u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f $(($lastBlockCnt+1)) \u3067\u3059\u3002\necho '---------------------------------------------'\nelse\necho '----------------------------'\necho \u307e\u3060\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3057\u3066\u3044\u307e\u305b\u3093\u3002\necho \u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u306f: \"0\" \u3067\u3059\u3002\necho '----------------------------'\nfi\nrm kesperiod.json\n</code></pre> <p>\u2191\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30b3\u30de\u30f3\u30c9\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 </p>"},{"location":"operation/kes-update/#5","title":"5.\u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305f\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\" cnt_No\n</code></pre> <p>\u2191\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30b3\u30de\u30f3\u30c9\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067 \u9805\u76ee5\u3067\u78ba\u8a8d\u3057\u305f\u3001\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u3092\u5165\u529b\u3057\u307e\u3059</p> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway node new-counter \\\n  --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n  --counter-value $cnt_No \\\n  --operational-certificate-issue-counter-file $HOME/cold-keys/node.counter\n</code></pre> <p>\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u304c\u6b63\u3057\u304f\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b <pre><code>cardano-cli conway text-view decode-cbor \\\n --in-file  $HOME/cold-keys/node.counter \\\n  | grep int | head -1 | cut -d\"(\" -f2 | cut -d\")\" -f1\n</code></pre></p> <p>\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u623b\u308a\u5024\u304c\u300c\u5165\u529b\u3057\u305f\u66f4\u65b0\u30ab\u30a6\u30f3\u30bf\u30fc\u756a\u53f7\u300d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p>"},{"location":"operation/kes-update/#6bpkesperiod","title":"6.BP\u3067\u73fe\u5728\u306eKesPeriod\u7b97\u51fa","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nslotNo=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\nslotsPerKESPeriod=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r '.slotsPerKESPeriod')\nkesPeriod=$((${slotNo} / ${slotsPerKESPeriod}))\nstartKesPeriod=${kesPeriod}\necho startKesPeriod: ${startKesPeriod}\n</code></pre>"},{"location":"operation/kes-update/#7nodecert","title":"7.node.cert\u751f\u6210","text":"<p>\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u65b0\u3057\u3044 <code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305fstartKesPeriod\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\" kes\n</code></pre> <p>\u2191\u3053\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u30b3\u30de\u30f3\u30c9\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067 \u305d\u3053\u30671\u3067\u7b97\u51fa\u3057\u305f<code>startKesPeriod</code>\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u307e\u3059</p> <pre><code>echo \"\u5165\u529b\u3057\u305f\u6570\u5b57\u306f$kes\u3067\u3059\"\n</code></pre> <p>\u5165\u529b\u3057\u305f\u6570\u5b57\u304c\u623b\u308a\u5024\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044</p> <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway node issue-op-cert \\\n    --kes-verification-key-file $NODE_HOME/kes.vkey \\\n    --cold-signing-key-file $HOME/cold-keys/node.skey \\\n    --operational-certificate-issue-counter $HOME/cold-keys/node.counter \\\n    --kes-period $kes \\\n    --out-file $NODE_HOME/node.cert\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u5909\u66f4\u3057\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5411\u4e0a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u8aa4\u524a\u9664\u3001\u8aa4\u3063\u305f\u7de8\u96c6\u306a\u3069\u304b\u3089\u4fdd\u8b77\u3067\u304d\u307e\u3059\u3002</p> <p>\u30ed\u30c3\u30af\u3059\u308b\u306b\u306f</p> <pre><code>chmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b\u306b\u306f</p> <p><pre><code>chmod u+rwx $HOME/cold-keys\n</code></pre></p>"},{"location":"operation/kes-update/#8nodecertbp","title":"8.node.cert\u3092BP\u3078\u30b3\u30d4\u30fc","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\uff1anode.cert\u30d5\u30a1\u30a4\u30eb\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u3042\u308b<code>node.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|node.cert| B[BP];</code></pre></p>"},{"location":"operation/kes-update/#9","title":"9.\u30cf\u30c3\u30b7\u30e5\u5024\u78ba\u8a8d","text":"<p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <p>\u30ce\u30fc\u30c9</p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p>"},{"location":"operation/kes-update/#10","title":"10.\u30ce\u30fc\u30c9\u518d\u8d77\u52d5","text":"<p>\u3053\u306e\u624b\u9806\u3092\u5b8c\u4e86\u3059\u308b\u306b\u306f\u3001\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u3066\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre> <p>gLiveview\u3067\u30ce\u30fc\u30c9\u540c\u671f\u3092\u78ba\u8a8d\u3059\u308b <pre><code>glive\n</code></pre></p> 10\u5206\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3082\u540c\u671f\u3057\u306a\u3044\u5834\u5408\u306f\u3053\u3061\u3089 <p>KES\u66f4\u65b0\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5fa9\u5143\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30ce\u30fc\u30c9\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre> \u30d5\u30a1\u30a4\u30eb\u5fa9\u5143 <pre><code>mv $NODE_HOME/kes-bk.vkey $NODE_HOME/kes.vkey\nmv $NODE_HOME/kes-bk.skey $NODE_HOME/kes.skey\nmv $NODE_HOME/node-bk.cert $NODE_HOME/node.cert\n</code></pre> \u30ce\u30fc\u30c9\u8d77\u52d5 <pre><code>sudo systemctl start cardano-node\n</code></pre> \u540c\u671f\u72b6\u6cc1\u78ba\u8a8d <pre><code>glive\n</code></pre></p>"},{"location":"operation/kes-update/#11","title":"11.\u30c1\u30a7\u30c3\u30af\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c","text":"<p>SPO JAPAN GUILD TOOL\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>gtool\n</code></pre> <p>[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af \u3092\u9078\u629e\u3059\u308b</p> <p>SPO JAPAN GUILD TOOL\u306e\u5c0e\u5165\u306f\u3053\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044</p>"},{"location":"operation/kes-update/#12","title":"12.\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u524a\u9664","text":"<p>\u4e0a\u8a18\u3067\u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u306e\u78ba\u8a8d\u304c\u3059\u3079\u3066OK\u3060\u3063\u305f\u5834\u5408\u3001KES\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>rm $NODE_HOME/kes-bk.vkey\nrm $NODE_HOME/kes-bk.skey\nrm $NODE_HOME/node-bk.cert\n</code></pre>"},{"location":"operation/mithril-client/","title":"DB\u540c\u671f\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7(Mithril\u30d9\u30fc\u30bf\u7248)","text":"<p>\u6982\u8981</p> <ul> <li>\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3067\u306fMithril-Client\u3092\u4f7f\u7528\u3057\u305fcardano-node DB\u540c\u671f\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</li> <li>\u30ce\u30fc\u30c9\u521d\u56de\u8d77\u52d5\u6642\u306eDB\u540c\u671f\u6642\u9593\u3092\u7d042\u65e5\u304b\u3089\u7d0430\u5206\u4ee5\u5185\u306b\u307e\u3067\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3002</li> <li>Mithril\u30d7\u30ed\u30c8\u30b3\u30eb\u306f\u307e\u3060\u30d9\u30fc\u30bf\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u305f\u3081\u3001\u3054\u81ea\u8eab\u306e\u8cac\u4efb\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u3053\u306e\u4f5c\u696d\u306f 2.\u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e2-1\uff5e2-7\u307e\u3067\u5b9f\u65bd\u3057\u3066\u304b\u3089\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u30b5\u30fc\u30d0\u30fc\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u3001DB\u518d\u69cb\u7bc9\u51e6\u7406\u304c\u5165\u308b\u5834\u5408\u304c\u3042\u308aDB\u540c\u671f\u307e\u3067\u306b\u6570\u6642\u9593\u304b\u304b\u308a\u307e\u3059\u3002</li> </ul>"},{"location":"operation/mithril-client/#1","title":"1.\u4f9d\u5b58\u74b0\u5883\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"operation/mithril-client/#1-1","title":"1-1. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30ce\u30fc\u30c9\u505c\u6b62 <pre><code>sudo systemctl stop cardano-node\n</code></pre> \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre> \u4f9d\u5b58\u74b0\u5883\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>sudo apt install -y libssl-dev build-essential m4 jq\n</code></pre></p>"},{"location":"operation/mithril-client/#1-2-rust","title":"1-2. Rust\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u78ba\u8a8d</p> <p>Rust\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u3053\u306e\u9805\u76ee\u306f\u5b9f\u65bd\u4e0d\u8981\u3067\u3059\u3002 <pre><code>rustc -V\n</code></pre></p> <p><code>Command 'rustc' not found, but can be installed with:</code>\u306e\u623b\u308a\u5024\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u4f5c\u696d\u3092\u5b9f\u65bd\u3057\u3066\u4e0b\u3055\u3044\u3002</p> <p>RUST\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059 <pre><code>mkdir $HOME/.cargo &amp;&amp; mkdir $HOME/.cargo/bin\nchown -R $USER $HOME/.cargo\ntouch $HOME/.profile\nchown $USER $HOME/.profile\n</code></pre></p> <p>rustup\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre></p> <p>1) Proceed with installation (default) 1\u3092\u5165\u529b\u3057\u3066Enter</p> <pre><code>source $HOME/.cargo/env\n</code></pre> <pre><code>rustup install stable\nrustup default stable\nrustup update\nrustup component add clippy rustfmt\nrustup target add x86_64-unknown-linux-musl\n</code></pre>"},{"location":"operation/mithril-client/#2mithril-client","title":"2.Mithril-Client\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>cd $HOME/git\ngit clone https://github.com/input-output-hk/mithril.git\n</code></pre> <pre><code>cd mithril\ngit fetch --all --prune\nmithril_release=\"$(curl -s https://api.github.com/repos/input-output-hk/mithril/releases/latest | jq -r '.tag_name')\"\ngit checkout tags/${mithril_release}\n</code></pre> <p>\u30d3\u30eb\u30c9 <pre><code>cd mithril-client-cli\nmake build\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>./mithril-client -V\n</code></pre></p> <p>Mithril Github\u306e\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u5185\u306b\u3042\u308b<code>mithril-client-cli</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc <pre><code>sudo mv mithril-client /usr/local/bin/mithril-client\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-client -V\n</code></pre></p>"},{"location":"operation/mithril-client/#3db","title":"3.DB\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7","text":"<p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3059\u308b <pre><code>tmux new -s mithril\n</code></pre></p>"},{"location":"operation/mithril-client/#3-1","title":"3-1.\u5909\u6570\u30bb\u30c3\u30c8","text":"<pre><code>export NETWORK=mainnet\nexport AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator\nexport GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/genesis.vkey)\nexport SNAPSHOT_DIGEST=latest\n</code></pre>"},{"location":"operation/mithril-client/#3-2dl","title":"3-2.\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL","text":"<p>\u65e2\u5b58DB\u30d5\u30a9\u30eb\u30c0\u524a\u9664 <pre><code>rm -rf $NODE_HOME/db\n</code></pre></p> <p>\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ca\u3073\u89e3\u51cd <pre><code>mithril-client cardano-db download --download-dir $NODE_HOME latest\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff5e\u89e3\u51cd\u307e\u3067\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u30021/5\uff5e5/5\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046</p> <p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p> \u305d\u306e\u4ed6\u306emithril-client\u30b3\u30de\u30f3\u30c9 <p>Cardano\u30ce\u30fc\u30c9\u3092\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3067\u304d\u308b\u5229\u7528\u53ef\u80fd\u306a\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4e00\u89a7\u8868\u793a <pre><code>mithril-client cardano-db snapshot list\n</code></pre></p> <p>\u623b\u308a\u5024 <pre><code>+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| Epoch | Immutable | Network | Digest                                                           | Size        | Locations | Created                           |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4822      | mainnet | dfc05780e0aaefc0e0466cbf69f3c82561e99f8b208626b9870a2e69344199dc | 40337208527 |         1 | 2023-09-27 05:21:39.339429454 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4821      | mainnet | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3 | 40328088621 |         1 | 2023-09-26 23:13:39.908538941 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4820      | mainnet | d993a6267fefa1c34c0f270337dc3fa5324bc399f908e4a38ec80bb3348e8fe1 | 40320340866 |         1 | 2023-09-26 17:31:56.927673920 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4819      | mainnet | f8dd9c7ee08c6dffebe851a19af44bcb82990d4c174dc366dfaa18e40c20b842 | 40316728370 |         1 | 2023-09-26 11:50:50.123658352 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4818      | mainnet | 70c5c6847116d0a4ca93f81ac193db9d2a17084065963ae298646a157825ab7e | 40314024073 |         1 | 2023-09-26 05:44:57.236767751 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4817      | mainnet | 0597ca3e7d699155ce73aaae53805ea32a981ff213f772dd70e9dbead626acf2 | 40299093577 |         1 | 2023-09-25 23:13:32.500760943 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n| 438   | 4816      | mainnet | 074a576bce34006369837899ecdaaac69f18e31dd193aaa5527d32a7c36fb10e | 40285275527 |         1 | 2023-09-25 17:33:02.562751472 UTC |\n+-------+-----------+---------+------------------------------------------------------------------+-------------+-----------+-----------------------------------+\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u8a73\u7d30\u8868\u793a <pre><code>mithril-client cardano-db snapshot show (Digest\u30cf\u30c3\u30b7\u30e5\u5024\u6307\u5b9a)\n</code></pre> \u623b\u308a\u5024 <pre><code>+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Info                  | Value                                                                                                                                                                         |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Epoch                 | 438                                                                                                                                                                           |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Immutable File Number | 4821                                                                                                                                                                          |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Network               | mainnet                                                                                                                                                                       |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Digest                | bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3                                                                                                              |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Size                  | 40328088621                                                                                                                                                                   |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Cardano node version  | 8.1.2                                                                                                                                                                         |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Location 1            | https://storage.googleapis.com/cdn.aggregator.release-mainnet.api.mithril.network/mainnet-e438-i4821.bbe08607a326c1d6e52c43897808b8ca4c02cc0fbb3d0248b341fd7bbc81f2e3.tar.zst |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Created               | 2023-09-26 23:13:39.908538941 UTC                                                                                                                                             |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Compression Algorithm | Zstandard                                                                                                                                                                     |\n+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n</code></pre></p>"},{"location":"operation/mithril-client/#4","title":"4.\u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre> <p>\u30ce\u30fc\u30c9\u540c\u671f\u78ba\u8a8d</p> <p>gliveview\u3092\u8d77\u52d5\u3057\u3001\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b <pre><code>glive\n</code></pre></p>"},{"location":"operation/node-update/","title":"\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u6982\u8981</p> <p>\u3053\u306e\u30ac\u30a4\u30c9\u306f \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f310.1.4\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2025\u5e741\u67088\u65e5</p> Node CLI GHC Cabal CNCLI 10.1.4 10.1.1.0 8.10.7 3.8.1.0 6.5.1 <ul> <li>\u3088\u304f\u304a\u8aad\u307f\u306b\u306a\u3063\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044</li> <li>\u8907\u6570\u884c\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u5834\u5408\u306f\u3001\u6700\u5f8c\u306e\u884c\u304c\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u306a\u3044\u305f\u3081\u78ba\u8a8d\u306e\u4e0aEnter\u3092\u62bc\u3057\u3066\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u4e3b\u306a\u5909\u66f4\u70b9\u3068\u65b0\u6a5f\u80fd</p> <p>\u25a0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30d1\u30bf\u30fc\u30f3DB\u518d\u69cb\u7bc9\u6709\u7121</p> \u30d0\u30fc\u30b8\u30e7\u30f3 DB\u518d\u69cb\u7bc9\u6709\u7121 \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6709\u7121 \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6709\u7121 8.12.2\u4ee5\u4e0b\u219210.1.4 \u3042\u308a \u66f4\u65b0\u3042\u308a \u66f4\u65b0\u3042\u308a 9.0.0~9.2.1\u219210.1.4 \u3042\u308a \u66f4\u65b0\u306a\u3057 \u66f4\u65b0\u306a\u3057 10.1.3\u219210.1.4 \u306a\u3057 \u66f4\u65b0\u306a\u3057 \u66f4\u65b0\u306a\u3057 <ul> <li>10.1.3\u304b\u308910.1.4\u3078\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306f1-1\u30012-1\u30012-2\u30012-4\u306e\u307f\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\u4f5c\u696d\u524d\u306b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u78ba\u8a8d\u3057\u4f59\u88d5\u306e\u3042\u308b\u4f5c\u696d\u3092\u304a\u9858\u3044\u3057\u307e\u3059</li> </ul>"},{"location":"operation/node-update/#1","title":"1.\u4f9d\u5b58\u74b0\u5883\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":""},{"location":"operation/node-update/#1-1","title":"1-1. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p>"},{"location":"operation/node-update/#1-2","title":"1-2. \u4f9d\u5b58\u95a2\u4fc2\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<p>cabal\u30d1\u30b9\u78ba\u8a8d <pre><code>which cabal\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>/home/user/.ghcup/bin/cabal</code></p> <p>cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cabal --version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>cabal-install version 3.8.1.0</code></p> <p>GHC\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>ghc --version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>The Glorious Glasgow Haskell Compilation System, version 8.10.7</code></p> <p>libsodium\u30b3\u30df\u30c3\u30c8\u78ba\u8a8d <pre><code>cd $HOME/git/libsodium\ngit branch --contains | grep -m1 HEAD | cut -c 21-28\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>dbb48cce</code></p> <p>secp256k1\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cd $HOME/git/secp256k1\ngit branch --contains | grep -m1 HEAD | cut -c 21-27\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>acf5c55</code></p> <p>Blst\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u30d0\u30fc\u30b8\u30e7\u30f3 <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>\u6b63\u5e38\u623b\u308a\u5024 <code>Version 0.3.11</code></p> \u5404\u30a2\u30d7\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3(\u623b\u308a\u5024)\u304c\u7570\u306a\u308b\u5834\u5408 \u623b\u308a\u5024\u304c[/home/user/.local/bin/cabal]\u306e\u5834\u5408 <p>\u623b\u308a\u5024\u304c[/home/user/.local/bin/cabal]\u306e\u5834\u5408\u306e\u307f\u4ee5\u4e0b\u3092\u5b9f\u884c </p> <p>\u30d1\u30b9\u3092\u8ffd\u52a0\u3059\u308b <pre><code>echo PATH=$PATH:$HOME/.ghcup/bin &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u65e7cabal\u30ea\u30cd\u30fc\u30e0 <pre><code>cd $HOME/.local/bin/\nmv cabal cabal_bk\n</code></pre></p> cabal 3.6.2.0\u4ee5\u4e0b\u306e\u5834\u5408 <p>cabal 3.6.2.0\u4ee5\u4e0b\u306e\u5834\u5408\u306e\u307f\u5b9f\u884c cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 <pre><code>ghcup upgrade\nghcup install cabal 3.8.1.0\nghcup set cabal 3.8.1.0\n</code></pre> cabal\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cabal --version\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u306a\u3089OK cabal-install version 3.8.1.0 compiled using version 3.8.1.0 of the Cabal library</p> GHC 8.10.4\u4ee5\u4e0b\u306e\u5834\u5408 <p>GHC 8.10.4\u4ee5\u4e0b\u306e\u5834\u5408\u306e\u307f\u5b9f\u884c <pre><code>ghcup upgrade\nghcup install ghc 8.10.7\nghcup set ghc 8.10.7\n</code></pre> <pre><code>ghc --version\n</code></pre></p> <p>GHC\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u300c8.10.7\u300d\u3067\u3042\u308c\u3070OK</p> libsodium\u30b3\u30df\u30c3\u30c8\u5024\u304c\u9055\u3046\u5834\u5408 <pre><code>cd ~/git/libsodium\ngit fetch --all --prune\ngit checkout dbb48cc\n./autogen.sh\n./configure\nmake\nmake check\nsudo make install\n</code></pre> <p><code>make</code>\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u534a\u306b\u51fa\u73fe\u3059\u308b <code>warning</code> \u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059\u3002</p> secp256k1\u30b3\u30df\u30c3\u30c8\u5024\u304c\u9055\u3046\u307e\u305f\u306f\u623b\u308a\u5024\u304c\u7121\u3044\u5834\u5408 <pre><code>cd $HOME/git/secp256k1/\ngit fetch --all --prune --recurse-submodules --tags\ngit checkout acf5c55\n./autogen.sh\n./configure --prefix=/usr --enable-module-schnorrsig --enable-experimental\nmake\nmake check\n</code></pre> \u623b\u308a\u5024\u78ba\u8a8d <pre><code>Testsuite summary for libsecp256k1 0.3.2\n============================================================================\n# TOTAL: 3\n# PASS:  3\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>PASS:3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p> Blst 0.3.10\u4ee5\u4e0b\u307e\u305f\u306f\u300cNo such file or directory\u300d\u306e\u5834\u5408 0.3.10\u4ee5\u4e0b\u306e\u5834\u5408\u300cNo such file or directory\u300d\u306e\u5834\u5408 <pre><code>cd $HOME/git/blst\ngit fetch --all --prune --recurse-submodules --tags\ngit checkout tags/v0.3.11\n./build.sh\n</code></pre> <pre><code>cd $HOME/git\ngit clone https://github.com/supranational/blst\ncd blst\ngit checkout v0.3.11\n./build.sh\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; libblst.pc &lt;&lt; EOF\nprefix=/usr/local\nexec_prefix=\\${prefix}\nlibdir=\\${exec_prefix}/lib\nincludedir=\\${prefix}/include\n\nName: libblst\nDescription: Multilingual BLS12-381 signature library\nURL: https://github.com/supranational/blst\nVersion: 0.3.11\nCflags: -I\\${includedir}\nLibs: -L\\${libdir} -lblst\nEOF\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc</p> <p>\u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f1\u884c\u305a\u3064\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044</p> <pre><code>sudo cp libblst.pc /usr/local/lib/pkgconfig/\nsudo cp bindings/blst_aux.h bindings/blst.h bindings/blst.hpp  /usr/local/include/\nsudo cp libblst.a /usr/local/lib\nsudo chmod u=rw,go=r /usr/local/{lib/{libblst.a,pkgconfig/libblst.pc},include/{blst.{h,hpp},blst_aux.h}}\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>Version 0.3.11</p>"},{"location":"operation/node-update/#1-3cnclibp","title":"1-3.CNCLI\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d(BP\u306e\u307f)","text":"<p>CNCLI\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u306a\u3089OK cncli 6.5.1</p> cncli v6.5.0\u4ee5\u4e0b\u3060\u3063\u305f\u5834\u5408(\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u304f) <p>CNCLI\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b</p> <p><pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-musl.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-musl.tar.gz\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>cncli v6.5.1\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b  </p>"},{"location":"operation/node-update/#2","title":"2.\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306e\u9055\u3044\u306b\u3064\u3044\u3066</p> <ul> <li> <p>\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u30fb\u30fb\u30fbIntersectMBO(\u65e7IOG)\u30ea\u30dd\u30b8\u30c8\u30ea\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u30d3\u30eb\u30c9\u4e0d\u8981\u306e\u305f\u3081\u30d3\u30eb\u30c9\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u307e\u3059\u3002</p> </li> <li> <p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u30fb\u30fb\u30fb\u3054\u81ea\u8eab\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u3066\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u691c\u8a3c\u76ee\u7684\u3084\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u3044\u5834\u5408\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u30d3\u30eb\u30c9\u306b30\u5206\u524d\u5f8c\u304b\u304b\u308a\u307e\u3059\u3002Raspberry Pi\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30fc\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u3001ARM\u7528\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> </li> </ul> <p>\u3069\u3061\u3089\u3082\u540c\u3058\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u5b89\u5b9a\u6027\u30fb\u5b89\u5168\u9762\u306b\u5dee\u7570\u306f\u3054\u3056\u3044\u307e\u305b\u3093\u3002\u304a\u597d\u307f\u306e\u65b9\u6cd5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u9802\u3051\u307e\u3059\u3002</p> \u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089 <p>2-1.\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> <p>\u73fe\u5728\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306e\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63a7\u3048\u308b <pre><code>current_node=$(cardano-node version | grep cardano-node)\necho $current_node\n</code></pre></p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f</p> <pre><code>tmux new -s build\n</code></pre> <p>\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4f5c\u696d\u4e2d\u306bSSH\u304c\u4e2d\u65ad\u3057\u305f\u5834\u5408\u306f\u3001<code>tmux a -t build</code>\u3067\u518d\u958b\u3067\u304d\u307e\u3059\u3002</p> <p>\u65e7\u30d3\u30eb\u30c9\u3092\u524a\u9664\u3059\u308b <pre><code>rm -rf $HOME/git/cardano-node-old/\n</code></pre></p> <p>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>cd $HOME/git\ngit clone https://github.com/IntersectMBO/cardano-node.git cardano-node2\ncd cardano-node2/\n</code></pre></p> <p>2-2.\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9</p> <pre><code>cabal clean\ncabal update\n</code></pre> <pre><code>git fetch --all --recurse-submodules --tags\ngit checkout tags/10.1.4\ncabal configure --with-compiler=ghc-8.10.7\n</code></pre> <pre><code>cabal build all cardano-cli\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <ul> <li>\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u3067\u306b\u6570\u5341\u5206\u307b\u3069\u304b\u304b\u308a\u307e\u3059\u3002</li> <li>SSH\u63a5\u7d9a\u304c\u9014\u4e2d\u3067\u5207\u65ad\u3055\u308c\u305f\u5834\u5408\u3001\u518d\u5ea6\u63a5\u7d9a\u3057\u3066<code>tmux a -t build</code>\u3067\u518d\u958b\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> <li>\u30d3\u30eb\u30c9\u4e2d\u306b\u30c7\u30bf\u30c3\u30c1(Ctrl+B D)\u3057\u3066\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u51e6\u7406\u3078\u5207\u308a\u66ff\u3048\u3089\u308c\u307e\u3059\u3002</li> </ul> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>$(./scripts/bin-path.sh cardano-cli) version  \n$(./scripts/bin-path.sh cardano-node) version  \n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.1.1.0 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> <p>cardano-node 10.1.4 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> <p>\u30d3\u30eb\u30c9\u7528TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>cd $HOME/git/cardano-node2\nsudo cp $(./scripts/bin-path.sh cardano-cli) /usr/local/bin/cardano-cli\n</code></pre> <pre><code>cd $HOME/git/cardano-node2\nsudo cp $(./scripts/bin-path.sh cardano-node) /usr/local/bin/cardano-node\n</code></pre> <p>\u30b7\u30b9\u30c6\u30e0\u306b\u53cd\u6620\u3055\u308c\u305f\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cardano-cli version\ncardano-node version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.1.1.0 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> <p>cardano-node 10.1.4 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f38.12.1\u4ee5\u4e0b\u304b\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd <p>\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7 <pre><code>mkdir -p $NODE_HOME/backup\ncp $NODE_HOME/${NODE_CONFIG}-config.json $NODE_HOME/backup/${NODE_CONFIG}-config.json\ncp $NODE_HOME/${NODE_CONFIG}-conway-genesis.json $NODE_HOME/backup/${NODE_CONFIG}-conway-genesis.json\ncp $NODE_HOME/${NODE_CONFIG}-topology.json $NODE_HOME/backup/${NODE_CONFIG}-topology.json\n</code></pre></p> <p>\u65b0\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9</p> <p>BP\u3068\u30ea\u30ec\u30fc\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u7570\u306a\u308b\u306e\u3067\u3001\u5bfe\u8c61\u30b5\u30fc\u30d0\u30fc\u3054\u3068\u306b\u30bf\u30d6\u3092\u5207\u308a\u66ff\u3048\u3066\u304f\u3060\u3055\u3044</p> \u30ea\u30ec\u30fc\u3067\u5b9f\u884cBP\u3067\u5b9f\u884c <pre><code>cd $NODE_HOME\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/conway-genesis.json -O ${NODE_CONFIG}-conway-genesis.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/config.json -O ${NODE_CONFIG}-config.json\n</code></pre> <pre><code>cd $NODE_HOME\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/conway-genesis.json -O ${NODE_CONFIG}-conway-genesis.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/config-bp.json -O ${NODE_CONFIG}-config.json\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u308b</p> <pre><code>sed -i ${NODE_CONFIG}-config.json \\\n    -e '2i \\  \"SnapshotInterval\": 86400,' \\\n    -e 's!\"AlonzoGenesisFile\": \"alonzo-genesis.json\"!\"AlonzoGenesisFile\": \"'${NODE_CONFIG}'-alonzo-genesis.json\"!' \\\n    -e 's!\"ByronGenesisFile\": \"byron-genesis.json\"!\"ByronGenesisFile\": \"'${NODE_CONFIG}'-byron-genesis.json\"!' \\\n    -e 's!\"ShelleyGenesisFile\": \"shelley-genesis.json\"!\"ShelleyGenesisFile\": \"'${NODE_CONFIG}'-shelley-genesis.json\"!' \\\n    -e 's!\"ConwayGenesisFile\": \"conway-genesis.json\"!\"ConwayGenesisFile\": \"'${NODE_CONFIG}'-conway-genesis.json\"!' \\\n    -e 's!\"TraceBlockFetchDecisions\": false!\"TraceBlockFetchDecisions\": true!' \\\n    -e 's!\"rpKeepFilesNum\": 10!\"rpKeepFilesNum\": 30!' \\\n    -e 's!\"rpMaxAgeHours\": 24!\"rpMaxAgeHours\": 48!' \\\n    -e '/\"defaultScribes\": \\[/a\\    \\[\\n      \"FileSK\",\\n      \"'${NODE_HOME}'/logs/node.json\"\\n    \\],' \\\n    -e '/\"setupScribes\": \\[/a\\    \\{\\n      \"scFormat\": \"ScJson\",\\n      \"scKind\": \"FileSK\",\\n      \"scName\": \"'${NODE_HOME}'/logs/node.json\"\\n    \\},' \\\n    -e \"s/127.0.0.1/0.0.0.0/g\"\n</code></pre> <p>\u6ce8\u610f</p> 8.1.2/8.7.3\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306e\u307f \u3053\u3053\u3092\u958b\u3044\u3066\u5b9f\u65bd <p>\u3053\u306e\u7dd1\u67a0\u5185\u306f\u30ea\u30ec\u30fc\u306e\u307f\u3067\u5b9f\u65bd</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30bfCron\u89e3\u9664</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u307f <pre><code>crontab -l &gt;crontab.txt\nsed -i '/topologyUpdater.sh/d' crontab.txt\ncrontab crontab.txt\n</code></pre> <p>relay-topology_pull.sh\u524a\u9664</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u307f <pre><code>rm $NODE_HOME/relay-topology_pull.sh\n</code></pre> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a</p> <p>\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u9805\u76ee\u89e3\u8aac</p> \u9805\u76ee \u8aac\u660e <code>bootstrapPeers</code> Genesis lite bootstrap\u7528\u30ce\u30fc\u30c9\u3092\u8a18\u5165\u3059\u308b <code>localRoots</code> \u5e38\u306bHot\u63a5\u7d9a\u3092\u56fa\u5b9a\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165 <code>accessPoints</code> \u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7 <code>advertise</code> PeerSharing\u4f1d\u64ad\u30d5\u30e9\u30b0 <code>trustable</code> \u4fe1\u983c\u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30e9\u30b0 <code>valency</code> \u63a5\u7d9a\u6570(\u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u8a18\u8f09\u3057\u305f\u6570\u3068\u4e00\u81f4\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059) <code>publicRoots</code> IOG\u30ea\u30ec\u30fc\u306a\u3069\u306e\u516c\u958b\u30ea\u30ec\u30fc\u63a5\u7d9a\u5148 <code>useLedgerAfterSlot</code> \u521d\u671f\u540c\u671f\u306e\u969b\u306b\u53f0\u5e33Peer\u691c\u7d22\u3092\u6709\u52b9\u306b\u3059\u308b\u30b9\u30ed\u30c3\u30c8\u756a\u53f7 <p>\u4ee5\u4e0b\u3001\u5404\u30ce\u30fc\u30c9\u3054\u3068\u306e\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u5404\u30bf\u30d6\u5185\u30b3\u30fc\u30c9\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u624b\u9806 <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092P2P-bootstrapPeers\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u66f8\u304d\u63db\u3048\u308b\u3002 \u3059\u3067\u306bP2P-bootstrapPeers\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u904b\u7528\u3057\u3066\u3044\u308b\u30ea\u30ec\u30fc\u3067\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3054\u3056\u3044\u307e\u305b\u3093\u3002 </p> <p>\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3092\u56fa\u5b9a\u3059\u308b\u30ce\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002(BP\u3084\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9) \u300cxxx.xxx.xxx.xxx\u300d\u306f\u63a5\u7d9a\u5148\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u3068\u63a5\u7d9a\u5148\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002  </p> \u30ea\u30ec\u30fc1\u30ea\u30ec\u30fc2 <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": [\n    {\n    \"address\": \"backbone.cardano.iog.io\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.emurgornd.com\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.cardanofoundation.org\",\n    \"port\": 3001\n    }\n],\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"BP\u306eIP\",#(1)!\n        \"port\": 00000 #(2)!\n        }\n    ],\n        \"advertise\": false,#(5)!\n        \"trustable\": true,\n        \"valency\": 1\n    },\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc2\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n        \"advertise\": true,\n        \"trustable\": true,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    {\n    \"accessPoints\": [],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc2\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc2\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>accessPoints\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": [\n    {\n    \"address\": \"backbone.cardano.iog.io\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.emurgornd.com\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.cardanofoundation.org\",\n    \"port\": 3001\n    }\n],\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"BP\u306eIP\",#(1)!\n        \"port\": 00000 #(2)!\n        }\n    ],\n        \"advertise\": false,#(5)!\n        \"trustable\": true,\n        \"valency\": 1\n    },\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc1\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n        \"advertise\": true,\n        \"trustable\": true,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    {\n    \"accessPoints\": [],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc1\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc1\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>accessPoints\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> BP\u30ce\u30fc\u30c9\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u624b\u9806 <p>\u3059\u3067\u306b\u3053\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u904b\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3054\u3056\u3044\u307e\u305b\u3093\u3002 </p> <p>BP\u3067\u306f<code>bootstrapPeers</code>\u3068<code>PeerSharing</code>\u3092\u7121\u52b9\u306b\u3057\u307e\u3059 <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": null,\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(1)!\n        \"port\": 6000 #(2)!\n        },\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff12\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n    \"advertise\": false,#(8)!\n    \"trustable\": true,\n    \"valency\": 2 #(5)!\n    }\n],\n\"publicRoots\": [],#(6)!\n\"useLedgerAfterSlot\": -1 #(7)!\n}\nEOF\n</code></pre></p> <ol> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u56fa\u5b9a\u63a5\u7d9a\u30d4\u30a2\u306e\u6570\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\"publicRoots\":\u3092\u7a7a\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> <li><code>-1</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u53f0\u5e33\u304b\u3089\u63a5\u7d9a\u5148\u3092\u53d6\u5f97\u3057\u306a\u3044BP\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059</li> <li>\u3053\u3053\u3067\u306f<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>mainnet-topology.json\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>cat $NODE_HOME/mainnet-topology.json | jq .\n</code></pre></p> \u6b63\u5e38parse error <p>mainnet-topology.json\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u8868\u793a\u3055\u308c\u307e\u3059</p> <p>json\u8a18\u6cd5\u306b\u8aa4\u308a\u304c\u3042\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002mainnet-topology.json\u3092\u958b\u3044\u3066<code>{}</code> <code>[]</code> <code>,</code>\u304c\u6b63\u3057\u3044\u4f4d\u7f6e\u306b\u3042\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 <pre><code>parse error: Expected another key-value pair at line x, column x\n</code></pre></p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3059\u308b <pre><code>cnreload\n</code></pre></p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u306b\u3088\u308b\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002</p>"},{"location":"operation/node-update/#2-1","title":"2-1.\u30d0\u30a4\u30ca\u30ea\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u73fe\u5728\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306e\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u63a7\u3048\u308b <pre><code>current_node=$(cardano-node version | grep cardano-node)\necho $current_node\n</code></pre></p> <p>\u65e7\u30d0\u30a4\u30ca\u30ea\u3092\u524a\u9664\u3059\u308b <pre><code>rm -rf $HOME/git/cardano-node-old/\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>mkdir $HOME/git/cardano-node2\ncd $HOME/git/cardano-node2\nwget https://github.com/IntersectMBO/cardano-node/releases/download/10.1.4/cardano-node-10.1.4-linux.tar.gz\n</code></pre></p> <p>\u89e3\u51cd\u3059\u308b <pre><code>tar zxvf cardano-node-10.1.4-linux.tar.gz ./bin/cardano-node ./bin/cardano-cli\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <p><pre><code>$(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") version  \n$(find $HOME/git/cardano-node2 -type f -name \"cardano-node\") version  \n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.1.1.0 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> <p>cardano-node 10.1.4 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08</p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p>"},{"location":"operation/node-update/#2-2","title":"2-2.\u30d0\u30a4\u30ca\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") /usr/local/bin/cardano-cli\n</code></pre> <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-node\") /usr/local/bin/cardano-node\n</code></pre>"},{"location":"operation/node-update/#2-3db","title":"2-3.DB\u66f4\u65b0","text":"<p>Mithirl\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME/git\nmithril_release=\"$(curl -s https://api.github.com/repos/input-output-hk/mithril/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/input-output-hk/mithril/releases/download/${mithril_release}/mithril-${mithril_release}-linux-x64.tar.gz -O mithril.tar.gz\n</code></pre></p> <p>\u8a2d\u5b9a <pre><code>tar zxvf mithril.tar.gz mithril-client\nsudo cp mithril-client /usr/local/bin/mithril-client\n</code></pre> \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a <pre><code>sudo chmod +x /usr/local/bin/mithril-client\n</code></pre></p> <p>DL\u30d5\u30a1\u30a4\u30eb\u524a\u9664 <pre><code>rm mithril.tar.gz mithril-client\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>mithril-client -V\n</code></pre></p> <p>Mithril Github\u306e\u30ea\u30ea\u30fc\u30b9\u30ce\u30fc\u30c8\u5185\u306b\u3042\u308b<code>mithril-client-cli</code>\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u5fa9\u5143</p> <p>\u4f5c\u696d\u7528TMUX\u8d77\u52d5 <pre><code>tmux new -s mithril\n</code></pre></p> <p>\u5909\u6570\u30bb\u30c3\u30c8 <pre><code>export NETWORK=mainnet\nexport AGGREGATOR_ENDPOINT=https://aggregator.release-mainnet.api.mithril.network/aggregator\nexport GENESIS_VERIFICATION_KEY=$(wget -q -O - https://raw.githubusercontent.com/input-output-hk/mithril/main/mithril-infra/configuration/release-mainnet/genesis.vkey)\nexport SNAPSHOT_DIGEST=latest\n</code></pre></p> \u65e7db\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u3044\u65b9\u306f\u3053\u3061\u3089 <p>\u7a7a\u304d\u5bb9\u91cf\u306b\u95a2\u3057\u3066\u306e\u6ce8\u610f\u4e8b\u9805</p> <p>DB\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u3001\u30b5\u30fc\u30d0\u30fc\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 \u5b89\u5b9a\u7a3c\u50cd\u306e\u305f\u3081\u306b\u306f250GB\u4ee5\u4e0a\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u5fc5\u8981\u3067\u3059\u3002 <pre><code>df -h /usr | awk '{print $4}'\n</code></pre> Avail\u304c250GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>db\u3092\u30ea\u30cd\u30fc\u30e0\u3059\u308b <pre><code>mv $NODE_HOME/db/ $NODE_HOME/backup/db9/\n</code></pre></p> \u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u4f5c\u696d <p>\u7a3c\u50cd\u306b\u554f\u984c\u304c\u306a\u3044\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u6b21\u7b2c\u524a\u9664\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002 <pre><code>rm -rf $NODE_HOME/backup/db9/\n</code></pre></p> <p>\u65e2\u5b58DB\u524a\u9664 <pre><code>rm -rf $NODE_HOME/db\n</code></pre></p> <p>\u6700\u65b0\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL <pre><code>mithril-client cardano-db download --download-dir $NODE_HOME latest\n</code></pre></p> <p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff5e\u89e3\u51cd\u307e\u3067\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u307e\u3059\u30021/5\uff5e5/5\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046  </p> <p>DB\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8DL/\u89e3\u7b54\u5b8c\u4e86\u30e1\u30c3\u30bb\u30fc\u30b8</p> <p>5/5 - Verifying the cardano db signature\u2026 Cardano db 'xxxxx' has been unpacked and successfully checked against Mithril  multi-signature contained in the certificate. ('xxxxx'\u306f\u4f5c\u696d\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059\u3002\u4e0b\u306e\u6587\u5b57\u5217\u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059)</p> <p>tmux\u4f5c\u696d\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u7d42\u4e86\u3059\u308b <pre><code>exit\n</code></pre></p>"},{"location":"operation/node-update/#2-4","title":"2-4.\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5","text":"<p>\u4f5c\u696d\u30d5\u30a9\u30eb\u30c0\u30ea\u30cd\u30fc\u30e0</p> <p>\u524d\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a9\u30eb\u30c0\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3068\u3057\u3066\u4fdd\u6301\u3057\u307e\u3059\u3002\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u69cb\u7bc9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u3092cardano-node\u3068\u3057\u3066\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>cd $HOME/git\nmv cardano-node/ cardano-node-old/\nmv cardano-node2/ cardano-node/\n</code></pre> <p>\u30b5\u30fc\u30d0\u30fc\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo reboot\n</code></pre></p> <p>SSH\u63a5\u7d9a\u3057\u3066\u30ce\u30fc\u30c9\u540c\u671f\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b <pre><code>sudo journalctl --unit=cardano-node --follow | grep -e 'Progress:' -e 'Chain extended, new tip:'\n</code></pre></p> <p>\u623b\u308a\u5024\u306b<code>Chain extended, new tip: xxxxxxxx at slot xxxxxx</code>\u306e\u8868\u793a\u304c\u3042\u308c\u3070\u540c\u671f\u5b8c\u4e86\u3002\u7121\u3051\u308c\u3070\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u3002</p>"},{"location":"operation/node-update/#3","title":"3. \u4f9d\u5b58\u95a2\u4fc2\u4f5c\u696d","text":""},{"location":"operation/node-update/#3-1bp","title":"3-1.\u30ea\u30ec\u30fc/BP\u5171\u901a","text":"<p>gLiveView\u66f4\u65b0 <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,40s!UPDATE_CHECK=\"N\"!UPDATE_CHECK=\"Y\"!'\n</code></pre></p> <p>glive\u3092\u8d77\u52d5\u3059\u308b <pre><code>glive\n</code></pre></p> <p>\u66f4\u65b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089<code>yes</code>\u3092\u5165\u529b\u3057\u3066<code>enter</code> </p> <p>env script update(s) detected, do you want to download the latest version? (yes/no): yes</p> <p>gLiveView.sh\u66f4\u65b0\u5b8c\u4e86\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u518d\u5ea6<code>enter</code> </p> <p>gLiveView.sh update successfully applied! press any key to proceed ..</p> <p>\u66f4\u65b0\u30d5\u30e9\u30b0\u3092\u5207\u308a\u66ff\u3048\u308b <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,40s!UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!'\n</code></pre></p> <p>glive\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>glive\n</code></pre></p> <p>Koios gLiveView v1.30.4</p> 8.1.2/8.7.3\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd\u5fc5\u9808 <p>\u30ea\u30ec\u30fc/BP\u5171\u901a</p> <p>\u74b0\u5883\u5909\u6570\u306b\u30ea\u30ed\u30fc\u30c9\u7528\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f5c\u6210(\u66f4\u65b0)\u3059\u308b</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>kill_alias=$(cat $HOME/.bashrc | grep cnreload)\nif [ -n \"$kill_alias\" ]; then\n    sed -i 's/alias cnreload=\"kill -SIGHUP $(pidof cardano-node)\"/alias cnreload=\"pkill -HUP cardano-node\"/g' $HOME/.bashrc\nelse\n    echo alias cnreload='\"pkill -HUP cardano-node\"' &gt;&gt; $HOME/.bashrc\nfi\nsource $HOME/.bashrc\n</code></pre> <p>Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30d1\u30cd\u30eb\u66f4\u65b0</p> <p>\u72ec\u81ea\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u308b\u65b9</p> <p>Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u72ec\u81ea\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u308b\u65b9\u306f\u4ee5\u4e0b\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u8ffd\u52a0\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> <ul> <li>cardano_node_metrics_connectionManager_incomingConns</li> <li>cardano_node_metrics_connectionManager_outgoingConns</li> <li>cardano_node_metrics_peerSelection_hot</li> <li>cardano_node_metrics_peerSelection_warm</li> <li>cardano_node_metrics_peerSelection_cold </li> </ul> <p>\u65e2\u5b58\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u524a\u9664\u3059\u308b</p> <ol> <li>Grafana\u3092\u958b\u304d\u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cDashboards\u300d\u304b\u3089\u300cSJG: Cardano-Node\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066Delete\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af</li> <li>\u78ba\u8a8d\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u306b<code>Delete</code>\u3092\u5165\u529b\u3057Delete\u3092\u30af\u30ea\u30c3\u30af</li> <li>Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8a2d\u5b9a\u306e11\uff5e15\u3092\u5b9f\u65bd\u3059\u308b</li> </ol>"},{"location":"operation/node-update/#3-2bp","title":"3-2.BP\u306e\u307f","text":"<p>\u30e9\u30a4\u30d6\u30e9\u30ea\u66f4\u65b0 <pre><code>cd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.library -O cntools.library\n</code></pre></p> <p>cncli.sh\u66f4\u65b0 <pre><code>cd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cncli.sh -O ./cncli.sh\n</code></pre></p> <pre><code>pool_hex=`cat $NODE_HOME/pool.id`\npool_bech32=`cat $NODE_HOME/pool.id-bech32`\nprintf \"\\n\u30d7\u30fc\u30ebID(hex)\u306f \\e[32m${pool_hex}\\e[m \u3067\u3059\\n\\n\"\nprintf \"\\n\u30d7\u30fc\u30ebID(bech32)\u306f \\e[32m${pool_bech32}\\e[m \u3067\u3059\\n\\n\"\n</code></pre> <pre><code>sed -i $NODE_HOME/scripts/cncli.sh \\\n-e '1,30s!#POOL_ID=\"\"!POOL_ID=\"'${pool_hex}'\"!' \\\n-e '1,30s!#POOL_ID_BECH32=\"\"!POOL_ID_BECH32=\"'${pool_bech32}'\"!' \\\n-e '1,30s!#POOL_VRF_SKEY=\"\"!POOL_VRF_SKEY=\"${CNODE_HOME}/vrf.skey\"!' \\\n-e '1,30s!#POOL_VRF_VKEY=\"\"!POOL_VRF_VKEY=\"${CNODE_HOME}/vrf.vkey\"!'\n</code></pre> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart cnode-cncli-sync.service\n</code></pre></p>"},{"location":"operation/node-update/#3-3bp","title":"3-3.BP\u30b5\u30fc\u30d3\u30b9\u78ba\u8a8d","text":"\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u307e\u305f\u306fSPO Block Notify\u3092\u672a\u5c0e\u5165(\u66f4\u65b0)\u3057\u3066\u3044\u306a\u3044\u65b9 \u672a\u5c0e\u5165\u306e\u65b9\u3067\u4eca\u5f8c\u3082\u5c0e\u5165\u4e88\u5b9a\u304c\u7121\u3044\u65b9\u65b0\u898f\u5c0e\u5165\u307e\u305f\u306f\u66f4\u65b0\u3059\u308b\u65b9 <p>10-4.\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30fb\u767b\u9332\u3092\u518d\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff08\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u306f\u4e0d\u8981\u3067\u3059\uff09</p> <p>SPO Block Notify\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u304b\u3089\u65b0\u898f\u5c0e\u5165\u307e\u305f\u306f\u66f4\u65b0\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>BP\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u306b\u540c\u671f\u3057\u305f\u5f8c\u3001\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b</p> <ul> <li>cnclilog  </li> <li>leaderlog  </li> <li>validate  </li> <li>logmonitor  </li> <li>blocknotify(SPO Block Notify\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408)</li> </ul> cnclilog\u3067<code>Missing eta_v for block xxxxxx</code> \u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306e\u5bfe\u51e6\u6cd5 <p>cncli\u3092\u518d\u540c\u671f\u3057\u3066\u304f\u3060\u3055\u3044</p> <p><pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre> <pre><code>rm $NODE_HOME/guild-db/cncli/*\n</code></pre> <pre><code>sudo systemctl restart cnode-cncli-sync.service\n</code></pre> <pre><code>cnclilog\n</code></pre> 100% sync'd\u306b\u306a\u308b\u307e\u3067\u304a\u5f85\u3061\u4e0b\u3055\u3044</p>"},{"location":"operation/node-update/#4","title":"4. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p>SFTP\u6a5f\u80fd\u30bd\u30d5\u30c8\u5c0e\u5165</p> <p>R-login\u306e\u8ee2\u9001\u6a5f\u80fd\u304c\u9045\u3044\u306e\u3067\u3001\u5927\u5bb9\u91cf\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30fb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u3001SFTP\u63a5\u7d9a\u53ef\u80fd\u306a\u30bd\u30d5\u30c8\u3092\u4f7f\u7528\u3059\u308b\u3068\u52b9\u7387\u7684\u3067\u3059\u3002\uff08FileZila\u306a\u3069\uff09 \u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u306b\u4fbf\u5229\u306aSFTP\u6a5f\u80fd\u30bd\u30d5\u30c8\u306e\u5c0e\u5165\u624b\u9806\u306f\u3053\u3061\u3089</p>"},{"location":"operation/node-update/#4-1","title":"4-1.\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc","text":"\u30d3\u30eb\u30c9\u6e08\u307f\u30d0\u30a4\u30ca\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u5834\u5408\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408 <p>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>sudo cp $(find $HOME/git/cardano-node -type f -name \"cardano-cli\") ~/cardano-cli\n</code></pre> <p>\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-cli) ~/cardano-cli\n</code></pre> <p>SFTP\u6a5f\u80fd\u30bd\u30d5\u30c8(Filezilla\u306a\u3069)\u3067\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3057\u3001\u4ee5\u4e0b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b </p> <ul> <li>/home/usr/cardano-cli</li> </ul> <p>\u3092\u30ed\u30fc\u30ab\u30eb\u30d1\u30bd\u30b3\u30f3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059 (\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7Ubuntu\u3068\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0)</p> <p></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u5165\u308c\u308b </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <ul> <li>$HOME/git/cardano-node2/ \u306b<code>cardano-cli</code>\u3092\u5165\u308c\u308b  (cardano-node2\u304c\u7121\u3051\u308c\u3070\u4f5c\u6210\u3059\u308b)</li> </ul>"},{"location":"operation/node-update/#4-2","title":"4-2.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 <p>cardano-cli\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>sudo cp $(find $HOME/git/cardano-node2 -type f -name \"cardano-cli\") /usr/local/bin/cardano-cli\n</code></pre> </p>"},{"location":"operation/node-update/#4-3","title":"4-3.\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<pre><code>cardano-cli version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.1.1.0 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08   </p> <p>\u78ba\u8a8d</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u306fcardano-node\u306f\u4f7f\u7528\u3057\u306a\u3044\u305f\u3081\u8ee2\u9001\u3057\u3066\u3082\u3057\u306a\u304f\u3066\u3082OK\u3067\u3059\u3002</p>"},{"location":"operation/p2p-settings/","title":"\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u8a2d\u5b9a\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u4e8b\u524d\u5b66\u7fd2\u306e\u30b9\u30b9\u30e1</p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P(\u4ee5\u4e0b\u3001P2P)\u306f\u30ce\u30fc\u30c9\u540c\u58eb\u306e\u63a5\u7d9a\u65b9\u5f0f\u304c\u5927\u304d\u304f\u5909\u66f4\u306b\u306a\u308a\u307e\u3059\u3002 \u5909\u66f4\u70b9\u3092\u307e\u3068\u3081\u305f\u8cc7\u6599\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u306e\u3067\u4e8b\u524d\u5b66\u7fd2\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\u8cc7\u6599\u306f\u3053\u3061\u3089</p> <ul> <li>P2P\u306f\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c1\u30a7\u30fc\u30f3\u5bc6\u5ea6\u306e\u7dad\u6301\u3068\u5b89\u5168\u6027\u3092\u62c5\u4fdd\u3059\u308b\u305f\u3081\u3001\u5c11\u3057\u305a\u3064\u5207\u308a\u66ff\u3048\u3066\u3044\u304f\u65b9\u91dd\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u30812023\u5e744\u67083\u65e5\u6642\u70b9\u3067\u306f\u8907\u6570\u30ea\u30ec\u30fc\u306e\u3046\u3061\u5358\u4e00\u306e\u30ea\u30ec\u30fc\u3067\u5b9f\u884c\u3057\u975eP2P\u30ea\u30ec\u30fc\u3068\u4e00\u7dd2\u306b\u7a3c\u50cd\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>BP\u3078\u306e\u9069\u7528\u306f\u975e\u63a8\u5968\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</li> </ul> <p>\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>P2P\u3078\u306e\u5207\u308a\u66ff\u3048\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u3066\u304b\u3089\u4f5c\u696d\u3057\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u624b\u9806\u306f\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u7528\u3067\u3059\u3002BP\u306b\u306f\u9069\u7528\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/p2p-settings/#1","title":"1.\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<pre><code>cardano-node version\n</code></pre> <p>\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3</p> <p>P2P\u306f1.35.7\u4ee5\u4e0a\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002 1.35.6\u4ee5\u4e0b\u306e\u5834\u5408\u306f\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u6dfb\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p>"},{"location":"operation/p2p-settings/#2","title":"2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5909\u66f4","text":"<p>mainnet-config.json\u306bP2P\u30d5\u30e9\u30b0\u3092\u8ffd\u8a18\u3059\u308b</p> \u30ce\u30fc\u30c98.1.2\u306e\u5834\u5408\u30ce\u30fc\u30c98.7.2\u306e\u5834\u5408 <pre><code>sed -i -e '2i \\  \"EnableP2P\": true,' $NODE_HOME/mainnet-config.json\n</code></pre> <pre><code>sed -i -e 's!\"EnableP2P\": false!\"EnableP2P\": true!' $NODE_HOME/mainnet-config.json\n</code></pre> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b <pre><code>mv $NODE_HOME/mainnet-topology.json $NODE_HOME/mainnet-topology-non2p2.json\n</code></pre></p>"},{"location":"operation/p2p-settings/#3","title":"3.\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <code>localRoots</code>\u306b\u306f\u5e38\u306bHot\u63a5\u7d9a\u306b\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165\u3057\u307e\u3059\u3002</p> \u5358\u4e00\u63a5\u7d9a\u306e\u5834\u5408\u8907\u6570\u63a5\u7d9a\u306e\u5834\u5408(IP\u6307\u5b9a)\u8907\u6570\u63a5\u7d9a\u306e\u5834\u5408(DNS\u6307\u5b9a) <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xxx.xxx.xxx.xx\", #(1)!\n        \"port\": yyyy #(2)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n  { \"accessPoints\": [\n    {\n      \"address\": \"backbone.cardano-mainnet.iohk.io\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.cardano.iog.io\",\n      \"port\": 3001\n    },\n    {\n      \"address\": \"backbone.mainnet.emurgornd.com\",\n      \"port\": 3001\n    }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 87200000\n}\nEOF\n</code></pre> <ol> <li>BP\u306eIP\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xx.xxx.xx.xxx\", #(1)!\n        \"port\": yyyy #(2)!\n        },\n        {\n        \"address\": \"bb.bbb.bb.bbb\", #(3)!\n        \"port\": aaaa #(4)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 2\n    }\n],\n\"publicRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"backbone.cardano-mainnet.iohk.io\",\n        \"port\": 3001\n        },\n        {\n        \"address\": \"backbone.cardano.iog.io\",\n        \"port\": 3001\n        },\n        {\n        \"address\": \"backbone.mainnet.emurgornd.com\",\n        \"port\": 3001\n        }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre> <ol> <li>BP1\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP1\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"localRoots\": [\n    { \"accessPoints\": [\n        {\n        \"address\": \"xxx1.xxx.com\", #(1)!\n        \"port\": yyyy #(2)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    },\n    { \"accessPoints\": [\n        {\n        \"address\": \"bbb2.ccc.com\", #(3)!\n        \"port\": aaaa #(4)!\n        }\n        ],\n        \"advertise\": false,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    { \"accessPoints\": [\n    {\n        \"address\": \"relays-new.cardano-mainnet.iohk.io\",\n        \"port\": 3001\n    }\n    ],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 110332824\n}\nEOF\n</code></pre> <ol> <li>BP1\u306eDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP1\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306eDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP2\u307e\u305f\u306f\u4ed6\u30ea\u30ec\u30fc\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u9805\u76ee\u89e3\u8aac</p> \u9805\u76ee \u8aac\u660e <code>localRoots</code> \u5e38\u306bHot\u306b\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165 <code>accessPoints</code> \u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7 <code>advertise</code> PeerSharing\u5b9f\u88c5\u5f8c\u306b\u4f7f\u7528\u3059\u308b\u30d5\u30e9\u30b0(\u4eca\u306f<code>false</code>) <code>valency</code> \u63a5\u7d9a\u6570(\u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u8a18\u8f09\u3057\u305f\u6570\u3068\u4e00\u81f4\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059) <code>publicRoots</code> \u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u7528\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a5\u7d9a\u5148 <code>seLedgerAfterSlot</code> \u521d\u671f\u540c\u671f\u306e\u969b\u306b\u53f0\u5e33Peer\u691c\u7d22\u3092\u6709\u52b9\u306b\u3059\u308b\u30b9\u30ed\u30c3\u30c8\u756a\u53f7 <p>mainnet-topology.json\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>cat $NODE_HOME/mainnet-topology.json | jq .\n</code></pre></p> \u6b63\u5e38\u30a8\u30e9\u30fc <p>mainnet-topology.json\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u8868\u793a\u3055\u308c\u307e\u3059</p> <p>\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002mainnet-topology.json\u3092\u958b\u3044\u3066\u9069\u5207\u306a\u8a18\u53f7<code>{}</code> <code>[]</code> <code>,</code> \u306e\u6709\u7121\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 <pre><code>parse error: Expected another key-value pair at line x, column x\n</code></pre></p>"},{"location":"operation/p2p-settings/#4","title":"4. \u30ce\u30fc\u30c9\u8d77\u52d5","text":"<pre><code>sudo systemctl start cardano-node\n</code></pre>"},{"location":"operation/p2p-settings/#5","title":"5.\u30c8\u30dd\u30ed\u30b8\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u4fee\u6b63","text":"<p>relay-topology_pull.sh\u5185\u5bb9\u5909\u66f4 mainnet-topology.json\u4e0a\u66f8\u304d\u9632\u6b62\u306e\u305f\u3081\u3001\u751f\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u307e\u3059\u3002 <pre><code>sed -i $NODE_HOME/relay-topology_pull.sh \\\n    -e \"s/mainnet-topology.json/mainnet-topology-nonp2p.json/g\"\n</code></pre></p> <p>P2P\u30e2\u30fc\u30c9\u306b\u3057\u305f\u30ea\u30ec\u30fc\u3067\u306f\u5b9a\u671f\u7684\u306b<code>relay-topology_pull.sh</code>\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</p> <p>\u751f\u5b58\u901a\u77e5\u306b\u3064\u3044\u3066</p> <p>Cron\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u751f\u5b58\u901a\u77e5\u306f\u3057\u3070\u3089\u304f\u7d99\u7d9a\u3057\u3066\u4e0b\u3055\u3044\u3002 \u5ec3\u6b62\u6642\u671f\u306f\u5225\u9014\u3054\u6848\u5185\u81f4\u3057\u307e\u3059\u3002</p>"},{"location":"operation/p2p-settings/#6","title":"6.\u30c8\u30dd\u30ed\u30b8\u30fc\u30ea\u30ed\u30fc\u30c9\u8a2d\u5b9a","text":"<p>\u30ea\u30ed\u30fc\u30c9\u7528\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0 <pre><code>echo alias cnreload='\"pkill -HUP cardano-node\"' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>P2P\u6709\u52b9\u6642\u306e\u65b0\u6a5f\u80fd</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u6642\u306e\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u304c\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\uff01\uff01 mainnet-topology.json\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u305f\u5f8c\u3001<code>cnreload</code>\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067 \u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u518d\u8aad\u307f\u8fbc\u307f\u304c\u53ef\u80fd\u3067\u3059\u3002</p>"},{"location":"operation/p2p-settings/#7-gliveview","title":"7. gLiveView\u306e\u898b\u65b9","text":"<p>P2P\u5c02\u7528\u9805\u76ee\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002 </p> <p><code>Cold</code> <code>Warm</code> <code>Hot</code>\u304c\u9069\u6b63\u5024\u306b\u843d\u3061\u7740\u304f\u307e\u3067\u306b\u6570\u6642\u9593\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> \u9805\u76ee \u8aac\u660e \u5099\u8003 <code>Incoming</code> \u4ed6\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a\u6570 Out\u3067\u53cc\u65b9\u5411\u306e\u5834\u5408In\u3082\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u308b <code>Outgoing</code> \u81ea\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a\u6570 Warm + Hot \u306e\u5408\u8a08\u5024 <code>Cold Peers</code> \u691c\u77e5\u6e08\u307f\u306e\u4e88\u5099Peer(\u672a\u63a5\u7d9a\u30d4\u30a2\u3000\u30d0\u30c3\u30af\u30a2\u30c3\u30d7) \u30c7\u30d5\u30a9\u30eb\u30c8 50 <code>Warm Peers</code> \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a5\u7d9aPeer\u6570(\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u672a\u4f7f\u7528) \u30c7\u30d5\u30a9\u30eb\u30c830 <code>Hot Peers</code> \u30a2\u30af\u30c6\u30a3\u30d6\u63a5\u7d9a\u306ePeer\u6570(\u30df\u30cb\u30d7\u30ed\u30c8\u30b3\u30eb\u4f7f\u7528) 20\u304c\u6700\u9069\u5024 <code>Uni-Dir</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u3044\u305a\u308c\u304b\u304c\u975eP2P (UniDirectional \u5358\u4e00\u65b9\u5411\u63a5\u7d9a ) <code>Bi-Dir</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u304c\u4e21\u7aef\u3067P2P (Bidirectional \u53cc\u65b9\u5411\u63a5\u7d9a) <code>Duplex</code> \u63a5\u7d9a\u5148/\u63a5\u7d9a\u5143\u304cP2P\u3067\u4e21\u7aef\u3067Hot\u3067\u63a5\u7d9a\u72b6\u614b \u76f8\u4e92\u30a2\u30af\u30c6\u30a3\u30d6\u63a5\u7d9a <p>Peer\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306b\u3064\u3044\u3066 </p> <p>Peer\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u306e\u5909\u66f4\u70b9</p> <p>P2P\u30e2\u30fc\u30c9\u306eOutgoing\u306f\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u306e\u7279\u6027\u4e0a\u5168\u3066<code>In</code>\u3067\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002</p> <p>\u30ce\u30fc\u30c9\u9593\u306e\u8ddd\u96e2\u306b\u3064\u3044\u3066</p> <p>P2P\u30e2\u30fc\u30c9\u3067\u6700\u9069\u306a\u63a5\u7d9a\u5148\u3068\u63a5\u7d9a\u3059\u308b\u3068\u306f\u8a00\u3048\u3001\u8ddd\u96e2\u306e\u591a\u69d8\u6027(\u8fd1\u30fb\u4e2d\u30fb\u9060\u8ddd\u96e2)\u306f\u7dad\u6301\u3055\u308c\u307e\u3059\u3002 \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u5909\u66f4\u3001\u63a5\u7d9a\u6027\u306e\u90e8\u5206\u7684\u306a\u55aa\u5931\u3001\u7269\u7406\u7684\u306a\u30a4\u30f3\u30d5\u30e9\u969c\u5bb3\u306b\u3088\u308a\u63a5\u7d9a\u304c\u5931\u308f\u308c\u305f\u5834\u5408\u3001\u30ce\u30fc\u30c9\u306e\u4e00\u90e8\u307e\u305f\u306f\u5168\u90e8\u304c\u4ed6\u306e\u3088\u308a\u9577\u3044\u8ddd\u96e2\u306e\u30a6\u30a9\u30fc\u30e0\u63a5\u7d9a\u3092\u7dad\u6301\u3057\u3066\u3044\u308c\u3070\u3001\u305d\u308c\u3089\u3092\u30db\u30c3\u30c8\u63a5\u7d9a\u306b\u8fc5\u901f\u306b\u6607\u683c\u3055\u305b\u3066\u56de\u5fa9\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/pool-retire/","title":"\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u5ec3\u6b62\u3059\u308b","text":"<p>\u30d7\u30fc\u30eb\u5ec3\u6b62\u306e\u6d41\u308c</p> <pre><code>graph LR\n    A[1-\u30ea\u30bf\u30a4\u30a2\u51e6\u7406] --&gt;|500ADA\u8fd4\u9084| B(2-\u767b\u9332\u6599\u8fd4\u9084\u78ba\u8a8d);\n    C[3-stake.addr\u304b\u3089\u5168\u984d\u5f15\u51fa\u51e6\u7406] --&gt;|\u5168\u984d| D(3-payment.addr\u7740\u91d1\u78ba\u8a8d);\n    E[4-stake.addr\u89e3\u9664\u51e6\u7406] --&gt;|2ADA\u8fd4\u9084| F(4-payment.addr\u78ba\u8a8d);\n    G[5-payment.addr\u5168\u984d\u5f15\u51fa\u51e6\u7406] --&gt;|\u5168\u984d| H(5-\u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u78ba\u8a8d);\n    click A \"./#1\"\n    click B \"./#_3\"\n    click C \"../withdrawal/#2-1-paymentaddr\"\n    click E \"./#2\"\n    click G \"./#3paymentaddr\"</code></pre>"},{"location":"operation/pool-retire/#1","title":"1.\u30ea\u30bf\u30a4\u30a2\u51e6\u7406","text":"<p>\u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>startTimeGenesis=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r .systemStart)\nstartTimeSec=$(date --date=${startTimeGenesis} +%s)\ncurrentTimeSec=$(date -u +%s)\nepochLength=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r .epochLength)\nepoch=$(( (${currentTimeSec}-${startTimeSec}) / ${epochLength} ))\necho current epoch: ${epoch}\n</code></pre> <p>\u30d7\u30fc\u30eb\u304c\u6700\u3082\u65e9\u304f\u5f15\u9000\u3067\u304d\u308b\u30a8\u30dd\u30c3\u30af\u3068\u6700\u3082\u9045\u3044\u5f15\u9000\u30a8\u30dd\u30c3\u30af\u3092\u898b\u3064\u3051\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>poolRetireMaxEpoch=$(cat $NODE_HOME/params.json | jq -r '.poolRetireMaxEpoch')\necho poolRetireMaxEpoch: ${poolRetireMaxEpoch}\n\nminRetirementEpoch=$(( ${epoch} + 1 ))\nmaxRetirementEpoch=$(( ${epoch} + ${poolRetireMaxEpoch} ))\n\necho \u30ea\u30bf\u30a4\u30a2\u53ef\u80fd\u6700\u77ed\u30a8\u30dd\u30c3\u30af: ${minRetirementEpoch}\necho \u30ea\u30bf\u30a4\u30a2\u53ef\u80fd\u6700\u9577\u30a8\u30dd\u30c3\u30af: ${maxRetirementEpoch}\n</code></pre> <p>\u30ea\u30bf\u30a4\u30a2\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066</p> <p>\u4f8b: \u30a8\u30dd\u30c3\u30af320\u3067eMax18\u306e\u5834\u5408,</p> <ul> <li>\u6700\u3082\u65e9\u3044\u30dd\u30c3\u30af\u306f 321 ( \u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af  + 1)</li> <li> <p>\u6700\u3082\u9045\u3044\u30a8\u30dd\u30c3\u30af\u306f 338 ( eMax + \u73fe\u5728\u306e\u30a8\u30dd\u30c3\u30af)</p> </li> <li> <p>\u30d7\u30fc\u30eb\u306f\u30ea\u30bf\u30a4\u30a2\u6307\u5b9a\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u6642\u306b\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u3055\u308c\u307e\u3059\u3002  </p> </li> <li>\u3082\u3057\u5fc3\u5909\u308f\u308a\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u30a8\u30dd\u30c3\u30af\u6307\u5b9a\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u524d\u306b\u65b0\u3057\u3044\u767b\u9332\u8a3c\u660e\u66f8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u30ea\u30bf\u30a4\u30a2\u624b\u7d9a\u304d\u3092\u7121\u52b9\u306b\u3067\u304d\u307e\u3059\u3002</li> <li>\u30d7\u30fc\u30eb\u767b\u9332\u6599500ADA\u306f\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u30a8\u30dd\u30c3\u30af\u958b\u59cb\u6642\u306bstake.addr\u306b\u5165\u91d1\u3055\u308c\u307e\u3059\u3002  </li> </ul> <p>\u767b\u9332\u89e3\u9664\u8a3c\u660e\u66f8 <code>pool.dereg</code>\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u5185\u306e <code>--epoch ***</code> \u306b\u30ea\u30bf\u30a4\u30a2\u3057\u305f\u3044\u30a8\u30dd\u30c3\u30af\u3092\u8a18\u5165\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nchmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool deregistration-certificate \\\n--cold-verification-key-file $HOME/cold-keys/node.vkey \\\n--epoch *** \\\n--out-file pool.dereg\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>pool.dereg</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.dereg| B[BP];</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53c2\u7167\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.dereg \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.dereg \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3092\u30ed\u30c3\u30af\u3059\u308b <pre><code>chmod a-rwx $HOME/cold-keys\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306etx.signed \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"operation/pool-retire/#_2","title":"\u30ea\u30bf\u30a4\u30a2\u78ba\u8a8d","text":"<ul> <li>KOIOS API\u3092\u4f7f\u7528\u3057\u3066\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002</li> </ul> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurl -s -X POST -H \"content-type: application/json\" -d @- \"https://api.koios.rest/api/v1/pool_info\" &lt;&lt; EOS | jq '.[0].pool_status,.[0].retiring_epoch'\n{\"_pool_bech32_ids\":[\"$(cat 'pool.id-bech32')\"]}\nEOS\n</code></pre> <pre><code>#\u623b\u308a\u5024\u30b5\u30f3\u30d7\u30eb\n\"retired\" # \"retiring\"\u3067\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u5f85\u3061 \"retired\"\u3067\u30ea\u30bf\u30a4\u30a2\u6e08\u307f \n309 #\u30ea\u30bf\u30a4\u30a2\u30a8\u30dd\u30c3\u30af\n</code></pre>"},{"location":"operation/pool-retire/#2","title":"2.\u767b\u9332\u6599\u8fd4\u9084\u78ba\u8a8d","text":"<p>\u6ce8\u610f</p> <p>\u4ee5\u964d\u306e\u51e6\u7406\u306f\u3001\u30d7\u30fc\u30eb\u306e\u30ea\u30bf\u30a4\u30a2\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u3066\u304b\u3089\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306estake.addr \u3092 BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake.addr| B[BP];</code></pre> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query stake-address-info \\\n--address $(cat stake.addr) \\\n$NODE_NETWORK\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>rewardAccountBalance: \u306e\u5024\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/pool-retire/#3stakeaddr","title":"3.stake.addr\u304b\u3089\u5f15\u304d\u51fa\u3057","text":"<p>stake.addr\u304b\u3089payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5 </p>"},{"location":"operation/pool-retire/#4","title":"4.\u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u89e3\u9664\u624b\u9806","text":"<p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u624b\u9806\u3067\u306fstake.addr\u306e\u767b\u9332\u3092\u89e3\u9664\u3057\u30012ADA\u306e\u8fd4\u9084\u624b\u7d9a\u304d\u3092\u884c\u3044\u307e\u3059\u3002</li> <li>\u30d7\u30fc\u30eb\u767b\u9332\u6599(500ADA)\u304c\u8fd4\u9084\u3055\u308c\u308b\u524d\u306b\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3057\u307e\u3046\u3068\u3001500ADA\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002  </li> <li>\u4ee5\u4e0b\u306e\u624b\u7d9a\u304d\u306f\u3001\u30d7\u30fc\u30eb\u767b\u9332\u6599\u306e500ADA\u3092\u53d7\u3051\u53d6\u3063\u3066\u304b\u3089\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u89e3\u9664\u8a3c\u660e\u66f8\u4f5c\u6210</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-address deregistration-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --out-file stake-dereg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306estake-dereg.cert \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake-dereg.cert| B[BP];</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30ad\u30fc\u767b\u9332\u6599\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>keyDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakeAddressDeposit')\necho keyDeposit: $keyDeposit\n</code></pre> <p>\u6700\u65b0\u30b9\u30ed\u30c3\u30c8\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u6b8b\u9ad8\u3092\u53c2\u7167</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>\u4eee\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} + ${keyDeposit} )) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate stake-dereg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((total_balance+keyDeposit-fee))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file stake-dereg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3059\u308b</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"operation/pool-retire/#5paymentaddr","title":"5.payment.addr\u304b\u3089\u5168\u984d\u5f15\u304d\u51fa\u3059\u624b\u9806","text":"<p>\u307e\u305a\u306f\u3001\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057 invalid-hereafter \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6b63\u3057\u304f\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u9001\u91d1\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u9001\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u53c2\u7167\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out ${destinationAddress}+${total_balance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 1 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u9001\u91d1\u91d1\u984d\u3092\u78ba\u8a8d\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>amountToSend=$((${txOut}))\necho amountToSend: $amountToSend\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306etx.raw \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306etx.signed \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>\u5168\u984d\u51fa\u91d1\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u6d88\u3048\u3066\u3044\u308c\u3070OK\u3067\u3059</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n</code></pre>"},{"location":"operation/relay-move/","title":"\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u306e\u5f15\u8d8a\u3057\u624b\u9806\uff08\u65e7VPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\uff09","text":"<p>\u524d\u63d0\u6ce8\u610f\u4e8b\u9805</p> <ul> <li>\u672c\u307e\u3068\u3081\u306f\u73feVPS\u4f1a\u793e\u2192\u65b0VPS\u4f1a\u793e\u3078\u3068 <code>\u30ea\u30ec\u30fc\u306e\u307f</code> \u3092\u79fb\u884c\u3059\u308b\u307e\u3068\u3081\u3067\u3059\u3002</li> <li>\u5b9f\u969b\u306b\u884c\u3046\u969b\u306b\u306f\u624b\u9806\u3092\u3088\u304f\u8aad\u307f\u306a\u304c\u3089\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u4e88\u5b9a\u307e\u3067\u4f59\u88d5\u304c\u3042\u308b\u6642\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u79fb\u884c\u5f8c\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3067\u904b\u7528\u3057\u307e\u3059</li> </ul>"},{"location":"operation/relay-move/#1","title":"1.\u65b0\u30ea\u30ec\u30fc\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u306f\u3058\u3081\u306b\u304a\u8aad\u307f\u304f\u3060\u3055\u3044</p> <ol> <li>\u30b5\u30fc\u30d0\u72ec\u81ea\u6a5f\u80fd\u306b\u7559\u610f\u3059\u308b<ul> <li>\u3055\u304f\u3089\u306e\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u3084\u3001AWS\u306eFW\u8a2d\u5b9a\u306a\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u72ec\u81ea\u306e\u6a5f\u80fd\u306b\u6c17\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> </li> <li>\u65b0\u30ea\u30ec\u30fc\u306e\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u958b\u653e\u8a2d\u5b9a(SSH\u3001\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u3001Grafana\u306a\u3069)\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"operation/relay-move/#1-1ubuntu","title":"1-1.Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>\u65b0\u30b5\u30fc\u30d0\u30fc\u3067Ubuntu\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002  </p>"},{"location":"operation/relay-move/#1-2","title":"1-2.\u30ce\u30fc\u30c9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<ol> <li>\u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u301c gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u3068BP\u3092\u63a5\u7d9a\u3059\u308b\u306e\u300c\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u5834\u5408\u300d\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002</li> </ol>"},{"location":"operation/relay-move/#2bp","title":"2.BP\u8a2d\u5b9a\u4fee\u6b63","text":""},{"location":"operation/relay-move/#2-1","title":"2-1.\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u5909\u66f4","text":"<p>AWS\u306a\u3069ufw\u3092\u4f7f\u7528\u3057\u306a\u3044\u5834\u5408</p> <p>VPS\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> BP <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <p>&lt;\u65b0\u30ea\u30ec\u30fcIP&gt; \u306e &lt;&gt;\u3092\u9664\u3044\u3066\u65b0\u30ea\u30ec\u30fcIP\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw allow from &lt;\u65b0\u30ea\u30ec\u30fcIP&gt; to any port ${b_PORT}\nsudo ufw reload\n</code></pre></p>"},{"location":"operation/relay-move/#2-2","title":"2-2.\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63","text":"BP <pre><code>nano $NODE_HOME/mainnet-topology.json\n</code></pre> <ul> <li>\u65e7\u30ea\u30ec\u30fcIP\u3068\u30dd\u30fc\u30c8\u3092\u65b0\u30ea\u30ec\u30fc\u306eIP\u3068\u30dd\u30fc\u30c8\u306b\u5909\u66f4\u3059\u308b  </li> <li>DNS\u904b\u7528\u306e\u5834\u5408\u306f\u5909\u66f4\u4e0d\u8981</li> </ul> <p>BP\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30c1\u30a7\u30fc\u30f3\u304c\u540c\u671f\u3057\u305f\u3089\u65b0\u30ea\u30ec\u30fc\u3068BP\u306e\u53cc\u65b9\u5411\u306e\u758e\u901a(I/O)\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> BP <p>gLiveView\u78ba\u8a8d <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre></p>"},{"location":"operation/relay-move/#3grafanaprometheus","title":"3.Grafana/Prometheus\u8a2d\u5b9a","text":"\u65b0\u30ea\u30ec\u30fc\u3067Grafana\u3082\u904b\u7528\u3059\u308b\u5834\u5408\u65b0\u30ea\u30ec\u30fc\u3067Grafana\u3092\u904b\u7528\u3057\u306a\u3044\u5834\u5408 <p>\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u30bf\u30d6\u30689-3.Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u8a2d\u5b9a\u3092\u5b9f\u884c\u3059\u308b\u3002</p> <p>Grafana\u8ffd\u52a0\u8a2d\u5b9a</p> <p>Grafana\u306f\u8ffd\u52a0\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a</li> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u8a2d\u5b9a</li> </ul> <ul> <li>\u65b0\u30ea\u30ec\u30fc\u306b\u3066<code>prometheus node exporter</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</li> </ul> \u65b0\u30ea\u30ec\u30fc <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre></p> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p><code>prometheus.yml</code>\u306e\u4fee\u6b63  </p> <ul> <li>DNS\u30d9\u30fc\u30b9\u3067\u63a5\u7d9a\u3057\u3066\u3044\u308b\u4eba\u306f\u3001DNS\u306e\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u305f\u3089\u81ea\u52d5\u7684\u306b\u5207\u308a\u66ff\u308f\u308b\u306e\u3067\u4ee5\u4e0b\u4f5c\u696d\u306f\u4e0d\u8981\u3067\u3059\u3002</li> </ul> Grafana\u30b5\u30fc\u30d0\u30fc(\u30ea\u30ec\u30fc1\u306a\u3069) <pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre> <ul> <li>\u65e7\u30ea\u30ec\u30fc\u306eIP\u3092\u65b0\u30ea\u30ec\u30fc\u306eIP\u3078\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5 <pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre></p> <p>Grafana\u306b\u65b0\u30ea\u30ec\u30fc\u306e\u30e1\u30c8\u30ea\u30af\u30b9(Slot\u306a\u3069)\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p>"},{"location":"operation/relay-move/#4","title":"4.\u30d7\u30fc\u30eb\u60c5\u5831\u66f4\u65b0","text":"<p>\u30d7\u30fc\u30eb\u60c5\u5831\u306e\u66f4\u65b0\u3092\u7528\u3044\u3066\u3001\u30c1\u30a7\u30fc\u30f3\u767b\u9332\u4e2d\u306e\u30ea\u30ec\u30fcIP\u3092\u5909\u66f4\u3059\u308b\u3002 (DNS\u904b\u7528\u306e\u5834\u5408\u306f\u4e0d\u8981\u3067\u3059)</p>"},{"location":"operation/relay-move/#5","title":"5.\u88dc\u8db3","text":""},{"location":"operation/relay-move/#tracemempool","title":"Tracemempool\u7121\u52b9\u5316","text":"\u65b0\u30ea\u30ec\u30fc <p>Tx\u306e\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089Tracemempool\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002 <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u518d\u8d77\u52d5 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u65e7\u30ea\u30ec\u30fc\u30b9\u30c8\u30c3\u30d7</p> \u65e7\u30ea\u30ec\u30fc <p><pre><code>sudo systemctl stop cardano-node\n</code></pre> \u30b5\u30fc\u30d3\u30b9\u89e3\u9664 <pre><code>sudo systemctl disable cardano-node\n</code></pre></p> <p>BP\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u304b\u3089\u65e7\u30ea\u30ec\u30fcIP\u524a\u9664</p> BP <p><pre><code>sudo ufw status numbered\n</code></pre> <pre><code>sudo ufw delete &lt;\u524a\u9664\u3057\u305f\u3044\u756a\u53f7&gt;\n</code></pre></p> <p>ufw\u3092\u4f7f\u308f\u306a\u3044\u30b1\u30fc\u30b9</p> <p>AWS\u3084VSP\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a(\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb)\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u5834\u5408\u306fVPS\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/relay-move/#rsync","title":"\u65e7\u30ea\u30ec\u30fcRSYNC\u8a2d\u5b9a\u6e08\u306e\u5834\u5408","text":"<ol> <li><code>rsyncd.conf</code> <code>rsync_ed25519.pub</code>\u3092\u65e7\u30ea\u30ec\u30fc\u306ecnode\u304b\u3089\u65b0\u30ea\u30ec\u30fc\u306ecnode\u3078\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u306e<code>~/.ssh/config</code>\u306e\u65e7\u30ea\u30ec\u30fcIP\u3092\u65b0\u30ea\u30ec\u30fcIP\u306b\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ol>"},{"location":"operation/relay-move/#mithril-signer","title":"Mithril-Signer\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u65e7\u30b5\u30fc\u30d0\u30fc\u3067Mithril-Signer-Relay\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\u65b0\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u518d\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e0d\u660e\u70b9\u304c\u3042\u308b\u5834\u5408\u306fBTBF SPO LAB.\u3067\u3054\u8cea\u554f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/rsync-ssh/","title":"\u30b5\u30fc\u30d0\u30fc\u9593\u540c\u671f\u8a2d\u5b9a(RSYNC+SSH)","text":"<p>\u6982\u8981</p> <p>\u30b5\u30fc\u30d0\u30fc\u9593\u3067\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u3092\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\u3067\u3059\u3002 \u65b0\u30ce\u30fc\u30c9\u66f4\u65b0\u6642\u306b\u767a\u751f\u3059\u308bDB\u518d\u69cb\u7bc9\u6642\u306e\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u3092\u6291\u3048\u305f\u308a\u3001\u30d3\u30eb\u30c9\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb(NODE/CLI)\u3092\u305d\u306e\u307e\u307e\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u3078\u8ee2\u9001\u3067\u304d\u307e\u3059\u3002</p> <p>1.\u8ee2\u9001\u5143\u306e\u30b5\u30fc\u30d0\u30fc\u30921\u53f0\u6c7a\u3081\u307e\u3059\u3002(\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3082\u3057\u304f\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9\u3092\u63a8\u5968) 2.\u8ee2\u9001\u5148\u306f\u8907\u6570\u53f0\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4e8b\u524d\u306b\u8a2d\u5b9a\u51fa\u6765\u307e\u3059\u3002 3.RSYNC+SSH\u5c02\u7528\u306e\u8a8d\u8a3c\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u63a5\u7d9a\u3057\u307e\u3059\u3002 4.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u6307\u5b9a\u3057\u305f\u8ee2\u9001\u5143IP\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306e\u307f\u53d7\u3051\u4ed8\u3051\u307e\u3059\u3002 </p> <p>\u69cb\u6210\u30a4\u30e1\u30fc\u30b8 <pre><code>flowchart LR\n    a[\u8ee2\u9001\u5143\u30ea\u30ec\u30fc1] --&gt;|RSYNC+SSH| b[\u30ea\u30ec\u30fc2] &amp; c[\u30ea\u30ec\u30fc3] &amp; d[BP]</code></pre></p>"},{"location":"operation/rsync-ssh/#1","title":"1.\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a","text":"<p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3082\u3057\u304f\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30ce\u30fc\u30c9</p>"},{"location":"operation/rsync-ssh/#1-1rsyncssh","title":"1-1.RSYNC\u5c02\u7528SSH\u8a8d\u8a3c\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a <p>ed25519\u6697\u53f7\u3067\u8a8d\u8a3c\u30ad\u30fc\u3092\u4f5c\u6210\u3059\u308b <pre><code>ssh-keygen -t ed25519 -N '' -C Data_Transfer -f ~/.ssh/rsync_ed25519\n</code></pre></p> <p>\u751f\u6210\u3055\u308c\u305f\u8a8d\u8a3c\u30ad\u30fc\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>ls ~/.ssh/\n</code></pre> <ul> <li><code>rsync_ed25519</code>\u30fb\u30fb\u30fb\u79d8\u5bc6\u9375</li> <li><code>rsync_ed25519.pub</code>\u30fb\u30fb\u30fb\u516c\u958b\u9375</li> </ul> <p>\u3053\u306e2\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002USB\u306a\u3069\u3078\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u63a8\u5968</p>"},{"location":"operation/rsync-ssh/#1-2ssh","title":"1-2.SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u30b3\u30de\u30f3\u30c9\u5185\u8a33</p> <p>\u5fc5\u305a\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b8c\u6210\u3055\u305b\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>Host [\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e\u4efb\u610f\u540d]\u3000\u203b\u63a5\u7d9a\u6642\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u540d\u306b\u306a\u308a\u307e\u3059 HostName [\u8ee2\u9001\u5148IP\u307e\u305f\u306f\u30c9\u30e1\u30a4\u30f3] User [\u8ee2\u9001\u5148\u306eUser\u540d] port [\u8ee2\u9001\u5148\u306eSSH\u30dd\u30fc\u30c8] IdentityFile [SSH\u79d8\u5bc6\u9375\u306e\u30d1\u30b9]  </p> <p>\u8ee2\u9001\u5148\u304c\u8907\u6570\u53f0\u3042\u308b\u5834\u5408\u306f\u4e0a\u8a18\u30921\u30bb\u30c3\u30c8\u3068\u3057\u3066\u8ffd\u52a0\u3059\u308b</p> <p>\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 <pre><code>cat &gt; ~/.ssh/config &lt;&lt; EOF\nHost BP\n    HostName xxx.xxx.xxx.xx\n    User xxxxx\n    Port xx\n    IdentityFile ~/.ssh/rsync_ed25519\n\nHost Relay2\n    HostName xxx.xx.xxx.xx\n    User xxxxx\n    Port xx\n    IdentityFile ~/.ssh/rsync_ed25519\nEOF\n</code></pre></p> <p>\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u5909\u66f4\u3059\u308b <pre><code>chmod 600 ~/.ssh/config\n</code></pre></p>"},{"location":"operation/rsync-ssh/#1-3ssh","title":"1-3.SSH\u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001","text":"<p>\u516c\u958b\u9375\u3092<code>cnode</code>\u3078\u79fb\u52d5\u3059\u308b <pre><code>mv ~/.ssh/rsync_ed25519.pub $NODE_HOME/\n</code></pre></p>"},{"location":"operation/rsync-ssh/#1-4zstandard","title":"1-4.ZStandard\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install zstd\n</code></pre>"},{"location":"operation/rsync-ssh/#2","title":"2.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a","text":"<p>\u8ee2\u9001\u5143\u306b\u3042\u308b<code>rsync_ed25519.pub</code>\u3092\u8ee2\u9001\u5148\u3078\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u3010\u91cd\u8981\u3011\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u306e<code>cnode</code>\u76f4\u4e0b\u306b\u3042\u308b\u516c\u958b\u9375\u30d5\u30a1\u30a4\u30eb<code>rsync_ed25519.pub</code>\u3092\u3001\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e<code>cnode</code>\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b</p> <pre><code>graph LR\n    A[\u8ee2\u9001\u5143] --&gt;|rsync_ed25519.pub| B[\u8ee2\u9001\u5148];</code></pre>"},{"location":"operation/rsync-ssh/#2-1ssh","title":"2-1.SSH\u516c\u958b\u9375\u306e\u8ffd\u8a18","text":"<p>\u30b3\u30de\u30f3\u30c9\u3068\u516c\u958b\u9375\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b <pre><code>echo 'command=\"rsync --server --daemon --config='$NODE_HOME'/rsyncd.conf .\",no-pty,no-port-forwarding,no-X11-forwarding,no-agent-forwarding '$(cat $NODE_HOME/rsync_ed25519.pub)'' &gt; $NODE_HOME/rsync.txt\n</code></pre></p> <p>\u516c\u958b\u9375\u30b3\u30de\u30f3\u30c9\u3092<code>authorized_keys</code>\u306b\u8ffd\u8a18\u3059\u308b <pre><code>cat $NODE_HOME/rsync.txt &gt;&gt; ~/.ssh/authorized_keys\n</code></pre></p>"},{"location":"operation/rsync-ssh/#2-2rsync","title":"2-2.RSYNC\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p><code>allowIP</code>\u5909\u6570\u306b\u8ee2\u9001\u5143IP\u3092\u4ee3\u5165\u3059\u308b\u3002x.x.x.x\u3092\u8ee2\u9001\u5143\u306eIP\u306b\u5909\u66f4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002 <pre><code>allowIP=x.x.x.x\n</code></pre></p> <p>\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3092\u4e00\u62ec\u30b3\u30d4\u30fc\u3057\u3066\u3001\u5b9f\u884c\u3059\u308b\u3002 <pre><code>cat &gt; $NODE_HOME/rsyncd.conf &lt;&lt; EOF\n# SSH\u3067\u4e00\u822c\u30e6\u30fc\u30b6\u306e\u5834\u5408\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067no\nuse chroot = no\n# \u66f8\u304d\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067read only\u306fno\nread only = no\n# \u9006\u306b\u8aad\u307f\u53d6\u308b\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067write only\u3092yes\u306b\nwrite only = yes\n# \u4e00\u65e6\u3059\u3079\u3066\u62d2\u5426\nhosts deny = *\n# \u5727\u7e2e\u6e08\u307f\u306e\u7269\u306f\u518d\u5727\u7e2e\u3057\u306a\u3044\ndont compress = *.pdf *.jpg *.jpeg *.gif *.png *.mp3 *.mp4 *.ogg *.avi *.7z *.z *.gz *.tgz *.zip *.lzh *.bz2 *.rar *.xz\n\n[Server]\n  #\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u30d1\u30b9\n  path = $NODE_HOME\n  # \u63a5\u7d9a\u5143\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\n  hosts allow = $allowIP\nEOF\n</code></pre></p>"},{"location":"operation/rsync-ssh/#3","title":"3.\u8ee2\u9001\u30c6\u30b9\u30c8","text":"<p>\u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u8ee2\u9001\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    --mainnet \\\n    --out-file params-test.json\n</code></pre></p> <p>\u8ee2\u9001\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b</p> <p>\u30b3\u30de\u30f3\u30c9\u5185\u8a33</p> <p>rsync -P --rsh=ssh [\u8ee2\u9001\u5143\u8ee2\u9001\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9] [\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u540d]::Server/[\u8ee2\u9001\u30d5\u30a1\u30a4\u30eb\u540d]</p> <ul> <li>[\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u540d]\u306b\u306f\u30011-2\u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <p>\u30b5\u30f3\u30d7\u30eb\u30b3\u30de\u30f3\u30c9 <pre><code>rsync -P --rsh=ssh $NODE_HOME/params-test.json Relay2::Server/params-test.json\n</code></pre></p> <ul> <li>\u521d\u56de\u63a5\u7d9a\u6642\u306e\u307f\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u306e\u78ba\u8a8d\u304c\u5165\u308b\u306e\u3067<code>yes</code>\u3092\u5165\u529b\u3059\u308b  </li> <li><code>Verification code:</code> \u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e2\u6bb5\u968e\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>\u8ee2\u9001\u5148\u3067\u53d7\u4fe1\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u3002</p> \u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <pre><code>ls $NODE_HOME/params-test.json\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306e\u623b\u308a\u5024\u304c\u3042\u308c\u3070\u8ee2\u9001\u6210\u529f\u3002</p>"},{"location":"operation/rsync-ssh/#4","title":"4.\u8ee2\u9001\u5148\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408","text":"<p>\u8ee2\u9001\u5148\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408</p> <ul> <li>1-2\u306eSSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u8ee2\u9001\u5148\u3092\u8ffd\u8a18\u3059\u308b</li> <li>\u65b0\u3057\u3044\u8ee2\u9001\u5148\u30672\u30683\u3092\u5b9f\u65bd\u3059\u308b</li> </ul>"},{"location":"operation/sftp/","title":"FileZilla\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>Info</p> <p>\u672c\u624b\u9806\u306f\u3001MacOS\u3067\u5b9f\u65bd\u3057\u3066\u307e\u3059\u3002Windows\u306e\u65b9\u306f\u8aad\u307f\u66ff\u3048\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/sftp/#1-filezilla","title":"1. FileZilla\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u6b21\u306e\u30ea\u30f3\u30af\u306e\u9077\u79fb\u5148\u304b\u3089FileZilla Client\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> OS \u30d5\u30a1\u30a4\u30eb\u540d MacOS FileZilla_X.XX.X_macosx-x86.app.tar.bz2 Windows FileZilla_X.XX.X_win64-setup.exe <ol> <li>\u300c<code>Quick download links</code>\u300d\u914d\u4e0b\u306e\u300c<code>Download Filezilla Client</code>\u300d\u3092\u30af\u30ea\u30c3\u30af </li> <li>\u300c<code>More download options</code>\u300d\u914d\u4e0b\u306e\u300c<code>Show additional download options</code>\u300d\u3092\u30af\u30ea\u30c3\u30af </li> <li>\u300c<code>Download FileZilla Client</code>\u300d\u304b\u3089\u5bfe\u8c61OS\u3092\u9078\u629e\u3057\u307e\u3059\u3002 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5f8c\u306b\u89e3\u51cd\u3057\u307e\u3059\u3002Mac\u306e\u65b9\u306fDownloads\u30d5\u30a9\u30eb\u30c0\u304b\u3089Application\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </li> <li>\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u4ee5\u4e0b\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u9032\u3081\u3066FileZilla\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002  </li> </ol>"},{"location":"operation/sftp/#2-sftp","title":"2. SFTP\u8a2d\u5b9a","text":"<p>\u30b5\u30a4\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3067\u306e\u5404\u7a2e\u8a2d\u5b9a</p> \u9805\u76ee \u8a2d\u5b9a\u5024 <code>\u30d7\u30ed\u30c8\u30b3\u30eb</code> SFTP <code>\u30db\u30b9\u30c8</code> \u30b5\u30fc\u30d0\u30fcIP <code>\u30dd\u30fc\u30c8</code> \u8a2d\u5b9a\u3057\u305fssh\u30dd\u30fc\u30c8\u756a\u53f7 <code>\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7</code> \u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6 <code>\u30e6\u30fc\u30b6\u30fc</code> \u30e6\u30fc\u30b6\u30fc\u540d <ol> <li>\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u304b\u3089\u300c<code>FileZilla</code>\u300d\u2192\u300c<code>\u8a2d\u5b9a</code>\u300d\u3078\u3068\u9032\u307f\u307e\u3059\u3002 </li> <li>\u79d8\u5bc6\u9375\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 </li> <li>\u63a5\u7d9a\u5148\u306e\u4f5c\u6210\u3068\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002  <p>Google2\u6bb5\u968e\u8a8d\u8a3c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3001\u3046\u307e\u304f\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7\u3092\u4e00\u5ea6<code>\u9375\u30d5\u30a1\u30a4\u30eb</code>\u306b\u3057\u3066\u79d8\u5bc6\u9375\u3092\u6307\u5b9a\u5f8c\u3001\u63a5\u7d9a\u3092\u8a66\u307f\u3001\u305d\u306e\u5f8c\u30ed\u30b0\u30aa\u30f3\u30bf\u30a4\u30d7\u3092<code>\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6</code>\u306b\u3057\u3066Google\u8a8d\u8a3c\u3067\u306e6\u6841\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> </ol>"},{"location":"operation/spo-poll/","title":"\u30ab\u30eb\u30c0\u30ce\u8ca1\u56e3SPO\u6295\u7968\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u6982\u8981</p> <ul> <li>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3 fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8</li> <li>\u6295\u7968\u671f\u9650\uff1a413\u30a8\u30dd\u30c3\u30af\u7d42\u4e86\u307e\u3067</li> <li>CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306e\u307f\u3067\u6295\u7968\u3067\u304d\u307e\u3059</li> <li>CIP-0094\u306b\u5bfe\u5fdc\u3057\u305fcardano-cli(v8.0.0-untested \u307e\u305f\u306f v8.0.0)\u304c\u5fc5\u8981\u3067\u3059</li> <li>\u6295\u7968\u306f\u521d\u56de\uff11\u56de\u306e\u307f\u304c\u6709\u52b9\u3067\u3059\u3002</li> </ul>"},{"location":"operation/spo-poll/#1sjg-tool","title":"1.SJG TOOL\u3067\u6295\u7968\u3059\u308b","text":"<p>SJG TOOL\u6295\u7968\u4ed5\u69d8</p> <ul> <li>\u6295\u7968\u30c7\u30fc\u30bf\u306b\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6dfb\u4ed8\u53ef\u80fd\uff01 ADASTAT\u306b\u5b9f\u88c5\u3055\u308c\u305f\u6295\u7968\u30c7\u30fc\u30bf\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3067\u304d\u307e\u3059\u3002</li> <li>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eCLI\u304cCIP-0094\u975e\u5bfe\u5fdc\u306e\u5834\u5408\u306f\u3001<code>cardano-cli v8.0.0-untested</code>\u3092\u5225\u9014\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3057\u3001\u901a\u5e38\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b<code>cardano-cli v8.0.0-untested</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> <li>\u6295\u7968\u5185\u5bb9\u306e\u81ea\u52d5\u7ffb\u8a33\u306fAPI\u81ea\u52d5\u7ffb\u8a33\u306e\u305f\u3081\u3001\u6b63\u3057\u3044\u65e5\u672c\u8a9e\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002 </li> </ul> <p>1-1. SJG TOOL\u3092\u8d77\u52d5\u3057\u3001v5.3\u3078\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>1-2. <code>[5] SPO\u6295\u7968\u30c4\u30fc\u30eb</code> \u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>1-3. \u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30cf\u30c3\u30b7\u30e5\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 </p> <pre><code>fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8\n</code></pre> <p>1-4. \u753b\u9762\u306e\u6307\u793a\u306b\u5f93\u3063\u3066\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002(\u4e2d\u65ad\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059)</p> <p>1-5. \u6295\u7968\u78ba\u8a8d CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u81ea\u8eab\u306e\u6295\u7968\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01     Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/spo-poll/#2cli","title":"2.CLI\u30b3\u30de\u30f3\u30c9\u3067\u6295\u7968\u3059\u308b","text":"<p>CLI\u30b3\u30de\u30f3\u30c9\u6295\u7968\u4ed5\u69d8</p> <ul> <li>\u6295\u7968\u30c7\u30fc\u30bf\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u6dfb\u4ed8\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u6dfb\u4ed8\u3057\u305f\u3044\u5834\u5408\u306f\u5404\u81ea\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u304bSJGTOOL\u3092\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul> <p>2-1.CLI\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af <pre><code>cardano-cli version\n</code></pre></p> <p>v8.0.0\u306fCIP-0094\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002</p> <p>CLI\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>cli_path=$(which cardano-cli)\n</code></pre></p> <p>\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b <pre><code>mkdir $HOME/git/spo-poll &amp;&amp; cd $HOME/git/spo-poll\n</code></pre></p> <p>CLI v1.35.7\u4ee5\u4e0b\u306e\u5834\u5408</p> <p>CIP-0094\u306b\u5bfe\u5fdc\u3057\u305fCLI\u304c\u5fc5\u8981\u306e\u305f\u3081\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057<code>v8.0.0-untested</code>\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u308c\u306f\u6295\u7968\u306e\u307f\u306b\u4f7f\u7528\u3057\u3001\u901a\u5e38\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002</p> <p>v8.0.0-untested\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget -q https://github.com/btbf/spojapanguild/raw/d7cd9792ab4cb532b74a8cd1bf30de3c1c03b8a6/scripts/spo-poll/cardano-cli.gz\ngzip -d cardano-cli.gz\nchmod 755 $HOME/git/spo-poll/cardano-cli\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>$HOME/git/spo-poll/cardano-cli version\n</code></pre></p> <p>cardano-cli 8.0.0 - linux-x86_64 - ghc-8.10 git rev 0000000000000000000000000000000000000000</p> <p>CLI\u30d1\u30b9\u3092\u4e0a\u66f8\u304d\u3059\u308b <pre><code>cli_path=$HOME/git/spo-poll/cardano-cli\n</code></pre></p> <ul> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b<code>cardano-cli v8.0.0-untested</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30cf\u30c3\u30b7\u30e5\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>txHash=\"fae7bda85acb99c513aeab5f86986047b6f6cbd33a8e11f11c5005513a054dc8\"\n</code></pre></p> <p>\u6295\u7968Cbor\u30c7\u30fc\u30bf(json)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget https://raw.githubusercontent.com/cardano-foundation/CIP-0094-polls/main/networks/${NODE_CONFIG}/${txHash}/poll.json -O $HOME/git/spo-poll/poll_${txHash}-CBOR.json\n</code></pre></p> <p>\u6295\u7968\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>${cli_path} governance answer-poll --poll-file $HOME/git/spo-poll/poll_${txHash}-CBOR.json &gt; $HOME/git/spo-poll/poll_${txHash}-poll-answer.json\n</code></pre> <p>\u6295\u7968\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1\u6e96\u5099</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u78ba\u8a8d <pre><code>cd $NODE_HOME\ncardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre></p> <p>UTXO\u8a08\u7b97 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre></p> <p>\u6295\u7968\u7528\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b <pre><code>cd $NODE_HOME\ncardano-cli conway transaction build \\\n    $NODE_NETWORK \\\n    ${tx_in} \\\n    --change-address $(cat payment.addr) \\\n    --metadata-json-file $HOME/git/spo-poll/poll_${txHash}-poll-answer.json \\\n    --json-metadata-detailed-schema \\\n    --required-signer-hash $(cat pool.id) \\\n    --out-file $NODE_HOME/poll-answer.tx\n</code></pre></p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>poll-answer.tx</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|poll-answer.tx| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nchmod u+rwx $HOME/cold-keys\ncardano-cli conway transaction sign \\\n    --tx-body-file poll-answer.tx \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file poll-answer-tx.signed\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>poll-answer-tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|poll-answer-tx.signed| B[BP];</code></pre></p> <p>BP\u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>submit_txHash=$(cardano-cli conway transaction txid --tx-file $NODE_HOME/poll-answer.tx)\ncardano-cli conway transaction submit --tx-file $NODE_HOME/poll-answer-tx.signed $NODE_NETWORK\n</code></pre> <p>\u6570\u5206\u5f8c\u306b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\u3059\u308b <pre><code>curl -sX POST \"https://api.koios.rest/api/v0/tx_metadata\" -H \"accept: application/json\" -H \"content-type: application/json\"  -d \"{\\\"_tx_hashes\\\":[\\\"${submit_txHash}\\\"]}\" | jq .\n</code></pre></p>"},{"location":"operation/spo-poll/#_1","title":"\u6295\u7968\u78ba\u8a8d","text":"<p>CIP-0094\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u81ea\u8eab\u306e\u6295\u7968\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01 Adastat.net [Mainnet] / Cardanoscan.io [Mainnet]</p> <p>\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"operation/start-guide/","title":"\u30ab\u30eb\u30c0\u30ce\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u904b\u7528\u30ac\u30a4\u30c9","text":"<p>\u30b5\u30dd\u30fc\u30c8</p> <p>\u30b5\u30dd\u30fc\u30c8\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001SPO JAPAN GUILD\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u73fe\u5f79\u306eSPO\u306b\u8cea\u554f\u3067\u304d\u307e\u3059</p>"},{"location":"operation/start-guide/#_2","title":"\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u7406\u89e3\u3059\u308b","text":"\u9805\u76ee \u5024 \u7528\u9014 optimal_pool_count(K) 500 \u98fd\u548c\u95be\u5024\u8a2d\u5b9a\u7528 a0 0.3 \u8a93\u7d04\u5831\u916c\u4fc2\u6570\u3000 max_tx_size 16384 \u6700\u5927\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b5\u30a4\u30ba\u3000 max_block_size 90112 \u6700\u5927\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3000 epochLength 432000 1\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30ed\u30c3\u30c8\u6570\u3000 slotsPerKESPeriod 129600 1KES\u5f53\u305f\u308a\u306e\u30b9\u30ed\u30c3\u30c8\u6570\u3000 maxKESEvolutions 62 KES\u6709\u52b9\u671f\u9593\u3000 activeSlotsCoeff 0.05 1\u30a8\u30dd\u30c3\u30af\u5185\u306e\u6709\u52b9\u30b9\u30ed\u30c3\u30c8\u7387"},{"location":"operation/start-guide/#_3","title":"\u30b9\u30ed\u30c3\u30c8\u3092\u7406\u89e3\u3059\u308b","text":"<ul> <li>Slot = \u30b8\u30a7\u30cd\u30b7\u30b9\u30b9\u30ed\u30c3\u30c8\u304b\u3089\u306e\u30b9\u30ed\u30c3\u30c8  </li> <li> <p>Slot epoch = \u30a8\u30dd\u30c3\u30af\u5185\u306e\u30b9\u30ed\u30c3\u30c8  </p> </li> <li> <p>1\u30b9\u30ed\u30c3\u30c8\uff1d1\u79d2  </p> </li> <li>1\u30a8\u30dd\u30c3\u30af\uff1d432000\u30b9\u30ed\u30c3\u30c8(epochLength)   (432000 / 60 = 7200\u5206 / 60 = 120\u6642\u9593 / 24 = 5\u65e5)  </li> </ul>"},{"location":"operation/start-guide/#_4","title":"\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc","text":"<p>1\u30a8\u30dd\u30c3\u30af\u5185\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6709\u52b9\u30b9\u30ed\u30c3\u30c8\u306f5%(432000\u30b9\u30ed\u30c3\u30c8 \u00d7 5% \uff1d \u7d0421600\u30b9\u30ed\u30c3\u30c8) \u59d4\u4efb\u91cf\u306b\u5fdc\u3058\u3066\u3001\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u304c\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <p>1\u30a8\u30dd\u30c3\u30af\u30671\u30d6\u30ed\u30c3\u30af\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u59d4\u4efb\u91cf\u306e\u76ee\u5b89\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002  </p> <ul> <li>1M 60%  </li> <li>2M 85%  </li> <li>3M 95%</li> </ul> <p>\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306e\u5272\u308a\u5f53\u3066\u306f\u3001\u30d7\u30fc\u30eb\u9593\u540c\u58eb\u3067\u8abf\u6574\u3055\u308c\u306a\u3044\u305f\u3081\u4ee5\u4e0b\u306e\u30bf\u30a4\u30d7\u306e\u30d0\u30c8\u30eb\u304c\u767a\u751f\u3057\u307e\u3059\u3002</p> <p>\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb(stolen)</p> <p>\u4ed6\u30d7\u30fc\u30eb\u3068\u540c\u3058\u30b9\u30ed\u30c3\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u969b\u306b\u767a\u751f vrf\u5024\u306b\u3088\u308b\u30b5\u30a4\u30b3\u30ed\u30b2\u30fc\u30e0\u304c\u884c\u308f\u308c\u51fa\u305f\u76ee\u306e\u5c0f\u3055\u3044\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u63a1\u7528\u3055\u308c\u307e\u3059\u3002(\u30b9\u30c6\u30fc\u30af\u91cf\u306b\u3088\u308b\u512a\u4f4d\u6027\u306f\u306a\u304f\u30e9\u30f3\u30c0\u30e0)</p> <p>\u30cf\u30a4\u30c8\u30d0\u30c8\u30eb(Ghosted / missed)</p> <p>\u4ed6\u30d7\u30fc\u30eb\u30685\u79d2\u4ee5\u5185\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u5834\u5408\u3084\u3001\u524d\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30d7\u30fc\u30eb\u306e\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u30fb\u74b0\u5883\u306b\u3088\u308a\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u9045\u5ef6\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u3067\u5f15\u304d\u8d77\u3053\u308b\u73fe\u8c61\u3002\u5730\u7406\u7684\u512a\u4f4d\u6027\u3092\u7121\u304f\u3059\u305f\u3081\u3001vrf\u5024\u306b\u3088\u308b\u30b5\u30a4\u30b3\u30ed\u30b2\u30fc\u30e0\u304c\u884c\u308f\u308c\u51fa\u305f\u76ee\u306e\u5c0f\u3055\u3044\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u304c\u63a1\u7528\u3055\u308c\u307e\u3059\u3002(\u30b9\u30c6\u30fc\u30af\u91cf\u306b\u3088\u308b\u512a\u4f4d\u6027\u306f\u306a\u304f\u30e9\u30f3\u30c0\u30e0)</p>"},{"location":"operation/start-guide/#kes","title":"KES\u3068\u306f\uff1f","text":"<p>KES\uff1dKey-Evolving Signatures</p> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7f72\u540d\u7528\u9375\u30d5\u30a1\u30a4\u30eb\u3002\u904e\u53bb\u306e\u30d6\u30ed\u30c3\u30af\u7f72\u540d\u3092\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u3088\u304690\u65e5\u3054\u3068\u306b\u66f4\u65b0\u304c\u5fc5\u8981\u3002</p>"},{"location":"operation/start-guide/#vrf","title":"VRF\u3068\u306f\uff1f","text":"<p>VRF=Verifiable Random Function</p> <p>Ouroboros Praos\u306f\u3001VRF\uff08Verifiable Random Function\uff09\u30ad\u30fc\u306b\u3088\u3063\u3066\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u3055\u3089\u306a\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5c64\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002 Ouroboros Praos\u306e\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u975e\u516c\u958b\u3068\u306a\u3063\u3066\u304a\u308a\u3001VRF\u30ad\u30fc\u3092\u4f7f\u3063\u3066\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306e\u691c\u8a3c\u3092\u884c\u3063\u3066\u304a\u308a\u307e\u3059\u3002</p>"},{"location":"operation/start-guide/#_5","title":"\u5404\u30d5\u30a1\u30a4\u30eb\u306e\u5f79\u5272\u3068\u4fdd\u7ba1\u5834\u6240","text":""},{"location":"operation/start-guide/#_6","title":"\u8a3c\u660e\u66f8\u3068\u30da\u30a2\u30ad\u30fc","text":"<p>\u30fb\u30fb\u30fb\u30ed\u30c3\u30af\u5fc5\u9808\u30fb\u518d\u4f5c\u6210\u4e0d\u53ef\u30fb\u7d1b\u5931\u4e0d\u53ef \u30fb\u30fb\u30fb\u66f4\u65b0\u6642\u66f8\u304d\u63db\u3048\u30fb\u518d\u4f5c\u6210\u53ef\u80fd \ud83d\udd34\u30fb\u30fb\u30fbBP\u8d77\u52d5\u3067\u4f7f\u7528 \ud83d\udd37\u30fb\u30fb\u30fb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3067\u4f7f\u7528</p> <p>\u9375\u30d5\u30a1\u30a4\u30eb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066</p> <p>\u30de\u30fc\u30af\u304c\u4ed8\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u3068\u3066\u3082\u91cd\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\u7d1b\u5931\u30fb\u524a\u9664\u3059\u308b\u3068\u30d7\u30fc\u30eb\u904b\u55b6\u304c\u7d99\u7d9a\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u308a\u3001\u8cc7\u91d1\u3092\u5f15\u304d\u51fa\u305b\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u540c\u4e00\u30d5\u30a1\u30a4\u30eb\u3092\u8907\u6570\u306eUSB\u306a\u3069\u3078\u5206\u6563\u4fdd\u7ba1\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p> \u30d5\u30a1\u30a4\u30eb \u7528\u9014 \u63a8\u5968\u4fdd\u7ba1\u5834\u6240 \u91cd\u8981\u5ea6 payment.vkey payment\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB payment.skey payment\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.vkey \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.skey \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB vrf.vkey\ud83d\udd37 VRF\u516c\u958b\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB vrf.skey\ud83d\udd34 VRF\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.vkey \u30b3\u30fc\u30eb\u30c9\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.skey \u30b3\u30fc\u30eb\u30c9\u79d8\u5bc6\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB payment.addr payment\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB stake.addr \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB kes.vkey KES\u516c\u958b\u9375 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB kes.skey\ud83d\udd34 KES\u79d8\u5bc6\u9375 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.cert\ud83d\udd34 \u30d7\u30fc\u30eb\u904b\u7528\u8a3c\u660e\u66f8 BP \uff0f \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB pool.cert \u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8 \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB node.counter \u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7 \uff0f USB"},{"location":"operation/start-guide/#_7","title":"\u30ce\u30fc\u30c9\u8d77\u52d5\u7528\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 mainnet-byron-genesis.json Byron\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-shelley-genesis.json Shelley\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-alonzo-genesis.json Alonzo\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-conway-genesis.json Conway\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-config.json \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb mainnet-topology.json \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb"},{"location":"operation/start-guide/#_8","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3084\u305d\u306e\u4ed6","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 \u63a8\u5968\u4fdd\u7ba1\u5834\u6240 \u91cd\u8981\u5ea6 startRelayNode1.sh \u30ea\u30ec\u30fc\u7528\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30ec\u30fc startBlockProducingNode.sh BP\u7528\u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8 BP gLiveView.sh \u30ce\u30fc\u30c9GUI\u7528\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30ec\u30fc/BP params.json \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb BP poolMetaData.json \u30d7\u30fc\u30eb\u60c5\u5831JSON BP poolMetaDataHash.txt poolMetaData.json\u30cf\u30c3\u30b7\u30e5\u5024\u30d5\u30a1\u30a4\u30eb BP fullUtxo.out UTXO\u51fa\u529b\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - balance.out \u30a6\u30a9\u30ec\u30c3\u30c8\u6b8b\u9ad8\u51fa\u529b\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.tmp \u4eee\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.raw \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef - tx.signed \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7f72\u540d\u4ed8\u304d\u30d5\u30a1\u30a4\u30eb \u4f7f\u7528\u5f8c\u524a\u9664\u53ef -"},{"location":"operation/start-guide/#_9","title":"\u4f5c\u696d\u5185\u5bb9\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<p> \u65e5\u6b21\u4f5c\u696d</p> <ul> <li>\u30ce\u30fc\u30c9\u7a3c\u50cd\u72b6\u6cc1\u30c1\u30a7\u30c3\u30af(Grafana\u7b49)</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9</li> </ul> <p> \u30a8\u30dd\u30c3\u30af\u6bce\u4f5c\u696d</p> <ul> <li>\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u78ba\u8a8d   (320000\u30b9\u30ed\u30c3\u30c8\u3092\u8d85\u3048\u3066\u304b\u3089\u30a8\u30dd\u30c3\u30af\u7d42\u4e86\u307e\u3067\u306b)  </li> </ul> <p> 3\u304b\u6708\u6bce\u4f5c\u696d</p> <ul> <li>KES\u66f4\u65b0(1-KES\u306e\u66f4\u65b0)</li> </ul> <p> \u4e0d\u5b9a\u671f\u4f5c\u696d</p> <ul> <li>Ubuntu\u30d1\u30c3\u30b1\u30fc\u30b8\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u30a2\u30d7\u30ea\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</li> <li>\u30b5\u30fc\u30d0\u30fc\u969c\u5bb3\u5bfe\u5fdc</li> <li>\u30d7\u30fc\u30eb\u8a2d\u5b9a\u5909\u66f4\u306a\u3069</li> </ul>"},{"location":"operation/tool/","title":"SPO JAPAN GUILD TOOL","text":"<p>\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2024/10/01 v3.8.1</p> <p>\u4e3b\u306a\u6a5f\u80fd</p> <ul> <li>payment.addr\u6b8b\u9ad8\u7167\u4f1a</li> <li>\u5831\u916c\u5f15\u304d\u51fa\u3057</li> <li>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u53ef\u80fd\u53ef\u5426\u78ba\u8a8d</li> <li>env\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5207\u308a\u66ff\u3048</li> <li>Catalyst\u6709\u6a29\u8005\u767b\u9332</li> <li>\u30ac\u30d0\u30ca\u30f3\u30b9\u767b\u9332\u30fb\u6295\u7968</li> </ul> <p></p>"},{"location":"operation/tool/#_1","title":"\u8a2d\u5b9a","text":"<p>\u30b9\u30af\u30ea\u30d7\u30c8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/sjgtool.sh -O sjgtool.sh\nchmod 755 sjgtool.sh\n</code></pre></p> <p>env\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63</p> <p>\u305d\u306e\u307e\u307e\u5168\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,116s!#WALLET_PAY_ADDR_FILENAME=\"payment.addr\"!WALLET_PAY_ADDR_FILENAME=\"payment.addr\"!' \\\n    -e '1,116s!#WALLET_STAKE_ADDR_FILENAME=\"reward.addr\"!WALLET_STAKE_ADDR_FILENAME=\"stake.addr\"!' \\\n    -e '1,116s!#POOL_HOTKEY_VK_FILENAME=\"hot.vkey\"!POOL_HOTKEY_VK_FILENAME=\"kes.vkey\"!' \\\n    -e '1,116s!#POOL_HOTKEY_SK_FILENAME=\"hot.skey\"!POOL_HOTKEY_SK_FILENAME=\"kes.skey\"!' \\\n    -e '1,116s!#POOL_COLDKEY_VK_FILENAME=\"cold.vkey\"!POOL_COLDKEY_VK_FILENAME=\"node.vkey\"!' \\\n    -e '1,116s!#POOL_COLDKEY_SK_FILENAME=\"cold.skey\"!POOL_COLDKEY_SK_FILENAME=\"node.skey\"!' \\\n    -e '1,116s!#POOL_OPCERT_COUNTER_FILENAME=\"cold.counter\"!POOL_OPCERT_COUNTER_FILENAME=\"node.counter\"!' \\\n    -e '1,116s!#POOL_OPCERT_FILENAME=\"op.cert\"!POOL_OPCERT_FILENAME=\"node.cert\"!' \\\n    -e '1,116s!#POOL_VRF_SK_FILENAME=\"vrf.skey\"!POOL_VRF_SK_FILENAME=\"vrf.skey\"!'\n</code></pre></p> \u5404\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u72ec\u81ea\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408 <p>~/cnode/scripts/env\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u4ee5\u4e0b\u306e\u5909\u6570\u306b\u5bfe\u3057\u3001\u5148\u982d\u306e#\u3092\u524a\u9664\u3057\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>WALLET_PAY_ADDR_FILENAME=\"payment.addr\" WALLET_STAKE_ADDR_FILENAME=\"stake.addr\" POOL_HOTKEY_VK_FILENAME=\"kes.vkey\" POOL_OPCERT_FILENAME=\"node.cert\" POOL_VRF_SK_FILENAME=\"vrf.skey\" POOL_OPCERT_COUNTER_FILENAME=\"node.counter\" POOL_OPCERT_FILENAME=\"node.cert POOL_VRF_SK_FILENAME=\"vrf.skey</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b <pre><code>echo alias gtool=\"'cd $NODE_HOME/scripts; ./sjgtool.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>TOOL\u3092\u5b9f\u884c\u3059\u308b <pre><code>gtool\n</code></pre></p> <p>\u65e2\u77e5\u306e\u4e0d\u5177\u5408</p> <p>\u306a\u3057</p> <p>\u307e\u305f\u3001\u305d\u306e\u4ed6\u30d0\u30b0\u3092\u767a\u898b\u3057\u305f\u5834\u5408\u306fGithub\u3067issue\u3092\u63d0\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/tool/#_2","title":"\u66f4\u65b0\u5c65\u6b74","text":""},{"location":"operation/tool/#381","title":"3.8.1","text":"<pre><code>* \u30e1\u30cb\u30e5\u30fc\u4fee\u6b63\n* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#380","title":"3.8.0","text":"<pre><code>* \u30ac\u30d0\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3SPO\u6295\u7968\u5b9f\u88c5\n* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#375","title":"3.7.5","text":"<pre><code>* \u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u5931\u6557\u3059\u308b\u30d0\u30b0\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#374","title":"3.7.4","text":"<pre><code>* ADA\u30cf\u30f3\u30c9\u30eb\u540d\u524d\u89e3\u6c7a\u30d0\u30b0\u89e3\u6d88\n</code></pre>"},{"location":"operation/tool/#373","title":"3.7.3","text":"<pre><code>* env\u304b\u3089\u4efb\u610fPrometheus\u30dd\u30fc\u30c8\u53d6\u5f97 `PROM_PORT`\n</code></pre>"},{"location":"operation/tool/#371","title":"3.7.1","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\u3000\u8a93\u7d04\u30c1\u30a7\u30c3\u30af\u5224\u5b9a\u4fee\u6b63\n   (payment.addr + stake.addr\u5831\u916c\u5408\u8a08)\n* Pledge\u5909\u66f4\u6642\u306e\u6709\u52b9\u30a8\u30dd\u30c3\u30af\u30c1\u30a7\u30c3\u30af\u5c0e\u5165\n</code></pre>"},{"location":"operation/tool/#370","title":"3.7.0","text":"<pre><code>* CLI 8.17.0.0\u5bfe\u5fdc\n* \u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u3068DB\u5bb9\u91cf\u8868\u793a\u8ffd\u52a0\n</code></pre>"},{"location":"operation/tool/#364","title":"3.6.4","text":"<pre><code>* gLiveView1.28.x\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u6a5f\u80fd\n* \u30d7\u30fc\u30ebID\u30d5\u30a1\u30a4\u30eb\u540d\u5909\u66f4  \n\u3000stakepoolid_hex \u2192 pool.id  \n\u3000stakepoolid_bech32 \u2192 pool.id-bech32\n</code></pre>"},{"location":"operation/tool/#363","title":"3.6.3","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000payment.addr\u30a8\u30e9\u30fc\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#362","title":"3.6.2","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000\u8868\u793a\u6587\u8a00\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#360","title":"3.6.0","text":"<pre><code>* Catalyst\u6709\u6a29\u8005\u767b\u9332\u6a5f\u80fd\u3000\u5b9f\u88c5\n\u3000payment.addr\u306eADA\u3092Catalyst Voting\u30d1\u30ef\u30fc\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n</code></pre>"},{"location":"operation/tool/#351","title":"3.5.1","text":"<pre><code>* SPO\u6295\u7968\u6a5f\u80fd\n\u3000cardano-cli 8.0.0-untested\u4f7f\u7528\u6642\u3001Tx\u304c\u4f5c\u6210\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u3092\u89e3\u6d88\n</code></pre>"},{"location":"operation/tool/#350","title":"3.5.0","text":"<pre><code>* SPO\u6295\u7968\u6a5f\u80fd\u5b9f\u88c5\n\u3000\u7c21\u6613\u30e1\u30c3\u30bb\u30fc\u30b8\u6dfb\u4ed8\u53ef\u80fd\n</code></pre>"},{"location":"operation/tool/#346","title":"3.4.6","text":"<pre><code>* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af\n    * \u30e1\u30bf\u30c7\u30fc\u30bf\u30cf\u30c3\u30b7\u30e5\u30c1\u30a7\u30c3\u30af\u8ffd\u52a0\n    * PeerIn\u30ab\u30a6\u30f3\u30c8\u304b\u3089127.0.0.1\u3092\u9664\u5916\n* Preview\u30cd\u30c3\u30c8\u30ef\u30fc\u30afTx\u78ba\u8a8d\u30ea\u30f3\u30af\u3092CardanoScan\u3078\u5909\u66f4\n</code></pre>"},{"location":"operation/tool/#344","title":"3.4.4","text":"<pre><code>* Preview / PreProd \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u5bfe\u5fdc\uff08env\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u5fc5\u9808\uff09\n* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30c1\u30a7\u30c3\u30af\u7dcf\u5408\u5224\u5b9a\u5c0e\u5165\n</code></pre>"},{"location":"operation/tool/#343","title":"3.4.3","text":"<pre><code>* \u8efd\u5fae\u306a\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#342","title":"3.4.2","text":"<pre><code>* 364\u7279\u5225\u5bfe\u5fdc\u524a\u9664\n* env\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30c1\u30a7\u30c3\u30af\u30d5\u30e9\u30b0\u5207\u66ff\u6a5f\u80fd\u8ffd\u52a0\n* \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u9001\u4fe1\u5f8c\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u78ba\u8a8dURL\u3092\u8868\u793a\n</code></pre>"},{"location":"operation/tool/#331","title":"3.3.1","text":"<pre><code>* 364\u30a8\u30dd\u30c3\u30af\u7279\u5225\u5bfe\u5fdc cncli.sh\u30d1\u30c3\u30c1\u9069\u7528\u8ffd\u52a0\n</code></pre>"},{"location":"operation/tool/#330","title":"3.3.0","text":"<pre><code>* \u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u3000\u4efb\u610f\u30a2\u30c9\u30ec\u30b9\u51fa\u91d1ADA Handle\u306b\u5bfe\u5fdc\n</code></pre>"},{"location":"operation/tool/#321","title":"3.2.1","text":"<pre><code>* \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30b3\u30de\u30f3\u30c9\u3092\u4fee\u6b63\n</code></pre>"},{"location":"operation/tool/#320","title":"3.2.0","text":"<pre><code>* KES\u66f4\u65b0\u6642\u306e\u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u30fb\u4f5c\u6210\u624b\u9806\u8ffd\u52a0\n* \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af KES\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb\u5909\u66f4\n</code></pre>"},{"location":"operation/tool/#310","title":"3.1.0","text":"<pre><code>* KES\u66f4\u65b0\u6642\u306enode.cert\u30d0\u30c3\u30af\u30a2\u30c3\u30d7/\u524a\u9664\u8ffd\u52a0\n</code></pre>"},{"location":"operation/tool/#300","title":"3.0.0","text":"<ul> <li>KES\u66f4\u65b0\u6a5f\u80fd\u8ffd\u52a0</li> </ul> <p>\u3053\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306b\u4f34\u3044\u3001env\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002 v2.x.x\u4ee5\u4e0a\u3092\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u3066\u3001\u30d7\u30fc\u30eb\u306eKES\u79d8\u5bc6\u9375\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304ckes.skey\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u30921\u56de\u3060\u3051\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u9055\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u4efb\u610f\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sed -i $NODE_HOME/scripts/env \\\n-e '1,116s!#POOL_HOTKEY_SK_FILENAME=\"hot.skey\"!POOL_HOTKEY_SK_FILENAME=\"kes.skey\"!'\n</code></pre></p>"},{"location":"operation/tool/#210","title":"2.1.0","text":"<ul> <li>DdzF\u30a2\u30c9\u30ec\u30b9\u3078\u306e\u5831\u916c/\u8cc7\u91d1\u51fa\u91d1\u3092\u8a31\u53ef</li> <li>payment.addr\u51fa\u91d1\u6642\u3001\u51fa\u91d1\u984d\u8868\u793a\u5358\u4f4d\u30d0\u30b0\u3092\u4fee\u6b63</li> </ul>"},{"location":"operation/topology-updater/","title":"2-4.\u624b\u52d5\u30c8\u30dd\u30ed\u30b8\u30fc\u8a2d\u5b9a","text":"<p>\u6ce8\u610f</p> <p>\u73fe\u5728\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30c8\u30dd\u30ed\u30b8\u30fc\u5f62\u6210\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3078\u79fb\u884c\u3057\u3066\u3044\u307e\u3059\u3002 \u3053\u306e\u8a2d\u5b9a\u306f\u4eca\u5f8c\u5ec3\u6b62\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"operation/topology-updater/#_1","title":"\u4e8b\u524d\u6e96\u5099","text":"<p>\u30ce\u30fc\u30c9\u3092\u30b9\u30c8\u30c3\u30d7\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u624b\u52d5P2P\u7528\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $NODE_HOME\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/topology-legacy.json -O ${NODE_CONFIG}-topology.json\n</code></pre></p> <p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3092\u7121\u52b9\u306b\u3059\u308b <pre><code>sed -i ${NODE_CONFIG}-config.json \\\n    -e 's!\"EnableP2P\": true!\"EnableP2P\": false!'\n</code></pre></p>"},{"location":"operation/topology-updater/#topologyupdater","title":"TopologyUpdater\u306e\u8a2d\u5b9a","text":"\u30d5\u30a1\u30a4\u30eb \u7528\u9014 <code>topologyUpdater.sh</code> \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u767b\u9332\u30b9\u30af\u30ea\u30d7\u30c8 <code>relay-topology_pull.sh</code> \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8 <p>\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u300c<code>topologyUpdater.sh</code>\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>topologyUpdater.sh\u306b\u3064\u3044\u3066</p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831(IP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3001\u30aa\u30f3/\u30aa\u30d5\u30e9\u30a4\u30f3\u72b6\u614b)\u3092\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u30781\u6642\u9593\u306b1\u56de\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u3001\u4e16\u754c\u4e2d\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306b\u81ea\u30d7\u30fc\u30eb\u306e\u30ea\u30ec\u30fc\u60c5\u5831\u304c\u767b\u9332\u3055\u308c\u308b\u4ed5\u7d44\u307f\u3067\u3059</p>"},{"location":"operation/topology-updater/#_2","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306b\u5408\u308f\u305b\u308b  </p> <ul> <li>CNODE_HOSTNAME\u306e\u300cxxx.xxx.xxx.xx\u300d\u306f\u30ea\u30ec\u30fc\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u540d\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u30926000\u304b\u3089\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\u203b26\u884c\u76ee\u306e\"CHANGE ME\"\u306f\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044</li> </ul> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/topologyUpdater.sh &lt;&lt; EOF\n#!/bin/bash\n# shellcheck disable=SC2086,SC2034\n\nUSERNAME=$(whoami)\nCNODE_PORT=6000\nCNODE_HOSTNAME=\"xxx.xxx.xxx.xx\"\nCNODE_BIN=\"/usr/local/bin\"\nCNODE_HOME=$NODE_HOME\nCNODE_LOG_DIR=\"\\${CNODE_HOME}/logs\"\nGENESIS_JSON=\"\\${CNODE_HOME}/${NODE_CONFIG}-shelley-genesis.json\"\nNETWORKID=\\$(jq -r .networkId \\$GENESIS_JSON)\nCNODE_VALENCY=1   # optional for multi-IP hostnames\nNWMAGIC=\\$(jq -r .networkMagic &lt; \\$GENESIS_JSON)\n[[ \"\\${NETWORKID}\" = \"Mainnet\" ]] &amp;&amp; HASH_IDENTIFIER=\"--mainnet\" || HASH_IDENTIFIER=\"--testnet-magic \\${NWMAGIC}\"\n[[ \"\\${NWMAGIC}\" = \"764824073\" ]] &amp;&amp; NETWORK_IDENTIFIER=\"--mainnet\" || NETWORK_IDENTIFIER=\"--testnet-magic \\${NWMAGIC}\"\n\nexport PATH=\"\\${CNODE_BIN}:\\${PATH}\"\nexport CARDANO_NODE_SOCKET_PATH=\"\\${CNODE_HOME}/db/socket\"\n\nblockNo=\\$(/usr/local/bin/cardano-cli conway query tip \\${NETWORK_IDENTIFIER} | jq -r .block )\n\n# Note:\n# if you run your node in IPv4/IPv6 dual stack network configuration and want announced the\n# IPv4 address only please add the -4 parameter to the curl command below  (curl -4 -s ...)\nif [ \"\\${CNODE_HOSTNAME}\" != \"CHANGE ME\" ]; then\nT_HOSTNAME=\"&amp;hostname=\\${CNODE_HOSTNAME}\"\nelse\nT_HOSTNAME=''\nfi\n\nif [ ! -d \\${CNODE_LOG_DIR} ]; then\nmkdir -p \\${CNODE_LOG_DIR};\nfi\n\ncurl -4 -s \"https://api.clio.one/htopology/v1/?port=\\${CNODE_PORT}&amp;blockNo=\\${blockNo}&amp;valency=\\${CNODE_VALENCY}&amp;magic=\\${NWMAGIC}\\${T_HOSTNAME}\" | tee -a \\$CNODE_LOG_DIR/topologyUpdater_lastresult.json\nEOF\n</code></pre> <p>\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u3001\u300ctopologyUpdater.sh\u300d\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x topologyUpdater.sh\n./topologyUpdater.sh\n</code></pre> <p><code>topologyUpdater.sh</code>\u304c\u6b63\u5e38\u306b\u5b9f\u884c\u3055\u308c\u305f\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u5f62\u5f0f\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <p><code>{ \"resultcode\": \"201\", \"datetime\":\"2020-07-28 01:23:45\", \"clientIp\": \"1.2.3.4\", \"iptype\": 4, \"msg\": \"nice to meet you\" }</code></p> <p>\u6ce8\u610f</p> <p>\u203b<code>topologyUpdater.sh</code>\u306f1\u6642\u9593\u4ee5\u5185\u306b2\u56de\u4ee5\u4e0a\u5b9f\u884c\u3057\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\u6700\u60aa\u306e\u5834\u5408\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u305f\u3073\u306b\u3001<code>$NODE_HOME/logs</code>\u306b\u30ed\u30b0\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 </p>"},{"location":"operation/topology-updater/#cron","title":"Cron\u30b8\u30e7\u30d6\u306e\u8a2d\u5b9a","text":"<p>crontab\u30b8\u30e7\u30d6\u3092\u8ffd\u52a0\u3057\u3001\u300ctopologyUpdater.sh\u300d\u30921\u6642\u9593\u306b1\u56de\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <ul> <li>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u8907\u6570\u56de\u5b9f\u884c\u3057\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002\u8907\u6570\u56de\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\u540c\u3058\u6642\u9593\u306b\u8907\u6570\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u767b\u9332\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30d6\u30e9\u30c3\u30af\u30ea\u30b9\u30c8\u306b\u5165\u308a\u307e\u3059\u3002</li> <li>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u6bce\u66425\u5206\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u3000</li> </ul> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/crontab-fragment.txt &lt;&lt; EOF\n5 * * * * ${NODE_HOME}/topologyUpdater.sh\nEOF\ncrontab -l | cat - crontab-fragment.txt &gt;crontab.txt &amp;&amp; crontab crontab.txt\nrm crontab-fragment.txt\n</code></pre> <p>no crontab for ~~ \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001Cron\u521d\u56de\u8a2d\u5b9a\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002</p> <p><pre><code>crontab -l\n</code></pre> \u4ee5\u4e0b\u304c\u8fd4\u308a\u5024\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002</p> <p>\"5 * * * * /home/***/cnode/topologyUpdater.sh\"</p> <p>\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u3078\u306e\u767b\u9332\u306b\u3064\u3044\u3066</p> <p>4\u6642\u9593\u306e\u9593\u30674\u56de\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u305f\u5f8c\u306b\u3001\u30ce\u30fc\u30c9\u304c\u30aa\u30f3\u30e9\u30a4\u30f3\u72b6\u614b\u3067\u6709\u308b\u3053\u3068\u304c\u8a8d\u3081\u3089\u308c\u305f\u5834\u5408\u306b\u30ce\u30fc\u30c9IP\u304c\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\u4e0a\u8a18\u8a2d\u5b9a\u304b\u30894\u6642\u9593\u5f8c\u306b\u6b21\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"operation/topology-updater/#_3","title":"\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u767b\u9332\u78ba\u8a8d","text":"\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME/logs\ncat topologyUpdater_lastresult.json\n</code></pre> <p>\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u767b\u9332\u6210\u529f \u6700\u5f8c\u306e\u4e00\u884c\u304c\u6700\u65b0\u306eresultcode\u306b\u306a\u308a\u3001400\u756a\u53f0\u30fb500\u756a\u53f0\u306e\u5834\u5408\u306f\u3001\u30b5\u30fc\u30d0\u8a2d\u5b9a\u306b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002 <pre><code>{ \"resultcode\": \"201\", \"datetime\":\"2021-01-10 18:30:06\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"nice to meet you\" }\n{ \"resultcode\": \"203\", \"datetime\":\"2021-01-10 19:30:03\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"welcome to the topology\" }\n{ \"resultcode\": \"204\", \"datetime\":\"2021-01-10 20:30:04\", \"clientIp\": \"000.000.000.000\", \"iptype\": 4, \"msg\": \"glad you're staying with us\" }\n</code></pre></p>"},{"location":"operation/topology-updater/#_4","title":"\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9IP\u304c\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a7\u30c3\u30c1\u30ea\u30b9\u30c8\u306b\u767b\u9332\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u5f8c\u3001\u4ee5\u4e0b\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u3066\u4e0b\u3055\u3044\u3002</p> \u30c8\u30dd\u30ed\u30b8\u30fc\u306e\u5f62\u6210\u65b9\u6cd5\u25bc <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b<code>relay-topology_pull.sh</code>\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002  \u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u30fb\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u4e16\u754c\u4e2d\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u4e2d\u304b\u3089\u81ea\u5206\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u8fd1\u8ddd\u96e2\u30fb\u4e2d\u8ddd\u96e2\u30fb\u9060\u8ddd\u96e2\u306b\u5206\u6563\u3057\u305f\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u62bd\u51fa\u3057\u534a\u81ea\u52d5\u3067\u30c8\u30dd\u30ed\u30b8\u30fc\u3092\u5f62\u6210\u3067\u304d\u307e\u3059\u3002 </p> \u500b\u5225\u306b\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u25bc <p>\u203b\u304a\u77e5\u308a\u5408\u3044\u306e\u30ce\u30fc\u30c9\u3084\u81ea\u30ce\u30fc\u30c9\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001IOHK\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u5f8c\u306b \"|\" \u3067\u533a\u5207\u3063\u3066<code>IP\u30a2\u30c9\u30ec\u30b9</code>:<code>\u30dd\u30fc\u30c8\u756a\u53f7</code>:<code>Valency</code> \u306e\u5f62\u5f0f\u3067\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002 <pre><code>|relays-new.cardano-mainnet.iohk.io:3001:2|relay1-eu.xstakepool.com:3001:1|00.000.000.00:3001:1\n</code></pre></p> <p>\u6ce8\u610f</p> <p>\u4ee5\u4e0b\u306f\u3001BP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u3068\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306b\u66f8\u304d\u63db\u3048\u3066\u304b\u3089\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b BLOCKPRODUCING_IP\u306e\u300cxxx.xxx.xxx\u300d\u306fBP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044 BLOCKPRODUCING_PORT\u306f\u4efb\u610f\u3067\u8a2d\u5b9a\u3057\u305f\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/relay-topology_pull.sh &lt;&lt; EOF\n#!/bin/bash\nBLOCKPRODUCING_IP=xxx.xxx.xxx\nBLOCKPRODUCING_PORT=xxxxx\nPEERS=18\ncp $NODE_HOME/${NODE_CONFIG}-topology.json $NODE_HOME/${NODE_CONFIG}-topology-bk.json\ncurl -4 -s -o $NODE_HOME/${NODE_CONFIG}-topology.json \"https://api.clio.one/htopology/v1/fetch/?max=\\${PEERS}&amp;customPeers=\\${BLOCKPRODUCING_IP}:\\${BLOCKPRODUCING_PORT}:1|relays-new.cardano-mainnet.iohk.io:3001:2\"\nEOF\n</code></pre> <p>sh\u30d5\u30a1\u30a4\u30eb\u306b\u6a29\u9650\u3092\u8ffd\u52a0\u3057\u3001relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x relay-topology_pull.sh\n./relay-topology_pull.sh\n</code></pre> <p>relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b\u3068\u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb(mainnet-topology.json)\u3092\u751f\u6210\u3057\u307e\u3059\u3002</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u5fd8\u308c\u306a\u3044\u3067\u4e0b\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl start cardano-node\n</code></pre>"},{"location":"operation/topology-updater/#_5","title":"\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u65b9\u6cd5","text":"<p>\u6982\u8981</p> <p>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306f\u5e38\u306b\u6700\u65b0\u72b6\u614b\u3092\u4fdd\u3064\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u305f\u3081\u30011\u30a8\u30dd\u30c3\u30af\u306b1\u56de\u306f\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\n./relay-topology_pull.sh\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>relay-topology_pull.sh\u3092\u5b9f\u884c\u3059\u308b\u3068\u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb(mainnet-topology.json)\u3092\u751f\u6210\u3057\u307e\u3059\u3002 \u65b0\u3057\u3044\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306f\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u5f8c\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre>"},{"location":"operation/transfer/","title":"\u30b5\u30fc\u30d0\u30fc\u9593\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001","text":"<p>\u30e1\u30ea\u30c3\u30c8</p> <p>\u8907\u6570\u53f0\u306e\u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308b\u5834\u5408\u306b\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u30d3\u30eb\u30c9\u6642\u9593\u306e\u77ed\u7e2e\u3084\u30ce\u30fc\u30c9\u306e\u30c0\u30a6\u30f3\u30bf\u30a4\u30e0\u3092\u6291\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002</p> <p>\u30c7\u30e1\u30ea\u30c3\u30c8</p> <ul> <li>RSYNC+SSH\u3092\u5229\u7528\u3057\u305f\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u65b9\u6cd5\u306f\u3001\u8ee2\u9001\u5143\u30fb\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30a3\u30b9\u30af\u7a7a\u304d\u5bb9\u91cf\u304c150GB\u4ee5\u4e0a\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002</li> </ul> <p>\u306f\u3058\u3081\u306b</p> <ul> <li>RSYNC\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u6700\u521d\u306b\u4e8b\u524d\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044</li> </ul>"},{"location":"operation/transfer/#1-nodecli","title":"1. \u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb(node/cli)\u8ee2\u9001\u306e\u5834\u5408","text":""},{"location":"operation/transfer/#1-2","title":"1-2.\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u8ee2\u9001\u30d5\u30a9\u30eb\u30c0\u7528\u306b\u30b3\u30d4\u30fc\u3059\u308b <pre><code>mkdir $NODE_HOME/Transfer\ncp $(find $HOME/git/cardano-node/dist-newstyle/build -type f -name \"cardano-cli\") $NODE_HOME/Transfer/cardano-cli\ncp $(find $HOME/git/cardano-node/dist-newstyle/build -type f -name \"cardano-node\") $NODE_HOME/Transfer/cardano-node\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>$NODE_HOME/Transfer/cardano-cli version\n$NODE_HOME/Transfer/cardano-node version\n</code></pre></p> <p>\u5e0c\u671b\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/transfer/#1-2_1","title":"1-2.\u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u8ee2\u9001\u3059\u308b","text":"<p>\u5909\u6570<code>for</code>\u306b\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ee3\u5165\u3059\u308b</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u6307\u5b9a\u3059\u308b</p> <pre><code>for=xxxx\n</code></pre> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u3001\u4e8b\u524d\u8a2d\u5b9a\u306e 1-2.SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u3092\u8ee2\u9001\u3059\u308b <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-cli $for::Server/cardano-cli\n</code></pre></p> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p> <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-node $for::Server/cardano-node\n</code></pre> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p>"},{"location":"operation/transfer/#1-3","title":"1-3.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u30fc\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>sudo cp $NODE_HOME/cardano-cli /usr/local/bin/cardano-cli\n</code></pre> <pre><code>sudo cp $NODE_HOME/cardano-node /usr/local/bin/cardano-node\n</code></pre> \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cardano-cli version\ncardano-node version\n</code></pre></p> <p>\u5e0c\u671b\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <ul> <li>GliveView\u3067\u30ce\u30fc\u30c9\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b</li> <li>Syncing 100%\u304cTip(diff): ** :)\u3068\u306a\u308b\u307e\u3067\u5f85\u3064</li> </ul>"},{"location":"operation/transfer/#2db","title":"2.DB\u30d5\u30a9\u30eb\u30c0\u8ee2\u9001\u306e\u5834\u5408","text":""},{"location":"operation/transfer/#2-1","title":"2-1.\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"<p>\u5bb9\u91cf\u78ba\u8a8d \u8ee2\u9001\u5143\u30fb\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4e21\u65b9\u3067\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>df -h /usr\n</code></pre> Avail\u304c180GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>DB\u30d5\u30a9\u30eb\u30c0\u3092\u5727\u7e2e\u3059\u308b</p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s tar\n</code></pre> \u5727\u7e2e\u3059\u308b <pre><code>tar cvzf $NODE_HOME/Transfer/cardano-db.tar.gz -C $NODE_HOME db\n</code></pre></p> <p>\u5727\u7e2e\u304c\u7d42\u4e86\u3057\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p>"},{"location":"operation/transfer/#2-2","title":"2-2.\u8ee2\u9001\u5143\u304b\u3089\u8ee2\u9001\u5148\u3078\u8ee2\u9001\u3059\u308b","text":"\u8ee2\u9001\u5143\u30b5\u30fc\u30d0\u30fc <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s rsync\n</code></pre></p> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\u5909\u6570<code>for</code>\u306b\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ee3\u5165\u3059\u308b</p> <pre><code>for=xxxx\n</code></pre> <p>\u8ee2\u9001\u5148\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u3001\u4e8b\u524d\u8a2d\u5b9a\u306e 1-2.SSH\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u3067\u8a2d\u5b9a\u3057\u305f\u8ee2\u9001\u5148Host\u540d(\u30a8\u30a4\u30ea\u30a2\u30b9)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p>\u5727\u7e2e\u3055\u308c\u305fDB\u3092\u8ee2\u9001\u3059\u308b <pre><code>rsync -P --rsh=ssh $NODE_HOME/Transfer/cardano-db.tar.gz $for::Server/cardano-db.tar.gz\n</code></pre></p> <p>\u8ee2\u9001\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3064</p> <p>\u8ee2\u9001\u304c\u7d42\u4e86\u3057\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p>"},{"location":"operation/transfer/#2-3","title":"2-3.\u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc\u4f5c\u696d","text":"<p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f <pre><code>tmux new -s tar\n</code></pre></p> \u8ee2\u9001\u5148\u30b5\u30fc\u30d0\u30fc <p>SSD\u306e\u7a7a\u304d\u5bb9\u91cf\u3092\u518d\u78ba\u8a8d\u3059\u308b <pre><code>df -h /usr\n</code></pre> Avail\u304c100GB\u4ee5\u4e0a\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>DB\u3092\u89e3\u51cd\u3059\u308b <pre><code>mkdir $NODE_HOME/temp\ntar -xzvf $NODE_HOME/cardano-db.tar.gz -C $NODE_HOME/temp/\n</code></pre></p> <p>DB\u306e\u89e3\u51cd\u304c\u7d42\u308f\u308b\u307e\u3067\u5f85\u3061\u307e\u3059</p> <p>\u89e3\u51cd\u304c\u7d42\u308f\u3063\u305f\u3089TMUX\u3092\u9589\u3058\u308b <pre><code>exit\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cardano-node\n</code></pre></p> <p>DB\u30d5\u30a9\u30eb\u30c0\u3092\u5165\u308c\u66ff\u3048\u308b <pre><code>mv $NODE_HOME/db $NODE_HOME/db_134\nmv $NODE_HOME/temp/db $NODE_HOME/db\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cardano-node\n</code></pre></p> <p>\u30d2\u30f3\u30c8</p> <ul> <li>GliveView\u3067\u30ce\u30fc\u30c9\u72b6\u6cc1\u3092\u78ba\u8a8d\u3059\u308b</li> <li>Syncing 100%\u304cTip(diff): ** :)\u3068\u306a\u308b\u307e\u3067\u5f85\u3064</li> </ul> <p>\u30d0\u30a4\u30ca\u30ea\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u3059\u308b <pre><code>cd $HOME/git\nrm -rf cardano-node-old/\nmv $HOME/git/cardano-node/ $HOME/git/cardano-node-old/\nmkdir cardano-node\nmv $NODE_HOME/cardano-cli $HOME/git/cardano-node/\nmv $NODE_HOME/cardano-node $HOME/git/cardano-node/\n</code></pre></p> <p>\u78ba\u8a8d</p> <p>\u30ce\u30fc\u30c9\u306e\u540c\u671f\u304c\u6210\u529f\u3057\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u6210\u529f\u3057\u6570\u30a8\u30dd\u30c3\u30af\u69d8\u5b50\u3092\u898b\u305f\u3042\u3068\u3001\u8ee2\u9001\u7528\u30d5\u30a1\u30a4\u30eb\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7DB\u3092\u524a\u9664\u3057\u3066\u304f\u3060\u3055\u3044</p> \u8ee2\u9001\u5143\u8ee2\u9001\u5148 <pre><code>rm -rf $NODE_HOME/Transfer\n</code></pre> <pre><code>rm -rf $NODE_HOME/db_134\nrm $NODE_HOME/1.35.3-db.tar.gz\n</code></pre>"},{"location":"operation/ubuntu22/","title":"Ubuntu20.04\u219222.04\u4efb\u610f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30de\u30cb\u30e5\u30a2\u30eb","text":"<p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u524d\u306e\u78ba\u8a8d\u4e8b\u9805</p> <ul> <li>2023\u5e746\u6708\u6642\u70b9\u306b\u304a\u3044\u3066\u3001\u3053\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306f\u4efb\u610f\u3067\u3059\u3002</li> <li>20.04LTS\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b5\u30dd\u30fc\u30c8\u306f2025\u5e744\u6708\u307e\u3067\u6709\u52b9\u3067\u3059\u3002</li> <li>IOG\u304b\u3089\u306f\u6b63\u5f0f\u306a22.04\u5bfe\u5fdc\u30a2\u30ca\u30a6\u30f3\u30b9\u306f\u307e\u3060\u3054\u3056\u3044\u307e\u305b\u3093\u304c\u3001\u5185\u90e8\u958b\u767a\u30fb\u691c\u8a3c\u3067\u306f22.04\u304c\u4f7f\u308f\u308c\u3066\u304a\u308a\u307e\u3059\u3002</li> <li>22.04\u3067\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30fb\u5b89\u5b9a\u7a3c\u50cd\u78ba\u8a8d\u6e08\u307f\u3067\u3059\u3002</li> <li>\u4f5c\u696d\u524d\u306b\u4e00\u901a\u308a\u719f\u8aad\u3057\u3001\u4f5c\u696d\u30d5\u30ed\u30fc\u3092\u7406\u89e3\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>OS\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u305f\u3081\u3001\u4f5c\u696d\u306f\u614e\u91cd\u306b\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"operation/ubuntu22/#1","title":"1.\u4e8b\u524d\u6e96\u5099","text":""},{"location":"operation/ubuntu22/#1-1","title":"1-1.\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4f5c\u6210","text":"<p>\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u4f5c\u6210</p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u524d\u306b\u5fc5\u305a\u3001VPS\u306e\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\u73fe\u6642\u70b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8(\u30d0\u30c3\u30af\u30a2\u30c3\u30d7)\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e07\u4e00\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u3001\u7d20\u65e9\u304f\u5fa9\u65e7\u3067\u304d\u307e\u3059\u3002</p>"},{"location":"operation/ubuntu22/#1-2ssh","title":"1-2.SSH\u9375\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3059\u308b","text":"<p>SSH\u63a5\u7d9a\u7528\u306e\u30ed\u30fc\u30ab\u30eb\u30d1\u30bd\u30b3\u30f3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3001SSH\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>id_rsa</li> <li>ssh_ed25519</li> </ul> <p>\u306e\u3069\u3061\u3089\u304b</p>"},{"location":"operation/ubuntu22/#1-3ssh","title":"1-3.SSH\u30bf\u30fc\u30df\u30ca\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u6700\u65b0\u5316","text":"<p>Windows\u3067R-login\u3092\u3054\u5229\u7528\u306e\u5834\u5408\u306f\u3001RLogin-2.28.2\u3092\u4f7f\u7528\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"operation/ubuntu22/#1-4","title":"1-4.\u4f5c\u696d\u5bfe\u8c61\u30b5\u30fc\u30d0\u30ed\u30b0\u30a4\u30f3","text":"<p>\u63a5\u7d9a\u65b9\u6cd5</p> <p>1-4\uff5e1-8\u306f\u901a\u5e38\u306eSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b</p> id_rsa\u306e\u5834\u5408ssh_ed25519\u306e\u5834\u5408 <p>22.04\u3067\u306fRSA\u65b9\u5f0f\u304c\u7121\u52b9\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u65b0\u3057\u3044\u9375\u30da\u30a2(ed25519\u6697\u53f7\u65b9\u5f0f)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p>\u30da\u30a2\u9375\u306e\u4f5c\u6210</p> <pre><code>ssh-keygen -t ed25519 -N '' -C ssh_connect -f ~/.ssh/ssh_ed25519\n</code></pre> <p>ssh_ed25519\uff08\u79d8\u5bc6\u9375\uff09\u3068ssh_ed25519.pub\uff08\u516c\u958b\u9375\uff09\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p> <pre><code>cd ~/.ssh\nls\n</code></pre> <p>\u516c\u958b\u9375\u3092\u8a8d\u8a3c\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080 <pre><code>cat ssh_ed25519.pub &gt;&gt; authorized_keys\n</code></pre></p> <p>SSH\u9375\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b</p> <ol> <li>R-login\u306e\u5834\u5408\u306f\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u958b\u304f  </li> <li>\u5de6\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30ed\u30fc\u30ab\u30eb\u5074)\u306f\u4efb\u610f\u306e\u968e\u5c64\u306b\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3059\u308b\u3002  </li> <li>\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30b5\u30fc\u30d0\u5074)\u306f\u300c.ssh\u300d\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b  </li> <li>\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089\u3001<code>ssh_ed25519</code>\u3068<code>ssh_ed25519.pub</code>\u306e\u4e0a\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066  \u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u9078\u629e\u3059\u308b  </li> <li>\u4e00\u65e6\u30b5\u30fc\u30d0\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b  </li> <li>R-Login\u306e\u30b5\u30fc\u30d0\u63a5\u7d9a\u7de8\u96c6\u753b\u9762\u3092\u958b\u304d\u3001\u300cSSH\u8a8d\u8a3c\u9375\u300d\u3092\u30af\u30ea\u30c3\u30af\u30574\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f<code>ssh_ed25519</code>\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3076  </li> <li>\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a\u3059\u308b</li> </ol> <p>\u203b4\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fSSH\u9375\u30da\u30a2\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</p> <p>\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3067\u304d\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u3001\u30b5\u30fc\u30d0\u30fc\u5185\u306e\u9375\u3092\u524a\u9664\u3059\u308b <pre><code>rm ~/.ssh/ssh_ed25519\nrm ~/.ssh/ssh_ed25519.pub\n</code></pre></p> <p>Ubuntu22.04\u306b\u5bfe\u5fdc\u3057\u305f\u6697\u53f7\u65b9\u5f0f\u3067\u3059\u3002\u6b21\u306e\u9805\u76ee\u306b\u79fb\u52d5\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"operation/ubuntu22/#1-5","title":"1-5.\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3059\u308b","text":"<pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u81ea\u52d5\u8d77\u52d5\u3092\u4e00\u65e6\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl disable cardano-node\n</code></pre></p>"},{"location":"operation/ubuntu22/#1-7","title":"1-7.\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<p><pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre> <pre><code>cd /usr/lib/python3/dist-packages/\nsudo cp apt_pkg.cpython-38-x86_64-linux-gnu.so apt_pkg.so\n</code></pre> <pre><code>sudo apt install --reinstall python3-apt\n</code></pre></p> <p>Python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>3.10\u4ee5\u4e0b\u3067\u3042\u308c\u3070OK</p> \u623b\u308a\u5024\u304cpython3.12\u306e\u5834\u5408 <p><pre><code>sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.8 2\n</code></pre> <pre><code>python3 -V\n</code></pre></p> <p>Python 3.8.10\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"operation/ubuntu22/#1-8","title":"1-8.\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install update-manager-core\n</code></pre>"},{"location":"operation/ubuntu22/#1-6ubuntu","title":"1-6.Ubuntu\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d","text":"<p>\u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cat /etc/os-release | grep \"VERSION=\"\n</code></pre> <p>VERSION=\"20.04.x LTS (Focal Fossa)\"\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u53ef\u80fd\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>sudo do-release-upgrade -c | grep \"New release\"\n</code></pre> <p>New release '22.04.x LTS' available.\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p>"},{"location":"operation/ubuntu22/#1-9","title":"1-9.\u30b7\u30b9\u30c6\u30e0\u3092\u518d\u8d77\u52d5","text":"<pre><code>sudo reboot\n</code></pre>"},{"location":"operation/ubuntu22/#2ubuntu","title":"2.Ubuntu\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u6ce8\u610f\u70b9</p> <p>Ubuntu22.04\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9(\u4ee5\u4e0b\u306e\u4f5c\u696d)\u306b\u304a\u3044\u3066\u3001SSH\u63a5\u7d9a\u3067\u306e\u4f5c\u696d\u306f\u4e0d\u610f\u306a\u5207\u65ad\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u306b\u5fa9\u65e7\u304c\u56f0\u96e3\u306b\u306a\u308b\u305f\u3081\u975e\u63a8\u5968\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002</p> <p>\u305d\u306e\u305f\u3081\u3001\u5951\u7d04\u4e8b\u696d\u8005(VPS)\u306e\u30de\u30a4\u30da\u30fc\u30b8\u307e\u305f\u306f\u30b5\u30fc\u30d0\u30d1\u30cd\u30eb\u306b\u4ed8\u968f\u3057\u3066\u3044\u308b\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762(VNC\u307e\u305f\u306fKVN\u306a\u3069)\u304b\u3089\u306e\u4f5c\u696d\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002</p> <p>\u305f\u3060\u3057\u4ee5\u4e0b\u306e\u70b9\u306b\u3054\u4e86\u627f\u9802\u3051\u308b\u5834\u5408\u306fSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002</p> <ul> <li>\u4e8b\u524d\u306b\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8(\u30d0\u30c3\u30af\u30a2\u30c3\u30d7)\u4f5c\u6210\u304c\u53ef\u80fd\u306a\u65b9</li> <li>\u4e0d\u610f\u306aSSH\u5207\u65ad\u3067\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u4e2d\u65ad\u3057\u3066\u3082\u3054\u81ea\u8eab\u3067\u5fa9\u65e7\u51fa\u6765\u308b\u65b9</li> </ul> <p>SSH\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408</p> <ul> <li> <p>\u4e88\u5099\u306eSSH\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u203b\u305f\u3060\u3057AWS\u3084IONOS\u306a\u3069\u3001VPS\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u5b9f\u884c\u305b\u305aVPS\u7ba1\u7406\u753b\u9762\u304b\u3089\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo ufw allow 1022/tcp\nsudo ufw reload\n</code></pre></p> </li> <li> <p>R-login\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u4e0d\u610f\u306a\u5207\u65ad\u3092\u9632\u3050\u305f\u3081\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044\u3002</p> </li> </ul> <p>\u300c\u30d5\u30a1\u30a4\u30eb\u300d\u2192\u300c\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u300d\u2192 \u63a5\u7d9a\u5148\u53f3\u30af\u30ea\u30c3\u30af\u3057\u300c\u63a5\u7d9a\u3092\u7de8\u96c6\u3059\u308b\u300d\u2192\u300c\u30d7\u30ed\u30c8\u30b3\u30eb\u300d\u2192 SSH\u67a0\u306e\u300cKeepAlve\u30d1\u30b1\u30c3\u30c8\u9001\u4fe1\u9593\u9694(sec)\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\u7a7a\u6b04\u306b<code>20</code>\u3092\u5165\u529b\u3059\u308b\u3002</p>"},{"location":"operation/ubuntu22/#2-1","title":"2-1.\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u5b9f\u884c","text":"<p>\u63a5\u7d9a\u30d1\u30bf\u30fc\u30f3</p> <ul> <li>\u30d1\u30bf\u30fc\u30f31\uff1aVPS\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u63a5\u7d9a\u3059\u308b</li> <li>\u30d1\u30bf\u30fc\u30f32\uff1a\u30ed\u30fc\u30ab\u30ebPC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fVNC\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u63a5\u7d9a\u3059\u308b(\u4e3b\u306bContabo)</li> <li>\u30d1\u30bf\u30fc\u30f33\uff1a\u3044\u3064\u3082\u901a\u308aSSH\u3067\u63a5\u7d9a\u3059\u308b</li> </ul> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b <pre><code>sudo do-release-upgrade\n</code></pre></p>"},{"location":"operation/ubuntu22/#2-2","title":"2-2.\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30e1\u30c3\u30bb\u30fc\u30b8","text":"<p>\u4ee5\u4e0b\u3001\u78ba\u8a8d\u30e1\u30c3\u30bb\u30fc\u30b8\u4f8b\u3067\u3059\u3002\u3054\u5229\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u8868\u793a\u5185\u5bb9\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u305f\u5185\u5bb9\u3092\u3088\u304f\u8aad\u3093\u3067\u4e0b\u3055\u3044\u3002</p> <p>SSH\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408</p> <p>\u30d0\u30c3\u30af\u30a2\u30c3\u30d7SSH\u30dd\u30fc\u30c8\u958b\u653e <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Continue running under SSH?\n\nThis session appears to be running under ssh. It is not recommended\nto perform a upgrade over ssh currently because in case of failure it\nis harder to recover.\n\nIf you continue, an additional ssh daemon will be started at port\n'1022'.\nDo you want to continue?\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>sshd\u306b1022\u30dd\u30fc\u30c8\u8ffd\u52a0\u306e\u304a\u77e5\u3089\u305b \u305d\u306e\u307e\u307e<code>ENTER</code> <pre><code>Starting additional sshd\n\nTo make recovery in case of failure easier, an additional sshd will\nbe started on port '1022'. If anything goes wrong with the running\nssh you can still connect to the additional one.\nIf you run a firewall, you may need to temporarily open this port. As\nthis is potentially dangerous it's not done automatically. You can\nopen the port with e.g.:\n'iptables -I INPUT -p tcp --dport 1022 -j ACCEPT'\n\nTo continue please press [ENTER]  # ENTER \n</code></pre></p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30ea\u30dd\u30b8\u30c8\u30ea\u66f4\u65b0\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Updating repository information\n\nNo valid mirror found\n\nWhile scanning your repository information no mirror entry for the\nupgrade was found. This can happen if you run an internal mirror or\nif the mirror information is out of date.\n\nDo you want to rewrite your 'sources.list' file anyway? If you choose\n'Yes' here it will update all 'focal' to 'jammy' entries.\nIf you select 'No' the upgrade will cancel.\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u958b\u59cb\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Do you want to start the upgrade?\n\n\n3 installed packages are no longer supported by Canonical. You can\nstill get support from the community.\n\n5 packages are going to be removed. 117 new packages are going to be\ninstalled. 629 packages are going to be upgraded.\n\nYou have to download a total of 694 M. This download will take about\n2 minutes with a 40Mbit connection and about 18 minutes with a 5Mbit\nconnection.\n\nFetching and installing the upgrade can take several hours. Once the\ndownload has finished, the process cannot be canceled.\n\n Continue [yN]  Details [d] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>libc6\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u304b\uff1f \u30ab\u30fc\u30bd\u30eb\u30ad\u30fc\u3067<code>YES</code>\u3092\u9078\u629e\u3057\u3066<code>ENTER</code> </p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u306e\u6709\u7121 <code>N</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Configuration file '/etc/ssh/ssh_config'\n ==&gt; Modified (by you or by a script) since installation.\n ==&gt; Package distributor has shipped an updated version.\n   What would you like to do about it ? Your options are:\n    Y or I : install the package maintainer's version\n    N or O : keep your currently-installed version\n      D : show the differences between the versions\n      Z : start a shell to examine the situation\n The default action is to keep your current version.\n*** ssh_config (Y/I/N/O/D/Z) [default=N] ?  N       # N \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u7a2e\u985e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5fc5\u305a <code>N</code> \u3092\u5165\u529b\u3057\u3066\u3001\u300ckeep your currently-installed version\uff08\u73fe\u5728\u306e\u8a2d\u5b9a\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u306f<code>ssh_config</code>\u4ee5\u5916\u306b\u3082\u540c\u69d8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002(<code>chrony</code>,<code>opne-ssh</code>,<code>sudoers</code>,<code>sysctl.conf</code>\u306a\u3069) \u3044\u305a\u308c\u3082 <code>N</code> \u300ckeep your currently-installed version\uff08\u73fe\u5728\u306e\u8a2d\u5b9a\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u65b0\u3057\u3044\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u51e6\u7406\u65b9\u6cd5\u306b\u3064\u3044\u3066 <code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u304c\u9078\u629e\u3055\u308c\u305f\u72b6\u614b\u3067<code>ENTER</code> </p> <p>\u6ce8\u610f</p> <ul> <li>\u3053\u306e\u7a2e\u985e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5fc5\u305a \u300c<code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u3063\u3066\u306f<code>chrony</code>\u4ee5\u5916\u306b\u3082\u540c\u69d8\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002(<code>sshd</code>\u306a\u3069) \u3044\u305a\u308c\u3082 <code>keep the local version currently installed</code>\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u30ed\u30fc\u30ab\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7dad\u6301\u3059\u308b\uff09\u300d\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044\u3002</li> </ul> <p>\u53e4\u3044\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>Remove obsolete packages?\n\n\n73 packages are going to be removed.\n\n Continue [yN]  Details [d] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u518d\u8d77\u52d5\u3057\u307e\u3059\u304b\uff1f <code>y</code> \u3092\u5165\u529b\u3057\u3066Enter <pre><code>System upgrade is complete.\n\nRestart required\n\nTo finish the upgrade, a restart is required.\nIf you select 'y' the system will be restarted.\n\nContinue [yN] y      # y \u3092\u5165\u529b\u3057\u3066Enter\n</code></pre></p>"},{"location":"operation/ubuntu22/#3ssh","title":"3.\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u78ba\u8a8d(SSH\u63a5\u7d9a)","text":"<p>\u63a5\u7d9a\u65b9\u6cd5</p> <p>3~5\u306fSSH\u63a5\u7d9a\u3067\u4f5c\u696d\u3059\u308b</p>"},{"location":"operation/ubuntu22/#3-1ubuntu","title":"3-1.\u73fe\u5728\u306eUbuntu\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b","text":"<pre><code>cat /etc/os-release | grep \"VERSION=\" # (1)!\n</code></pre> <ol> <li>22.04\u306f\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u30b3\u30de\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u5f8c\u3001ENTER\u3067\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ol> <p>VERSION=\"22.04.x LTS (Jammy Jellyfish)\"\u3000x\u306e\u6570\u5b57\u306f\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u6642\u671f\u306b\u3088\u3063\u3066\u5909\u308f\u308a\u307e\u3059</p>"},{"location":"operation/ubuntu22/#3-2off","title":"3-2.\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9OFF","text":"<pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre>"},{"location":"operation/ubuntu22/#3-3ssh","title":"3-3.SSH\u518d\u63a5\u7d9a","text":"<pre><code>exit\n</code></pre> <p>SSH\u3067\u518d\u63a5\u7d9a\u3059\u308b</p>"},{"location":"operation/ubuntu22/#4","title":"4.\u4f9d\u5b58\u95a2\u4fc2\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 <pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre></p> \u30ea\u30ec\u30fc\u306e\u5834\u5408BP\u306e\u5834\u5408 <pre><code>sudo apt install needrestart git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre> <p><pre><code>sudo apt install needrestart git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre> <pre><code>pip install discordwebhook python-dotenv slackweb\n</code></pre></p> <p>\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u81ea\u52d5\u5316 <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p> <p>\u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316 <pre><code>sudo systemctl enable cardano-node\n</code></pre></p> <p>\u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307fHaskell\u30d1\u30c3\u30b1\u30fc\u30b8\u524a\u9664 <pre><code>cd ~/.cabal/store\nrm -rf ghc-8.10.7\n</code></pre></p> <p>SSH\u3067\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3092\u5b9f\u65bd\u3057\u305f\u5834\u5408</p> <p>1022\u30dd\u30fc\u30c8\u3092\u524a\u9664\u3059\u308b\uff08AWS\u3084IONOS\u306a\u3069\u306fVPS\u306e\u30b5\u30fc\u30d0\u30fc\u7ba1\u7406\u753b\u9762\u304b\u3089\uff09 <pre><code>sudo ufw deny 1022/tcp\nsudo ufw reload\n</code></pre></p>"},{"location":"operation/ubuntu22/#5","title":"5. \u30ce\u30fc\u30c9\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u65e2\u5b58\u306e\u30ce\u30fc\u30c9\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u4f5c\u696d\u5185\u5bb9\u304c\u7570\u306a\u308a\u307e\u3059\u3002</p> <p>\u65e2\u5b58\u30ce\u30fc\u30c98.9.4\u4ee5\u4e0b\u306e\u5834\u5408</p> <p>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u5168\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u65e2\u5b58\u30ce\u30fc\u30c99.1.0\u306e\u5834\u5408</p> <p>\u30ce\u30fc\u30c9\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30de\u30cb\u30e5\u30a2\u30eb 1-1\u30011-2\u30012-1\u30012-2\u3092\u5b9f\u65bd</p>"},{"location":"operation/ubuntu22/#6","title":"6. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":""},{"location":"operation/ubuntu22/#6-1","title":"6-1. \u4e8b\u524d\u6e96\u5099","text":"<ul> <li> 6-1-1.Ubuntu\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u4e3b\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u89e3\u9664\u3059\u308b</li> </ul> <pre><code>cd $NODE_HOME\nchmod 700 payment.vkey\nchmod 700 payment.skey\nchmod 700 stake.vkey\nchmod 700 stake.skey\nchmod 700 stake.addr\nchmod 700 payment.addr\nchmod u+rwx $HOME/cold-keys\n</code></pre> <ul> <li> <p> 6-1-2.\u4ee5\u4e0b\u30d5\u30a9\u30eb\u30c0\u5185\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5916\u90e8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u9000\u907f\u3055\u305b\u308b</p> </li> <li> <p>/home/user/cnode (user\u306f\u5404\u81ea\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d)</p> </li> <li> <p>/home/cold-keys</p> </li> <li> <p> 6-1-3.\u9000\u907f\u3055\u305b\u305f\u3089\u3001\u4e0a\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3059\u3079\u3066\u524a\u9664\u3059\u308b (\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d5\u30a9\u30eb\u30c0\u306f\u6b8b\u3057\u3066\u4e0b\u3055\u3044)</p> </li> <li> <p> 6-1-4.Ubuntu\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3(\u96fb\u6e90\u30aa\u30d5)\u3059\u308b</p> </li> </ul>"},{"location":"operation/ubuntu22/#6-2-virtualbox","title":"6-2. VirtualBox\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<p>VirtualBox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001<code>VirtualBox 7.0.8 platform packages</code>\u306e<code>Windows hosts</code>\u307e\u305f\u306f<code>macOS</code>\u306e\u30ea\u30f3\u30af\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u65e2\u5b58\u306eVirtuialBox\u306b\u5bfe\u3057\u3066\u4e0a\u66f8\u304d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044</p> <ul> <li>VirtualBox\u306e\u5165\u624b</li> </ul>"},{"location":"operation/ubuntu22/#6-3","title":"6-3. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8","text":"<ul> <li> <p> 6-3-1.VirtualBox\u306e\u30de\u30b7\u30f3\u8a2d\u5b9a\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6709\u52b9\u306b\u3059\u308b </p> </li> <li> <p> 6-3-2.Ubuntu\u3092\u8d77\u52d5\u3059\u308b</p> </li> <li> <p> 6-3-3.\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u78ba\u8a8d\u3059\u308b</p> </li> </ul> <pre><code>df -h /root\n</code></pre> <p>Avail\u306e\u5024\u304c10G\u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <ul> <li> <p> Ubuntu\u8a2d\u5b9a\u304b\u3089\u300c\u96fb\u6e90\u7ba1\u7406\u300d\u2192\u300c\u30d6\u30e9\u30f3\u30af\u30b9\u30af\u30ea\u30fc\u30f3\u300d\u2192\u300c\u3057\u306a\u3044\u300d\u306b\u8a2d\u5b9a </p> </li> <li> <p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>soft</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3068\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8]\u3092\u8d77\u52d5 </p> </li> <li> <p> [\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8]\u30bf\u30d6\u306e\u9577\u671f\u30b5\u30dd\u30fc\u30c8(LTS)\u7248\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u9589\u3058\u308b </p> </li> <li> <p> \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>update</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u66f4\u65b0]\u3092\u8d77\u52d5 </p> </li> <li> <p> \u300c\u4eca\u3059\u3050\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002 </p> </li> <li> <p> \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u518d\u8d77\u52d5\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u518d\u8d77\u52d5\u3059\u308b\u3002</p> </li> </ul>"},{"location":"operation/ubuntu22/#6-4-ubuntu","title":"6-4. Ubuntu\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<ul> <li> <p> 6-4-1.\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u304b\u3089<code>update</code>\u3068\u691c\u7d22\u3057\u3001[\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u66f4\u65b0]\u3092\u8d77\u52d5 </p> </li> <li> <p> 6-4-2.\u300c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> </ul> <p>\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9</p> <p>\u8868\u793a\u3055\u308c\u305f\u5185\u5bb9\u306b\u6cbf\u3063\u3066\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306b\u306f\u6570\u5341\u5206\u304b\u304b\u308a\u307e\u3059\u3002</p> <ul> <li> 6-4-3.\u51e6\u7406\u304c\u9032\u3080\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002 </li> </ul> <p></p> <ul> <li> <p> 6-4-4.FireFox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u753b\u50cf\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u300cNEXT\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> <li> <p> 6-4-5.\u66f4\u306b\u51e6\u7406\u304c\u9032\u307f\u3001\u30b5\u30dd\u30fc\u30c8\u5916\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3057\u307e\u3059 </p> </li> </ul>"},{"location":"operation/ubuntu22/#6-5-guestaddtions","title":"6-5. GuestAddtions\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9","text":"<ul> <li> 6-5-1.GuestAddtions\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b </li> </ul> <ul> <li> 6-5-2.Ubuntu\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3(\u96fb\u6e90\u30aa\u30d5)\u3059\u308b</li> </ul>"},{"location":"operation/ubuntu22/#6-6","title":"6-6. \u6700\u7d42\u4ed5\u4e0a\u3052","text":"<ul> <li> <p> 6-6-1.\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30aa\u30d5 </p> </li> <li> <p> 6-6-2.Ubuntu\u3092\u8d77\u52d5\u3059\u308b</p> </li> <li> <p> 6-6-3.\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9OFF</p> </li> </ul> <pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre> <ul> <li> <p> 6-6-4.\u9000\u907f\u3057\u305f\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u3092<code>cnode</code>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u623b\u3059</p> </li> <li> <p> 6-6-5.\u623b\u3057\u305f\u4e3b\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650</p> </li> </ul> <pre><code>cd $NODE_HOME\nchmod 400 payment.vkey\nchmod 400 payment.skey\nchmod 400 stake.vkey\nchmod 400 stake.skey\nchmod 400 stake.addr\nchmod 400 payment.addr\nchmod a-rwx $HOME/cold-keys\n</code></pre> <ul> <li> 6-6-6.Ubuntu22.04\u3067\u518d\u30d3\u30eb\u30c9\u3057\u305fcardano-cli\u3092\u30b3\u30d4\u30fc\u3059\u308b(\u53c2\u8003\u624b\u9806)</li> </ul>"},{"location":"operation/withdrawal/","title":"\u8cc7\u91d1\u5f15\u304d\u51fa\u3057","text":""},{"location":"operation/withdrawal/#1-stakeaddr","title":"1 stake.addr\u304b\u3089\u306e\u5f15\u304d\u51fa\u3057","text":"<p>\u6982\u8981</p> <ul> <li>\u5831\u916c\u306f <code>stake.addr</code> \u30a2\u30c9\u30ec\u30b9\u306b\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002  </li> <li>1\u56de\u306e\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3067\u5f15\u304d\u51fa\u305b\u308b\u91d1\u984d\u306f\u6b8b\u9ad8\u5168\u984d\u306e\u307f\u3067\u3059\u3002 (\u5206\u5272\u3057\u3066\u5f15\u304d\u51fa\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093)  </li> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306fpayment.addr\u304b\u3089\u5f15\u304d\u843d\u3068\u3055\u308c\u307e\u3059\u3002</li> </ul> <p>1-1 payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5\u306f\u3053\u3061\u3089</p> <p>1-2 \u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5\u306f\u3053\u3061\u3089</p> <p>\u6ce8\u610f</p> <p>\u5165\u529b\u30df\u30b9\u306a\u3069\u3067\u9001\u91d1\u304c\u5931\u6557\u3057\u3066\u3082\u8cac\u4efb\u306f\u8ca0\u3048\u307e\u305b\u3093\u3002\u81ea\u5df1\u8cac\u4efb\u306e\u3082\u3068\u5b9f\u65bd\u4e0b\u3055\u3044\u3002 payment.skey\u3068stake.skey\u306f\u5fc5\u305a\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u4fdd\u7ba1\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p>"},{"location":"operation/withdrawal/#1-1-paymentaddr","title":"1-1 payment.addr\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5","text":"<p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nrewardBalance=$(cardano-cli conway query stake-address-info \\\n    $NODE_NETWORK \\\n    --address $(cat stake.addr) | jq -r \".[0].rewardAccountBalance\")\necho rewardBalance: $rewardBalance\n</code></pre> <p>1 ADA = 1,000,000 lovelace.\u3068\u899a\u3048\u307e\u3057\u3087\u3046  </p> <p>\u5831\u916c\u306e\u79fb\u52d5\u5148\u3068\u306a\u308bpayment.addr\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002payment.addr\u306b\u306f\u53d6\u5f15\u624b\u6570\u6599\u3092\u652f\u6255\u3046\u305f\u3081\u306e\u6b8b\u9ad8\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>destinationAddress=$(cat payment.addr)\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\nwithdrawalString=\"$(cat stake.addr)+${rewardBalance}\"\ntempRewardAmount=$(( ${total_balance}+${rewardBalance} ))\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${tempRewardAmount} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.tmp\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}+${rewardBalance}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u652f\u6255\u3044\u3068\u30b9\u30c6\u30fc\u30af\u306e\u79d8\u5bc6\u9375\u306e\u4e21\u65b9\u3092\u4f7f\u7528\u3057\u3066\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>\u8cc7\u91d1\u304c\u5230\u7740\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address ${destinationAddress} \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u66f4\u65b0\u3055\u308c\u305f\u30e9\u30d6\u30ec\u30fc\u30b9\u306e\u6b8b\u9ad8\u3068\u5831\u916c\u3092\u8868\u793a\u3057\u307e\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....  \n</code></pre>"},{"location":"operation/withdrawal/#1-2","title":"1-2 \u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u91d1\u3059\u308b\u65b9\u6cd5","text":"<p>\u73fe\u5728\u306e\u30b9\u30ed\u30c3\u30c8No\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>currentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>\u5165\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u5165\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b\necho destinationAddress: $destinationAddress\n</code></pre> <p>\u5831\u916c\u30a2\u30c9\u30ec\u30b9\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nrewardBalance=$(cardano-cli conway query stake-address-info \\\n    $NODE_NETWORK \\\n    --address $(cat stake.addr) | jq -r \".[0].rewardAccountBalance\")\necho rewardBalance: $rewardBalance\n</code></pre> <p>payment.addr \u306e\u6b8b\u9ad8\u3092\u7b97\u51fa</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\nwithdrawalString=\"$(cat stake.addr)+${rewardBalance}\"\necho ${withdrawalString}\n</code></pre> <p>build-raw transaction\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${total_balance} \\\n    --tx-out ${destinationAddress}+${rewardBalance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.tmp\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u6599\u91d1\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u5909\u66f4\u51fa\u529b\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --tx-out ${destinationAddress}+${rewardBalance} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --withdrawal ${withdrawalString} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u652f\u6255\u3044\u3068\u30b9\u30c6\u30fc\u30af\u306e\u79d8\u5bc6\u9375\u306e\u4e21\u65b9\u3092\u4f7f\u7528\u3057\u3066\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092 \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u8cc7\u91d1\u304c\u5230\u7740\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address ${destinationAddress} \\\n    $NODE_NETWORK\n</code></pre> <p>\u66f4\u65b0\u3055\u308c\u305f\u30e9\u30d6\u30ec\u30fc\u30b9\u306e\u6b8b\u9ad8\u3068\u5831\u916c\u3092\u8868\u793a\u3057\u307e\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....  \n</code></pre>"},{"location":"operation/withdrawal/#2-paymentaddr","title":"2 Payment.addr\u304b\u3089\u306e\u5f15\u304d\u51fa\u3057","text":"<p>\u6982\u8981</p> <p>payment.addr\u304b\u3089\u4efb\u610f\u306e\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3059\u308b\u4f8b\u3067\u3059</p> <p>\u6ce8\u610f</p> <ul> <li>\u5165\u529b\u30df\u30b9\u306a\u3069\u3067\u9001\u91d1\u304c\u5931\u6557\u3057\u3066\u3082\u8cac\u4efb\u306f\u8ca0\u3048\u307e\u305b\u3093\u3002\u81ea\u5df1\u8cac\u4efb\u306e\u3082\u3068\u5b9f\u65bd\u4e0b\u3055\u3044\u3002  </li> <li>\u5ba3\u8a00\u3057\u305f\u8a93\u7d04(Pledge)\u5206\u307e\u3067\u5f15\u304d\u51fa\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u30d7\u30fc\u30eb\u5831\u916c\u304c\u30bc\u30ed\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044</li> <li>payment.skey\u3068stake.skey\u306f\u5fc5\u305a\u30aa\u30d5\u30e9\u30a4\u30f3\u74b0\u5883\u3067\u4fdd\u7ba1\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </li> </ul> <p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>lovelace\u5f62\u5f0f\u3067\u9001\u4fe1\u3059\u308b\u91d1\u984d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u30021 ADA = 1,000,000 lovelace \u3067\u899a\u3048\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>amountToSend=10000000\necho amountToSend: $amountToSend\n</code></pre> <p>\u9001\u91d1\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>destinationAddress=\u9001\u91d1\u5148\u30a2\u30c9\u30ec\u30b9\necho destinationAddress: $destinationAddress\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr | sed -e '/lovelace + [0-9]/d' &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n\ntempBalanceAmont=$(( ${total_balance}-${amountToSend} ))\n</code></pre> <p>build-raw\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${tempBalanceAmont} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 1 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${fee}-${amountToSend}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --tx-out ${destinationAddress}+${amountToSend} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>tx.signed \u3092\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306e<code>tx.signed</code> \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p> <p>\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address ${destinationAddress} \\\n    $NODE_NETWORK \\\n</code></pre> <p>\u5148\u7a0b\u6307\u5b9a\u3057\u305f\u91d1\u984d\u3068\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3044\u3067\u3059\u3002</p> <pre><code>                           TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....                                              0        10000000\n</code></pre>"},{"location":"setup/1-ubuntu-setup/","title":"1.Ubuntu\u521d\u671f\u8a2d\u5b9a","text":"<p>AWS\u3092\u3054\u5229\u7528\u306e\u65b9</p> <p>AWS EC2\u53ca\u3073lightsail\u306f\u7279\u6b8a\u74b0\u5883\u306a\u305f\u3081\u3001\u3053\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u901a\u308a\u306b\u52d5\u304b\u306a\u3044\u5834\u5408\u304c\u3054\u3056\u3044\u307e\u3059\u3002 \u4e0d\u660e\u306a\u70b9\u306fGuild\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u8cea\u554f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d2\u30f3\u30c8</p> <p>\u3053\u306e\u624b\u9806\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3(VirtualBox\u4e0a\u306eUbuntu)\u3067\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093</p>"},{"location":"setup/1-ubuntu-setup/#1-1","title":"1-1.\u30aa\u30b9\u30b9\u30e1\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8","text":"<p>1.R-Login(Windows)  https://kmiya-culti.github.io/RLogin/ </p> <p>\u63a5\u7d9a\u72b6\u614b\u7dad\u6301\u306e\u305f\u3081\u306e\u8a2d\u5b9a</p> <p>R-Login\u4f7f\u7528\u306e\u969b\u306f\u3001\u672a\u64cd\u4f5c\u6642\u306e\u63a5\u7d9a\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002 </p> <p>2.Terminal(Mac) https://www.webdesignleaves.com/pr/plugins/mac_terminal_basics_01.html </p>"},{"location":"setup/1-ubuntu-setup/#1-2","title":"1-2.\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210","text":"<p>\u30d2\u30f3\u30c8</p> <p>root\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u30b5\u30fc\u30d0\u30fc\u306e\u6700\u4e0a\u4f4d\u6a29\u9650\u3067\u3059\u3002 \u30b5\u30fc\u30d0\u3092\u64cd\u4f5c\u3059\u308b\u5834\u5408\u306froot\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u7528\u305b\u305a\u3001root\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u64cd\u4f5c\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002</p> <p>\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\u3000(\u4f8b\uff1acardano)</p> <p>1.\u4e0a\u8a18\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u3092\u4f7f\u7528\u3057\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u521d\u671f\u30a2\u30ab\u30a6\u30f3\u30c8(root\u306a\u3069)\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002  </p> <p>2.\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u308b(\u4efb\u610f\u306e\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u6587\u5b57)  </p> <pre><code>adduser cardano\n</code></pre> <pre><code>New password:           # \u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nRetype new password:    # \u78ba\u8a8d\u518d\u5165\u529b\n\nEnter the new value, or press ENTER for the default\n        Full Name []:   # \u30d5\u30eb\u30cd\u30fc\u30e0\u7b49\u306e\u60c5\u5831\u3092\u8a2d\u5b9a (\u4e0d\u8981\u3067\u3042\u308c\u3070\u30d6\u30e9\u30f3\u30af\u3067\u3082 OK)\n        Room Number []:\n        Work Phone []:\n        Home Phone []:\n        Other []:\nIs the information correct? [Y/n]:y\n</code></pre> <p>cardano\u3092sudo\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3059\u308b</p> <pre><code>usermod -G sudo cardano\n</code></pre> <p>root\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b</p> <pre><code>exit\n</code></pre> <p>3.\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u66f8\u304d\u63db\u3048\u3066\u518d\u63a5\u7d9a\u3057\u307e\u3059\u3002</p> <p>Ubuntu22.04\u306e\u5834\u5408\u306e\u7279\u5225\u8a2d\u5b9a</p> <p>\u3054\u5229\u7528\u306eOS\u304cUbuntu22.04\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d6\u30e9\u30b1\u30c3\u30c8\u30da\u30fc\u30b9\u30c8\u30e2\u30fc\u30c9OFF <pre><code>echo \"set enable-bracketed-paste off\" &gt;&gt; ~/.inputrc\n</code></pre></p> <p>\u30c7\u30fc\u30e2\u30f3\u518d\u8d77\u52d5\u81ea\u52d5\u5316 <pre><code>echo \"\\$nrconf{restart} = 'a';\" | sudo tee /etc/needrestart/conf.d/50local.conf\n</code></pre> <pre><code>echo \"\\$nrconf{blacklist_rc} = [qr(^cardano-node\\\\.service$) =&gt; 0,];\" | sudo tee -a /etc/needrestart/conf.d/50local.conf\n</code></pre></p>"},{"location":"setup/1-ubuntu-setup/#1-3ssh","title":"1-3.SSH\u9375\u8a8d\u8a3c\u65b9\u5f0f\u3078\u5207\u308a\u66ff\u3048","text":"<p>Summary</p> <p>SSH\u3092\u5f37\u5316\u3059\u308b\u57fa\u672c\u7684\u306a\u30eb\u30fc\u30eb\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002</p> <ul> <li>SSH\u30ed\u30b0\u30a4\u30f3\u6642\u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u52b9\u5316 (\u79d8\u5bc6\u9375\u3092\u4f7f\u7528)</li> <li>SSH\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30fc\u30c8(22)\u306e\u5909\u66f4</li> <li>root\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u306eSSH\u30ed\u30b0\u30a4\u30f3\u7121\u52b9\u5316 (root\u6a29\u9650\u304c\u5fc5\u8981\u306a\u30b3\u30de\u30f3\u30c9\u306f<code>su</code> or <code>sudo</code>\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046)</li> <li>\u8a31\u53ef\u3055\u308c\u3066\u3044\u306a\u3044\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u306e\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u3092\u30ed\u30b0\u306b\u8a18\u9332\u3059\u308b (fail2ban\u306a\u3069\u306e\u3001\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u3092\u30d6\u30ed\u30c3\u30af\u307e\u305f\u306f\u7981\u6b62\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u5c0e\u5165\u3092\u691c\u8a0e\u3059\u308b)</li> <li>SSH\u30ed\u30b0\u30a4\u30f3\u5143\u306eIP\u30a2\u30c9\u30ec\u30b9\u7bc4\u56f2\u306e\u307f\u306b\u9650\u5b9a\u3059\u308b (\u5e0c\u671b\u3059\u308b\u5834\u5408\u306e\u307f)\u203b\u5229\u7528\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u306b\u3088\u3063\u3066\u306f\u3001\u5b9a\u671f\u7684\u306b\u30b0\u30ed\u30fc\u30d0\u30ebIP\u304c\u5909\u66f4\u3055\u308c\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981</li> </ul> <p>\u30da\u30a2\u9375\u306e\u4f5c\u6210</p> <pre><code>ssh-keygen -t ed25519 -N '' -C ssh_connect -f ~/.ssh/ssh_ed25519\n</code></pre> <p><pre><code>cd ~/.ssh\nls\n</code></pre> ssh_ed25519\uff08\u79d8\u5bc6\u9375\uff09\u3068ssh_ed25519.pub\uff08\u516c\u958b\u9375\uff09\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002</p> <pre><code>cd ~/.ssh/\ncat ssh_ed25519.pub &gt;&gt; authorized_keys\nchmod 600 authorized_keys\nchmod 700 ~/.ssh\n</code></pre> <p>SSH\u9375\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b </p> <p>1.R-login\u306e\u5834\u5408\u306f\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u958b\u304f 2.\u5de6\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30ed\u30fc\u30ab\u30eb\u5074)\u306f\u4efb\u610f\u306e\u968e\u5c64\u306b\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3059\u308b\u3002 3.\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6(\u30b5\u30fc\u30d0\u5074)\u306f\u300c.ssh\u300d\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b 4.\u53f3\u5074\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089\u3001ssh_ed25519\u3068ssh_ed25519.pub\u306e\u4e0a\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u9078\u629e\u3059\u308b 5.\u4e00\u65e6\u30b5\u30fc\u30d0\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b 6.R-Login\u306e\u30b5\u30fc\u30d0\u63a5\u7d9a\u7de8\u96c6\u753b\u9762\u3092\u958b\u304d\u3001\u300cSSH\u8a8d\u8a3c\u9375\u300d\u3092\u30af\u30ea\u30c3\u30af\u30574\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fssh_ed25519\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3076 7.\u30b5\u30fc\u30d0\u3078\u63a5\u7d9a\u3059\u308b  </p> <p>SSH\u306e\u8a2d\u5b9a\u5909\u66f4</p> <p><code>/etc/ssh/sshd_config</code>\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> <p>ResponseAuthentication\u306e\u9805\u76ee\u3092\u300cno\u300d\u306b\u3057\u307e\u3059\u3002</p> Ubuntu20.04\u306e\u5834\u5408Ubuntu22.04\u306e\u5834\u5408 <pre><code>ChallengeResponseAuthentication no\n</code></pre> <pre><code>KbdInteractiveAuthentication no\n</code></pre> <p>PasswordAuthentication\u306e\u9805\u76ee\u3092\u300cno\u300d\u306b\u3059\u308b</p> <pre><code>PasswordAuthentication no \n</code></pre> <p>PermitRootLogin\u306e\u9805\u76ee\u3092\u300cno\u300d\u306b\u3059\u308b</p> <pre><code>PermitRootLogin no\n</code></pre> <p>PermitEmptyPasswords\u306e\u9805\u76ee\u3092\u300cno\u300d\u306b\u3059\u308b</p> <pre><code>PermitEmptyPasswords no\n</code></pre> <p>SSH\u30dd\u30fc\u30c8\u306e\u30d2\u30f3\u30c8</p> <p>SSH\u30dd\u30fc\u30c8\u306f\u4e16\u754c\u6a19\u6e96\u306722\u756a\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3059\u3002 \u3057\u304b\u3057\u3001\u30dd\u30fc\u30c8\u30a2\u30bf\u30c3\u30af\u306e\u6a19\u7684\u3068\u306a\u308a\u5f97\u308b\u305f\u3081\u4efb\u610f\u306e\u756a\u53f7\u3078\u5909\u66f4\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u3066\u3044\u307e\u3059\u3002\u4efb\u610f\u306e\u756a\u53f7\u306f49513\uff5e65535\u307e\u3067\u306e\u6570\u5b57\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>SSH\u30dd\u30fc\u30c8\u3092\u4efb\u610f\u306e\u756a\u53f7\u3078\u5909\u66f4\u3059\u308b\u3002\u5148\u982d\u306e#\u3092\u524a\u9664\u3057\u3066\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>Port xxxxx\n</code></pre></p> <p>Ctrl+O \u3067\u4fdd\u5b58\u3057\u3001Ctrl+X\u3067\u9589\u3058\u308b</p> <p>SSH\u69cb\u6587\u306b\u30a8\u30e9\u30fc\u304c\u306a\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002</p> <pre><code>sudo sshd -t\n</code></pre> <p>SSH\u69cb\u6587\u30a8\u30e9\u30fc\u304c\u306a\u3044\u5834\u5408\u3001SSH\u30d7\u30ed\u30bb\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo service sshd reload\n</code></pre> <p>\u63a5\u7d9a\u3057\u305f\u307e\u307e\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u3092\u3082\u3046\u4e00\u3064\u8d77\u52d5\u3059\u308b\u3002</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u30bd\u30d5\u30c8\u8a2d\u5b9a\u306b\u3064\u3044\u3066</p> <p>\u63a5\u7d9a\u8a2d\u5b9a\u306eSSH\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u79d8\u5bc6\u9375\u3092\u8a2d\u5b9a\u3057\u30b5\u30fc\u30d0\u30fc\u3078\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002 \u63a5\u7d9a\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001\u63a5\u7d9a\u3055\u308c\u3066\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3067\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002</p>"},{"location":"setup/1-ubuntu-setup/#1-4","title":"1-4.\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u6709\u52b9\u5316","text":"<p>\u6a19\u6e96\u306eUFW\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u30a2\u30af\u30bb\u30b9\u30dd\u30fc\u30c8\u3092\u9650\u5b9a\u3057\u307e\u3059\u3002</p> \u8a2d\u5b9a\u524d\u306e\u6ce8\u610f\u4e8b\u9805 <p>\u3054\u5229\u7528\u306eVPS\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u304b\u3089FW\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff08\u4f8bAWS\u7cfb\u306a\u3069\uff09 \u305d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u308f\u305a\u3001VPS\u30de\u30a4\u30da\u30fc\u30b8\u7ba1\u7406\u753b\u9762\u306a\u3069\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> \u3055\u304f\u3089VPS\u3092\u3054\u5229\u7528\u306e\u5834\u5408 <p>\u7ba1\u7406\u753b\u9762\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u3001\u201d\u5229\u7528\u3057\u306a\u3044\u201d\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002    </p> <p>SSH\u30dd\u30fc\u30c8\u3092\u8a31\u53ef\u3059\u308b  </p> <pre><code>PORT=`grep \"Port\" /etc/ssh/sshd_config`\ns_PORT=${PORT#\"Port\"}\nssh_PORT=`echo ${s_PORT} | sed -e 's/[^0-9]//g'`\necho ${ssh_PORT}\n</code></pre> <p><pre><code>sudo ufw allow ${ssh_PORT}/tcp\n</code></pre> FW\u3092\u6709\u52b9\u5316 <pre><code>sudo ufw enable\n</code></pre> \u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089 <code>y</code> \u3092\u5165\u529b\u3057\u3066 <code>Enter</code></p> <p>Command may disrupt existing ssh connections. Proceed with operation (y|n)? y</p> <p>\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d <pre><code>sudo ufw status\n</code></pre> \u4ee5\u4e0b\u306e\u623b\u308a\u5024\u304c\u3042\u308c\u3070OK</p> <p>Status: active</p>"},{"location":"setup/1-ubuntu-setup/#1-5","title":"1-5.\u30b7\u30b9\u30c6\u30e0\u3092\u66f4\u65b0\u3059\u308b","text":"<p>\u91cd\u8981</p> <p>\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u3092\u4e88\u9632\u3059\u308b\u306b\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306b\u6700\u65b0\u306e\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3067\u3059\u3002</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\nsudo apt autoremove\nsudo apt autoclean\n</code></pre> <p>\u81ea\u52d5\u66f4\u65b0\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u624b\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9593\u3092\u7701\u3051\u307e\u3059\u3002</p> <p><code>YES</code>\u3092\u9078\u629e\u3057Enter</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo apt install unattended-upgrades\nsudo dpkg-reconfigure --priority=low unattended-upgrades\n</code></pre>"},{"location":"setup/1-ubuntu-setup/#1-6root","title":"1-6.root\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7121\u52b9\u306b\u3059\u308b","text":"<p>\u30b5\u30fc\u30d0\u30fc\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u7dad\u6301\u3059\u308b\u305f\u3081\u306b\u3001\u983b\u7e41\u306broot\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</p> <p>\u901a\u5e38\u306froot\u30a2\u30ab\u30a6\u30f3\u30c8\u7121\u52b9\u306b\u3057\u307e\u3059</p> <pre><code>sudo passwd -l root\n</code></pre> <p># \u4f55\u3089\u304b\u306e\u7406\u7531\u3067root\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306f\u3001-u\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <pre><code>sudo passwd -u root\n</code></pre>"},{"location":"setup/1-ubuntu-setup/#1-7","title":"1-7.\u5b89\u5168\u306a\u5171\u6709\u30e1\u30e2\u30ea\u30fc","text":"<p>\u30b7\u30b9\u30c6\u30e0\u3067\u5171\u6709\u3055\u308c\u308b\u30e1\u30e2\u30ea\u3092\u4fdd\u8b77\u3057\u307e\u3059\u3002</p> <p><code>/etc/fstab</code>\u3092\u958b\u304d\u307e\u3059</p> <pre><code>sudo nano /etc/fstab\n</code></pre> <p>\u6b21\u306e\u884c\u3092\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306b\u8ffd\u8a18\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> <pre><code>tmpfs   /run/shm    tmpfs   ro,noexec,nosuid    0 0\n</code></pre>"},{"location":"setup/1-ubuntu-setup/#1-8fail2ban","title":"1-8.Fail2ban\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>Fail2ban\u306f\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u76e3\u8996\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u8a66\u884c\u306b\u5931\u6557\u3057\u305f\u7279\u5b9a\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u76e3\u8996\u3059\u308b\u4fb5\u5165\u9632\u6b62\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\uff08\u6307\u5b9a\u3055\u308c\u305f\u6642\u9593\u5185\u306b\uff09\u4e00\u5b9a\u6570\u306e\u30ed\u30b0\u30a4\u30f3\u5931\u6557\u304c\u691c\u77e5\u3055\u308c\u305f\u5834\u5408\u3001Fail2ban\u306f\u305d\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3059\u3002</p> <pre><code>sudo apt install fail2ban -y\n</code></pre> <p>SSH\u30ed\u30b0\u30a4\u30f3\u3092\u76e3\u8996\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002</p> <pre><code>sudo nano /etc/fail2ban/jail.local\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u5f8c\u306b\u6b21\u306e\u884c\u3092\u8ffd\u52a0\u3057\u4fdd\u5b58\u3057\u307e\u3059\u3002</p> <p>\u30b3\u30de\u30f3\u30c9\u4e2d\u306e (SSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044) \u306b\u3064\u3044\u3066\u306f1-3\u3067\u8a2d\u5b9a\u3057\u305fSSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002()\u306f\u4e0d\u8981\u3067\u3059\u3002</p> <pre><code>[sshd]\nenabled = true\nport = (SSH\u30dd\u30fc\u30c8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044)\nfilter = sshd\nlogpath = /var/log/auth.log\nmaxretry = 3\n</code></pre> <p>fail2ban\u3092\u518d\u8d77\u52d5\u3057\u3066\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl restart fail2ban\n</code></pre>"},{"location":"setup/1-ubuntu-setup/#1-9chrony","title":"1-9.Chrony\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>chrony\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <pre><code>sudo apt install chrony\n</code></pre> <p>/etc/chrony/chrony.conf \u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $HOME/chrony.conf &lt;&lt; EOF\npool time.google.com       iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.facebook.com     iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.euro.apple.com   iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool time.apple.com        iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\npool ntp.ubuntu.com        iburst minpoll 2 maxpoll 2 maxsources 3 maxdelay 0.3\n\n# This directive specify the location of the file containing ID/key pairs for\n# NTP authentication.\nkeyfile /etc/chrony/chrony.keys\n\n# This directive specify the file into which chronyd will store the rate\n# information.\ndriftfile /var/lib/chrony/chrony.drift\n\n# Uncomment the following line to turn logging on.\n#log tracking measurements statistics\n\n# Log files location.\nlogdir /var/log/chrony\n\n# Stop bad estimates upsetting machine clock.\nmaxupdateskew 5.0\n\n# This directive enables kernel synchronisation (every 11 minutes) of the\n# real-time clock. Note that it can\u2019t be used along with the 'rtcfile' directive.\nrtcsync\n\n# Step the system clock instead of slewing it if the adjustment is larger than\n# one second, but only in the first three clock updates.\nmakestep 0.1 -1\n\n# Get TAI-UTC offset and leap seconds from the system tz database\nleapsectz right/UTC\n\n# Serve time even if not synchronized to a time source.\nlocal stratum 10\nEOF\n</code></pre> <p>\u4f5c\u6210\u3057\u305fchrony.conf\u3092/etc/chrony/chrony.conf\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo mv $HOME/chrony.conf /etc/chrony/chrony.conf\n</code></pre></p> <p>UFW\u3067\u4ee5\u4e0b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 <pre><code>sudo ufw allow 123/udp\n</code></pre></p> <p>\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001Chrony\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl reload-or-restart chronyd.service\n</code></pre> <p>\u30d8\u30eb\u30d7\u30b3\u30de\u30f3\u30c9</p> <p>\u540c\u671f\u30c7\u30fc\u30bf\u306e\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <pre><code>chronyc sources\n</code></pre> <p>\u73fe\u5728\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002</p> <pre><code>chronyc tracking\n</code></pre>"},{"location":"setup/1-ubuntu-setup/#1-10ssh2","title":"1-10.SSH\u306e2\u6bb5\u968e\u8a8d\u8a3c\u3092\u8a2d\u5b9a\u3059\u308b","text":"<p>\u6ce8\u610f</p> <ul> <li> <p>\u3053\u3061\u3089\u306e\u5c0e\u5165\u306f\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5c0e\u5165\u3059\u308b\u5834\u5408\u3001\u4e8b\u524d\u306b\u304a\u624b\u5143\u306e\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u306b\u300cGoogle\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u30a2\u30d7\u30ea\u300d\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059</p> </li> <li> <p>\u8a2d\u5b9a\u306b\u5931\u6557\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u308b\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u3001\u8a2d\u5b9a\u524d\u306b\u4e8c\u3064\u76ee\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u4e07\u304c\u4e00\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u5834\u5408\u3001\u5fa9\u65e7\u3067\u304d\u307e\u3059\u3002</p> </li> </ul> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo apt update\nsudo apt upgrade\nsudo apt install libpam-google-authenticator -y\n</code></pre> <p>SSH\u304cGoogle Authenticator PAM \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u3001<code>/etc/pam.d/sshd</code>\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002</p> <pre><code>sudo nano /etc/pam.d/sshd \n</code></pre> <p>4\u884c\u76ee\u306e <code>@include common-auth</code>\u306e\u5148\u982d\u3078#\u3092\u4ed8\u4e0e\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\u3002 <pre><code>#@include common-auth\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <pre><code>auth required pam_google_authenticator.so\n</code></pre> <p>\u4ee5\u4e0b\u3092\u4f7f\u7528\u3057\u3066<code>sshd</code>\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl restart sshd.service\n</code></pre> <p><code>/etc/ssh/sshd_config</code> \u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u307e\u3059\u3002</p> <pre><code>sudo nano /etc/ssh/sshd_config\n</code></pre> <p>ResponseAuthentication\u306e\u9805\u76ee\u3092\u300cyes\u300d\u306b\u3057\u307e\u3059\u3002</p> Ubuntu20.04\u306e\u5834\u5408Ubuntu22.04\u306e\u5834\u5408 <pre><code>ChallengeResponseAuthentication yes\n</code></pre> <pre><code>KbdInteractiveAuthentication yes\n</code></pre> <p>UsePAM\u306e\u9805\u76ee\u3092\u300cyes\u300d\u306b\u3057\u307e\u3059\u3002</p> <pre><code>UsePAM yes\n</code></pre> <p>\u6700\u5f8c\u306e\u884c\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002(SSH\u516c\u958b\u9375\u79d8\u5bc6\u9375\u30ed\u30b0\u30a4\u30f3\u3092\u5229\u7528\u306e\u5834\u5408)</p> <pre><code>AuthenticationMethods publickey,keyboard-interactive\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u3066\u9589\u3058\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u3092\u4f7f\u7528\u3057\u3066<code>sshd</code>\u30c7\u30fc\u30e2\u30f3\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl restart sshd.service\n</code></pre> <p>google-authenticator \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <pre><code>google-authenticator\n</code></pre> <p>\u3044\u304f\u3064\u304b\u8cea\u554f\u4e8b\u9805\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u63a8\u5968\u9805\u76ee\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002</p> <pre><code>Do you want authentication tokens to be time-based (y/n) : y\n</code></pre> <pre><code>Do you want me to update your \n\"/home/cardano/.google_authenticator\" file? (y/n): y\n</code></pre> <pre><code>Do you want to disallow multiple uses of the same authentication\ntoken? This restricts you to one login about every 30s, but it increases\nyour chances to notice or even prevent man-in-the-middle attacks (y/n): y\n</code></pre> <p><pre><code>By default, a new token is generated every 30 seconds by the mobile app.\nIn order to compensate for possible time-skew between the client and the server,\nwe allow an extra token before and after the current time. This allows for a\ntime skew of up to 30 seconds between authentication server and client. If you\nexperience problems with poor time synchronization, you can increase the window\nfrom its default size of 3 permitted codes (one previous code, the current\ncode, the next code) to 17 permitted codes (the 8 previous codes, the current\ncode, and the 8 next codes). This will permit for a time skew of up to 4 minutes\nbetween client and server.\nDo you want to do so? (y/n): n\n</code></pre> <pre><code>If the computer that you are logging into isn't hardened against brute-force\nlogin attempts, you can enable rate-limiting for the authentication module.\nBy default, this limits attackers to no more than 3 login attempts every 30s.\nDo you want to enable rate-limiting? (y/n) : y\n</code></pre></p> <p>\u30d7\u30ed\u30bb\u30b9\u4e2d\u306b\u5927\u304d\u306aQR\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u305d\u306e\u4e0b\u306b\u306f\u7dca\u6025\u6642\u306e\u30b9\u30af\u30e9\u30c3\u30c1\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u5fd8\u308c\u305a\u306b\u66f8\u304d\u7559\u3081\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\u3002</p> <p>\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u3067Google\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u30a2\u30d7\u30ea\u3092\u958b\u304d\u3001QR\u30b3\u30fc\u30c9\u3092\u8aad\u307f\u53d6\u308a2\u6bb5\u968e\u8a8d\u8a3c\u3092\u6a5f\u80fd\u3055\u305b\u307e\u3059\u3002</p>"},{"location":"setup/10-blocklog-setup/","title":"10.\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u5c0e\u5165\u624b\u9806","text":"<p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u306b\u3064\u3044\u3066</p> <p>\u3053\u306e\u30c4\u30fc\u30eb\u306f\u30a6\u30ed\u30dc\u30ed\u30b9\u306b\u304a\u3051\u308b\u81ea\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u4e8b\u524d\u306b\u53d6\u5f97\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002 \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u30d1\u30d6\u30ea\u30c3\u30af\u306b\u306f\u516c\u958b\u3055\u308c\u307e\u305b\u3093\u3002</p>"},{"location":"setup/10-blocklog-setup/#10-0","title":"10-0. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8981\u4ef6","text":"<p>\u8a2d\u5b9a\u30b5\u30fc\u30d0\u30fc</p> <ul> <li>BP\u30ce\u30fc\u30c9\u9650\u5b9a</li> </ul> <p>\u7a3c\u50cd\u8981\u4ef6</p> <ul> <li>\uff14\u3064\u306e\u30b5\u30fc\u30d3\u30b9(\u30d7\u30ed\u30b0\u30e9\u30e0)\u3092systemd\u306b\u3066\u5e38\u99d0\u3055\u305b\u307e\u3059\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u540c\u671f\u7528DB\u3092\u65b0\u3057\u304f\u8a2d\u7f6e\u3057\u307e\u3059(sqlite3)</li> <li>\u65e5\u672c\u8a9e\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306b\u5408\u308f\u305b\u3066\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>vrf.skey \u3068 vrf.vkey\u304c\u5fc5\u8981\u3067\u3059\u3002</li> </ul> <p>\u30d7\u30ed\u30b0\u30e9\u30e0\u69cb\u6210\u56f3</p> <pre><code>    flowchart TB\n        a1[cardano-node] --&gt; a2[log\u30d5\u30a1\u30a4\u30eb]\n        a3 --&gt; a5[leaderlog.service]\n        a3 --&gt; a6[validate.service]\n        a1[cardano-node] --&gt; a3[cncli.service]\n        a2 --&gt; a4[logmonitor.service]\n        a3[cncli.service]\n        a4[logmonitor.service]\n        a5[leaderlog.service]\n        a6[validate.service]\n        subgraph Guild-DB\n            a7[cncli.db]\n            a8[blocklog.db]\n        end\n        subgraph \u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\n            a9[blocknotify] --&gt; \u5404\u30a2\u30d7\u30ea\n        end\n        Guild-DB --&gt; blocks.sh\n        a8[blocklog.db] --&gt; a9[blocknotify]\n        a3[cncli.service] --&gt; a7[cncli.db]\n        a5[leaderlog.service] --&gt; a8[blocklog.db]\n        a6[validate.service] --&gt; a8[blocklog.db]\n</code></pre>"},{"location":"setup/10-blocklog-setup/#10-1-cncli","title":"10-1. CNCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>CNCLI\u306b\u3064\u3044\u3066</p> <p>AndrewWestberg\u3055\u3093\u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u305fCNCLI\u306f\u30d7\u30fc\u30eb\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u7b97\u51fa\u3057\u3001Shelley\u671f\u306b\u304a\u3051\u308bSPO\u306b\u9769\u547d\u3092\u3082\u305f\u3089\u3057\u307e\u3057\u305f\u3002</p> <p>RUST\u74b0\u5883\u3092\u6e96\u5099\u3057\u307e\u3059</p> <pre><code>mkdir $HOME/.cargo &amp;&amp; mkdir $HOME/.cargo/bin\nchown -R $USER $HOME/.cargo\ntouch $HOME/.profile\nchown $USER $HOME/.profile\n</code></pre> <p>rustup\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059-\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u7d9a\u884c\u3057\u307e\u3059\uff08\u30aa\u30d7\u30b7\u30e7\u30f31\uff09 <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre></p> <p>1) Proceed with installation (default)  1\u3092\u5165\u529b\u3057\u3066Enter</p> <pre><code>source $HOME/.cargo/env\nrustup install stable\nrustup default stable\nrustup update\nrustup component add clippy rustfmt\nrustup target add x86_64-unknown-linux-musl\n</code></pre> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059</p> <pre><code>source $HOME/.cargo/env\nsudo apt update -y &amp;&amp; sudo apt install -y automake build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ tmux git jq wget libncursesw5 libtool autoconf musl-tools\n</code></pre> <p>CNCLI\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-gnu.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre></p> <p>CNCLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 <pre><code>cncli --version\n</code></pre></p> <p>6.3.0 \u304c\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059</p>"},{"location":"setup/10-blocklog-setup/#10-2-sqlite3","title":"10-2. sqlite3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>sudo apt install sqlite3\nsqlite3 --version\n</code></pre> <p>3.31.1\u4ee5\u4e0a\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3089OK\u3067\u3059\u3002</p>"},{"location":"setup/10-blocklog-setup/#10-3","title":"10-3. \u4f9d\u5b58\u30d5\u30a1\u30a4\u30eb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>\u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <pre><code>cd $NODE_HOME\nmkdir scripts\ncd $NODE_HOME/scripts\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cncli.sh -O ./cncli.sh\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/env -O ./env\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/gLiveView.sh -O ./gLiveView.sh\nwget https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.library -O ./cntools.library\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/blocks.sh -O ./blocks.sh \nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/logMonitor.sh -q -O ./logMonitor.sh\n</code></pre> <p>\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b <pre><code>chmod 755 cncli.sh\nchmod 755 logMonitor.sh\nchmod 755 gLiveView.sh\nchmod 755 blocks.sh\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b</p> <p>env\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059</p> <p><pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>sed -i $NODE_HOME/scripts/env \\\n  -e '1,73s!#CNODEBIN=\"${HOME}/.local/bin/cardano-node\"!CNODEBIN=\"/usr/local/bin/cardano-node\"!' \\\n  -e '1,73s!#CCLI=\"${HOME}/.local/bin/cardano-cli\"!CCLI=\"/usr/local/bin/cardano-cli\"!' \\\n  -e '1,73s!#CNCLI=\"${HOME}/.local/bin/cncli\"!CNCLI=\"${HOME}/.cargo/bin/cncli\"!' \\\n  -e '1,73s!#CNODE_HOME=\"/opt/cardano/cnode\"!CNODE_HOME='${NODE_HOME}'!' \\\n  -e '1,73s!#CNODE_PORT=6000!CNODE_PORT='${b_PORT}'!' \\\n  -e '1,73s!#UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!' \\\n  -e '1,73s!#CONFIG=\"${CNODE_HOME}/files/config.json\"!CONFIG=\"${CNODE_HOME}/'${NODE_CONFIG}'-config.json\"!' \\\n  -e '1,73s!#SOCKET=\"${CNODE_HOME}/sockets/node.socket\"!SOCKET=\"${CNODE_HOME}/db/socket\"!' \\\n  -e '1,73s!#BLOCKLOG_TZ=\"UTC\"!BLOCKLOG_TZ=\"Asia/Tokyo\"!' \\\n  -e '1,73s!#POOL_NAME=\"\"!POOL_DIR=${CNODE_HOME}!'\n</code></pre></p> <p>cncli.sh\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059</p> <p>\u30d7\u30fc\u30ebID\u3092\u78ba\u8a8d\u3059\u308b\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>pool_hex=`cat $NODE_HOME/pool.id`\npool_bech32=`cat $NODE_HOME/pool.id-bech32`\nprintf \"\\n\u30d7\u30fc\u30ebID(hex)\u306f \\e[32m${pool_hex}\\e[m \u3067\u3059\\n\\n\"\nprintf \"\\n\u30d7\u30fc\u30ebID(bech32)\u306f \\e[32m${pool_bech32}\\e[m \u3067\u3059\\n\\n\"\n</code></pre></p> <p>\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30ebID <code>2\u7a2e\u985e</code>\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044 \u30d7\u30fc\u30ebID\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044  </p> <p> cncli.sh\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 <pre><code>sed -i $NODE_HOME/scripts/cncli.sh \\\n-e '1,30s!#POOL_ID=\"\"!POOL_ID=\"'${pool_hex}'\"!' \\\n-e '1,30s!#POOL_ID_BECH32=\"\"!POOL_ID_BECH32=\"'${pool_bech32}'\"!' \\\n-e '1,30s!#POOL_VRF_SKEY=\"\"!POOL_VRF_SKEY=\"${CNODE_HOME}/vrf.skey\"!' \\\n-e '1,30s!#POOL_VRF_VKEY=\"\"!POOL_VRF_VKEY=\"${CNODE_HOME}/vrf.vkey\"!'\n</code></pre></p>"},{"location":"setup/10-blocklog-setup/#10-4","title":"10-4. \u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\u30fb\u767b\u9332","text":"<pre><code>cd $NODE_HOME\nmkdir service\ncd service\n</code></pre> cnclivalidateleaderloglogmonitor \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-sync.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-sync.service\n\n[Unit]\nDescription=Cardano Node - CNCLI sync\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh sync\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep [c]ncli.sync.*.${NODE_HOME}/ | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-sync\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-validate.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-cncli-validate.service\n\n[Unit]\nDescription=Cardano Node - CNCLI validate\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts\nExecStartPre=/bin/sleep 5\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh validate\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-validate\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-cncli-leaderlog.service &lt;&lt; EOF\n# file: /etc/systemd/system/cnode-cncli-leaderlog.service\n\n[Unit]\nDescription=Cardano Node - CNCLI Leaderlog\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=20\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/cncli.sh leaderlog\"\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-cncli-leaderlog\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-logmonitor.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-logmonitor.service\n\n[Unit]\nDescription=Cardano Node - CNCLI logmonitor\nBindsTo=cardano-node.service\nAfter=cardano-node.service\n\n[Service]\nType=simple\nRestart=on-failure\nRestartSec=1\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}\nExecStart=/bin/bash -l -c \"exec ${NODE_HOME}/scripts/logMonitor.sh\"\nExecStop=/bin/bash -l -c \"exec kill -2 \\$(ps -ef | grep -m1 ${NODE_HOME}/scripts/logMonitor.sh | tr -s ' ' | cut -d ' ' -f2) &amp;&gt;/dev/null\"\nKillSignal=SIGINT\nSuccessExitStatus=143\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-logmonitor\nTimeoutStopSec=5\nKillMode=mixed\n\n[Install]\nWantedBy=cardano-node.service\nEOF\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059</p> <p>1\u884c\u305a\u3064\u30b3\u30de\u30f3\u30c9\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044 <pre><code>sudo cp $NODE_HOME/service/cnode-cncli-sync.service /etc/systemd/system/cnode-cncli-sync.service\nsudo cp $NODE_HOME/service/cnode-cncli-validate.service /etc/systemd/system/cnode-cncli-validate.service\nsudo cp $NODE_HOME/service/cnode-cncli-leaderlog.service /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo cp $NODE_HOME/service/cnode-logmonitor.service /etc/systemd/system/cnode-logmonitor.service\n</code></pre></p> <pre><code>sudo chmod 644 /etc/systemd/system/cnode-cncli-sync.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-validate.service\nsudo chmod 644 /etc/systemd/system/cnode-cncli-leaderlog.service\nsudo chmod 644 /etc/systemd/system/cnode-logmonitor.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable cnode-cncli-sync.service\nsudo systemctl enable cnode-cncli-validate.service\nsudo systemctl enable cnode-cncli-leaderlog.service\nsudo systemctl enable cnode-logmonitor.service\n</code></pre> <p>\u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnclilog='\"journalctl --no-hostname -u cnode-cncli-sync -f\"' &gt;&gt; $HOME/.bashrc\necho alias validate='\"journalctl --no-hostname -u cnode-cncli-validate -f\"' &gt;&gt; $HOME/.bashrc\necho alias leaderlog='\"journalctl --no-hostname -u cnode-cncli-leaderlog -f\"' &gt;&gt; $HOME/.bashrc\necho alias logmonitor='\"journalctl --no-hostname -u cnode-logmonitor -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre></p> <p>\u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u30ed\u30b0\u304c\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002 \u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <code>cnclilog</code> <code>validate</code> <code>leaderlog</code> <code>logmonitor</code></p>"},{"location":"setup/10-blocklog-setup/#10-5-db","title":"10-5. \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068DB\u3092\u540c\u671f","text":"<p>cncli-sync\u30b5\u30fc\u30d3\u30b9\u3092\u958b\u59cb\u3057\u307e\u3059 <pre><code>sudo systemctl start cnode-cncli-sync.service\n</code></pre></p> <p>cncli\u30ed\u30b0\u78ba\u8a8d <pre><code>cnclilog\n</code></pre></p> <p>\u78ba\u8a8d</p> <ul> <li>cncli\u540c\u671f\u78ba\u8a8d\u300c100.00% synced\u300d\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002 100%\u306b\u306a\u3063\u305f\u3089\u3001Ctrl+c\u3067\u9589\u3058\u307e\u3059\u3002</li> </ul> <p>\u4ed6\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d</p> validateleaderloglogmonitor <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u304c\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u4e0a\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u7167\u5408\u3057\u307e\u3059\u3002</p> <pre><code>validate\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>~ CNCLI Block Validation started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u3092\u81ea\u52d5\u7684\u306b\u7b97\u51fa\u3057\u307e\u3059\u3002  \u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u7b97\u51fa\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <pre><code>leaderlog\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~ CNCLI Leaderlog started ~</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p> <p>\u3053\u3061\u3089\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30d7\u30fc\u30eb\u306e\u30ce\u30fc\u30c9\u30ed\u30b0\u304b\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>logmonitor\n</code></pre> <p>\u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002  </p> <p>~~ LOG MONITOR STARTED ~~ monitoring logs/node.json for traces</p> <p>Ctrl+c\u3067\u9589\u3058\u307e\u3059</p>"},{"location":"setup/10-blocklog-setup/#10-6","title":"10-6. \u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3092\u8868\u793a\u3059\u308b","text":"<p>\u3053\u306e\u30c4\u30fc\u30eb\u3067\u306f\u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u3066\u304d\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d44\u307f\u5408\u308f\u305b\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u306b\u5bfe\u3057\u3066\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u683c\u7d0d\u3057\u3001\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <pre><code>cd $NODE_HOME/scripts\n./blocks.sh\n</code></pre> <p>\u4fbf\u5229\u306a\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias blocks=\"'cd $NODE_HOME/scripts; ./blocks.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067<code>blocks</code>\u3068\u5165\u529b\u3057\u5b9f\u884c\u3059\u308b\u3060\u3051\u3067\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002  </p> <p></p> <p>\uff08\uff53\uff09\u5b9f\u7e3e\u6982\u8981---\u30a8\u30dd\u30c3\u30af\u6bce\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u5b9f\u7e3e\u53c2\u7167 \uff08\uff45\uff09\u30a8\u30dd\u30c3\u30af\u8a73\u7d30---\u500b\u5225\u30a8\u30dd\u30c3\u30af\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304a\u3088\u3073\u751f\u6210\u5b9f\u7e3e\u53c2\u7167</p> <p></p> <p>\u30d6\u30ed\u30c3\u30af\u30b9\u30c6\u30fc\u30bf\u30b9</p> \u9805\u76ee \u610f\u5473 Leader \u30d6\u30ed\u30c3\u30af\u751f\u6210\u5272\u308a\u5f53\u3066\u6570 Ideal \u30a2\u30af\u30c6\u30a3\u30d6\u30b9\u30c6\u30fc\u30af\uff08\u30b7\u30b0\u30de\uff09\u306b\u57fa\u3065\u3044\u3066\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d6\u30ed\u30c3\u30af\u6570\u306e\u671f\u5f85\u5024/\u7406\u60f3\u5024 Luck \u671f\u5f85\u5024\u306b\u304a\u3051\u308b\u5b9f\u969b\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30b9\u30ed\u30c3\u30c8\u30ea\u30fc\u30c0\u30fc\u6570\u306e\u30d1\u30fc\u30bb\u30f3\u30c6\u30fc\u30b8 Adopted \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30d5\u30e9\u30b0 Confirmed \u751f\u6210\u3057\u305f\u30d6\u30ed\u30c3\u30af\u306e\u3046\u3061\u78ba\u5b9f\u306b\u30aa\u30f3\u30c1\u30a7\u30fc\u30f3\u3067\u3042\u308b\u3053\u3068\u304c\u691c\u8a3c\u3055\u308c\u305f\u30d6\u30ed\u30c3\u30af (\u30d6\u30ed\u30c3\u30af\u751f\u6210\u6210\u529f) Missed \u30b9\u30ed\u30c3\u30c8\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304c\u3001 cncli DB \u306b\u306f\u8a18\u9332\u3055\u308c\u3066\u304a\u3089\u305a\u4ed6\u306e\u30d7\u30fc\u30eb\u304c\u3053\u306e\u30b9\u30ed\u30c3\u30c8\u306e\u305f\u3081\u306b\u30d6\u30ed\u30c3\u30af\u3092\u4f5c\u3063\u305f\u53ef\u80fd\u6027 Ghosted \u30d6\u30ed\u30c3\u30af\u306f\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u304c\u300cOrphans(\u5b64\u7acb\u30d6\u30ed\u30c3\u30af)\u300d\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002 \u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u30fb\u30cf\u30a4\u30c8\u30d0\u30c8\u30eb\u3067\u6557\u5317\u3057\u305f\u304b\u3001\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u554f\u984c\u3067\u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u306b\u306a\u3063\u3066\u3044\u307e\u305b\u3093 Stolen \u5225\u306e\u30d7\u30fc\u30eb\u306b\u6709\u52b9\u306a\u30d6\u30ed\u30c3\u30af\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30b9\u30ed\u30c3\u30c8\u30d0\u30c8\u30eb\u3067\u6557\u5317\u3057\u305f\u53ef\u80fd\u6027 Invalid \u30d7\u30fc\u30eb\u306f\u30d6\u30ed\u30c3\u30af\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304clogmonitor\u306b\u8868\u793a\u3055\u308c\u307e\u3059 <p>Invalid\u306e\u30a8\u30e9\u30fc\u5185\u5bb9\u306f\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u30c7\u30b3\u30fc\u30c9\u3067\u304d\u307e\u3059  <pre><code>echo (base64\u30b3\u30fc\u30c9\u3092\u5165\u308c\u308b) | base64 -d | jq -r\n</code></pre></p> <p>\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u304c\u6587\u5b57\u5316\u3051\u3059\u308b\u5834\u5408\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u300cUTF-8\u300d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>echo $LANG\n</code></pre></p>"},{"location":"setup/10-blocklog-setup/#10-7","title":"10-7. \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u53d6\u5f97\u3059\u308b","text":"<p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u3064\u3044\u3066</p> <p>\u53d6\u5f97\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u30a8\u30dd\u30c3\u30af\u30b9\u30ed\u30c3\u30c8\u304c\u7d04302400\u3092\u904e\u304e\u3066\u304b\u3089\u6b21\u30a8\u30dd\u30c3\u30af\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u53d6\u5f97\u3057\u307e\u3059(\u6b21\u30a8\u30dd\u30c3\u30af\u306e1.5\u65e5\u524d) 11.\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u4efb\u610f\u306e\u901a\u77e5\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3078\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002    </p> <p>Tip</p> <ul> <li>\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306e\u4e2d\u306b<code>Error: database is locked</code>\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u3088\u304f\u3042\u308b\u8cea\u554f\u306eQ4.\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u6642\u300cError: database is locked\u300d\u304c\u8868\u793a\u3055\u308c\u308b\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044</li> <li><code>Leaderslots: 0 - Ideal slots for epoch based on active stake: 0.01 - Luck factor 0%</code>\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001\u6b8b\u5ff5\u304c\u3089\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p>1\u30a8\u30dd\u30c3\u30af\u30671\u30d6\u30ed\u30c3\u30af\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u59d4\u4efb\u91cf\u306e\u76ee\u5b89\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002%\u306f\u78ba\u7387 1M 60% 2M 85% 3M 95%  </p> <p>\u30d7\u30fc\u30eb\u958b\u8a2d\u6642\u306f\u30012\u30a8\u30dd\u30c3\u30af\u5f8c\u304b\u3089\u5272\u308a\u5f53\u3066\u304c\u30b9\u30bf\u30fc\u30c8\u3057\u307e\u3059\u3002 303 \u30d7\u30fc\u30eb\u767b\u9332  304 \u5f85\u6a5f\u671f\u9593 \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u7b97\u51fa 305 \u59d4\u4efb\u6709\u52b9 \u30d6\u30ed\u30c3\u30af\u751f\u6210 306 \u5831\u916c\u8a08\u7b97 307 \u5831\u916c\u632f\u308a\u8fbc\u307f   </p> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u901a\u77e5\u3059\u308b</p> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0DB\u306b\u4fdd\u5b58\u3055\u308c\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u3092LINE/Slack/discord/telegram\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u8a2d\u5b9a\u624b\u9806\u306fSPO BlockNotify\u8a2d\u5b9a\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/10-blocklog-setup/#10-99cncli","title":"10-99.CNCLI\u66f4\u65b0\u624b\u9806","text":"<p>\u4ee5\u4e0b\u306f\u6700\u65b0\u7248\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u5834\u5408\u306b\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044 </p> <p>cncli\u65e7\u30d0\u30fc\u30b8\u30e7\u30f3\u304b\u3089\u306e\u66f4\u65b0\u624b\u9806</p> <p>\u6ce8\u610f</p> <p>\uff11\u6642\u9593\u4ee5\u5185\u306b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>CNCLI\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b</p> <p><pre><code>cd $HOME\ncncli_release=\"$(curl -s https://api.github.com/repos/cardano-community/cncli/releases/latest | jq -r '.tag_name' | sed -e \"s/^.\\{1\\}//\")\"\n</code></pre> <pre><code>curl -sLJ https://github.com/cardano-community/cncli/releases/download/v${cncli_release}/cncli-${cncli_release}-ubuntu22-x86_64-unknown-linux-gnu.tar.gz -o $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre> <pre><code>tar xzvf $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz -C $HOME/.cargo/bin/\n</code></pre> <pre><code>rm $HOME/cncli-${cncli_release}-x86_64-unknown-linux-gnu.tar.gz\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cncli --version\n</code></pre></p> <p>cncli 6.0.1\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b </p> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u304c\u540c\u671f\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <pre><code>cnclilog\n</code></pre> <p>100% synced\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p>"},{"location":"setup/10-blocklog-setup/#_1","title":"\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306b\u306a\u3044\u30d6\u30ed\u30c3\u30af\u304c\u751f\u6210\u3055\u308c\u308b\u5834\u5408","text":"<p>CNCLI\u306e\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u306f\u6b63\u3057\u3044\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308c\u3070\u3001100%\u6b63\u78ba\u3067\u3059\u3002 cncli.db\u3092\u518d\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u6b63\u3057\u3044\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</p> <p>\u4fee\u6b63\u624b\u9806</p> <p>\u30fb\u30b5\u30fc\u30d3\u30b9\u3092\u6b62\u3081\u308b <pre><code>sudo systemctl stop cnode-cncli-sync.service\n</code></pre></p> <p>cncli.db\u3092\u524a\u9664\u3059\u308b <pre><code>cd $NODE_HOME/guild-db/cncli\nrm cncli.db\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u3001\u540c\u671f\u304c100\uff05\u306b\u306a\u308b\u307e\u3067\u5f85\u3064 <pre><code>sudo systemctl start cnode-cncli-sync.service\n</code></pre></p> <p>\u5236\u4f5c\u30af\u30ec\u30b8\u30c3\u30c8</p> <p>\u3053\u306e\u30c4\u30fc\u30eb\u306f\u6d77\u5916\u30ae\u30eb\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5236\u4f5c\u306eCNCLI By AndrewWestberg\u3001logmonitor by Guild Operators\u3001Guild LiveView\u3001BLOCK LOG for CNTools\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30c4\u30fc\u30eb\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u306b\u3042\u305f\u308a\u3001\u958b\u767a\u8005\u306eAHLNET(AHL)\u306b\u3054\u5354\u529b\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002</p>"},{"location":"setup/11-blocknotify-setup/","title":"SPO Block Notify\u8a2d\u5b9a","text":"<p>\u304a\u77e5\u3089\u305b</p> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u304c\u300cSPO Block Notify\u300d\u306b\u751f\u307e\u308c\u5909\u308f\u308a\u307e\u3057\u305f\uff01</p> <p>\u6982\u8981</p> <p>\u6700\u7d42\u66f4\u65b0\u65e5\uff1a2024/7/16  v2.3.0</p> <ul> <li> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3067\u8868\u793a\u3055\u308c\u308b\u30d6\u30ed\u30c3\u30af\u751f\u6210\u7d50\u679c\u3092\u4efb\u610f\u306e\u30bd\u30fc\u30b7\u30e3\u30eb\u30a2\u30d7\u30ea\u3078\u901a\u77e5\u3057\u307e\u3059\u3002  </p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u52d5\u53d6\u5f97\u3057\u3001\u53d6\u5f97\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u4e00\u89a7\u3092\u901a\u77e5\u3057\u307e\u3059\u3002 </p> </li> <li> <p>\u901a\u77e5\u5148\u5bfe\u5fdc\u30a2\u30d7\u30ea LINE/Slack/discord/telegram</p> </li> <li> <p>\u591a\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u3067\u69d8\u3005\u306a\u8a00\u8a9e\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\uff01</p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u3068\u9023\u52d5\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u307e\u3060\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u5c0e\u5165\u624b\u9806\u3092\u5148\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> </li> <li> <p>\u4ee5\u4e0b\u306e\u4f5c\u696d\u306fguild-db\u304c\u5b58\u5728\u3059\u308bBP\u30b5\u30fc\u30d0\u30fc\u306e\u307f\u3067\u5b9f\u65bd\u3057\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> </li> <li> <p>\u8a2d\u5b9a\u306f\u4efb\u610f\u3067\u3059\u3002(\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5f71\u97ff\u306f\u3042\u308a\u307e\u305b\u3093)</p> </li> </ul> \u66f4\u65b0\u5c65\u6b74\u25bc <ul> <li>2.3.0  \u30fb\u901a\u77e5\u306b\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u8868\u793a \u3000\u3000\u3000\u3000\u3000\u30fb\u30b9\u30da\u30a4\u30f3\u8a9e\u3001\u30d5\u30e9\u30f3\u30b9\u8a9e\u3001\u30dd\u30eb\u30c8\u30ac\u30eb\u8a9e\u3092\u8ffd\u52a0</li> <li>2.2.2  \u30fb\u4efb\u610f\u306ePrometheus\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a\u53ef\u80fd \u3000\u3000\u3000\u3000\u3000\u30fb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u6700\u9069\u5316</li> <li>2.2.1  \u30fb\u7279\u5b9a\u306e\u6761\u4ef6\u4e0b\u306b\u304a\u3051\u308b\u7121\u9650\u30eb\u30fc\u30d7\u30d0\u30b0\u3092\u89e3\u6d88</li> <li>2.2.0  \u30fb\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\u6642\u306e\u5f37\u5236\u7d42\u4e86\u30d0\u30b0\u3092\u89e3\u6d88 \u3000\u3000\u3000\u3000\u3000\u30fb\u30d7\u30ed\u30b0\u30e9\u30e0\u6700\u9069\u5316 \u3000\u3000\u3000\u3000\u3000\u30fbPython3.10\u4ee5\u4e0a</li> <li>2.1.3\u3000\u30fb\u6b21\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u7121\u3044\u5834\u5408\u306e\u30a8\u30e9\u30fc\u89e3\u6d88</li> <li>2.1.2\u3000\u30fb\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u306e\u901a\u77e5\u6709\u7121\u5bfe\u5fdc</li> <li>2.1.1\u3000\u30fb\u30d6\u30ed\u30c3\u30af\u30ed\u30b0\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u5bfe\u5fdc</li> <li>2.0.0\u3000\u30fb\u591a\u8a00\u8a9e\u5bfe\u5fdc</li> <li>1.9.5\u3000\u30fbLINE\u901a\u77e5\u4e0d\u5177\u5408\u4fee\u6b63</li> <li>1.9.4\u3000\u30fb\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u30b9\u30ed\u30c3\u30c8\u3092<code>303300</code>\uff5e<code>317700</code>\u9593\u3067\u30e9\u30f3\u30c0\u30e0\u5316</li> <li>1.9.0\u3000\u30fb\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u6642\u306e\u30a8\u30e9\u30fc\u4fee\u6b63</li> <li> <p>1.8.9\u3000\u30fb\u30a8\u30dd\u30c3\u30af\u5883\u754c\u306e\u901a\u77e5\u5185\u5bb9\u4e0d\u5177\u5408\u4fee\u6b63 \u3000\u3000\u3000\u30fb\u901a\u77e5\u5185\u5bb9\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u5909\u66f4</p> </li> <li> <p>1.8.8 \u30fb\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u6642\u306b\u901a\u77e5 \u3000\u3000\u3000\u30fb\u901a\u77e5\u5148\u30c8\u30fc\u30af\u30f3\u672a\u5165\u529b\u306e\u5834\u5408\u306b\u30b5\u30fc\u30d3\u30b9\u753b\u9762\u3067\u30a8\u30e9\u30fc\u6392\u51fa</p> </li> <li>1.8.7 \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u5f8c\u3001\u901a\u77e5\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> <li>1.8.6 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u81ea\u52d5\u5316\u5c0e\u5165(\u9078\u629e\u5f0f) \u3000\u3000\u3000\u30fb\u53d6\u5f97\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u4e00\u89a7\u901a\u77e5</li> <li>1.7 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u30bf\u30a4\u30df\u30f3\u30b0\u901a\u77e5 \u3000\u3000\u3000\u30fb\u751f\u6210\u30d6\u30ed\u30c3\u30af\u306ePooltool\u30ea\u30f3\u30af\u8ffd\u52a0</li> <li>1.6 \u30d6\u30ed\u30c3\u30af\u672a\u751f\u6210\u30d7\u30fc\u30eb\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u306e\u8d77\u52d5\u6642\u30a8\u30e9\u30fc\u3092\u4fee\u6b63</li> <li>1.5 10\u5206\u4ee5\u5185\u306b\u8907\u6570\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304c\u3042\u308b\u5834\u5408\u306e\u901a\u77e5\u30d0\u30b0\u4fee\u6b63</li> <li>1.4 \u6b21\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3092\u8868\u793a</li> <li>1.3 \u30ce\u30fc\u30c9\u518d\u8d77\u52d5\u6642\u306e\u4e0d\u5177\u5408\u3092\u4fee\u6b63</li> <li>1.2.3 \u30a8\u30dd\u30c3\u30af\u53d6\u5f97\u30d5\u30ed\u30fc\u4fee\u6b63</li> <li>1.2.2 \u901a\u77e5\u30d0\u30b0\u4fee\u6b63</li> <li>1.2 \u30fbTelegram\u3001Slack\u306b\u5bfe\u5fdc \u3000\u3000\u3000\u30fb\u901a\u77e5\u57fa\u6e96\u8a2d\u5b9a( \u5168\u3066/confirm\u4ee5\u5916\u5168\u3066/Missed\u3068ivaild\u306e\u307f) \u3000\u3000\u3000\u30fb\u901a\u77e5\u5185\u5bb9\u3092\u5909\u66f4(X\u756a\u76ee/\u30c8\u30fc\u30bf\u30eb\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6570)  </li> <li>1.1 \u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u53d6\u5f97\u6642\u3001\u305d\u306e\u4ed6\u901a\u77e5\u5224\u5b9a\u4fee\u6b63  </li> <li>1.0.1 \u8efd\u5fae\u306a\u4fee\u6b63  </li> <li>1.0 \u521d\u7248\u30ea\u30ea\u30fc\u30b9  </li> </ul>"},{"location":"setup/11-blocknotify-setup/#11-1","title":"11-1. \u4f9d\u5b58\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b","text":"<p>Python\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b</p> <p>\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3059\u308b <pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\n</code></pre></p> <p>python\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b <pre><code>python3 -V\n</code></pre></p> <p>Python 3.10\u4ee5\u4e0a</p> Python 3.9\u4ee5\u4e0b\u306e\u5834\u5408\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304f\u3060\u3055\u3044 <p>pythonUpdate.sh\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u81ea\u52d5\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b <pre><code>cd\nwget https://raw.githubusercontent.com/btbf/spojapanguild/master/scripts/pythonUpdate.sh\nchmod +x pythonUpdate.sh\n./pythonUpdate.sh\n</code></pre></p> <p>\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b <pre><code>sudo apt install -y build-essential libssl-dev libffi-dev python3-dev python3-pip python3-testresources\n</code></pre> <pre><code>pip3 install watchdog pytz python-dateutil requests discordwebhook slackweb i18nice\n</code></pre></p> <p>\u5b9f\u884c\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b</p> <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\ncd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/config.ini block-notify-${bn_release}/i18n/ \nmv block-notify-${bn_release} block-notify\nrm ${bn_release}.tar.gz\n</code></pre>"},{"location":"setup/11-blocknotify-setup/#11-2","title":"11-2. \u901a\u77e5\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a","text":"<p>\u901a\u77e5\u3055\u305b\u305f\u3044\u30a2\u30d7\u30ea\u306e\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> LINEDiscordTelegramSlack <ul> <li> <p>1.LINE\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b </p> </li> <li> <p>2.\u300cLine Notify\u300d\u3092\u8ffd\u52a0\u3059\u308b </p> </li> <li> <p>3.\u4efb\u610f\u306e\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u8a2d\u5b9a\u3057\u300c\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>4.LINE Notify\u30de\u30a4\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b </p> </li> <li> <p>5.\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3059\u308b\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059 </p> </li> <li> <p>6.\u30c8\u30fc\u30af\u30f3\u540d\u300c\u30d6\u30ed\u30c3\u30af\u751f\u6210\u901a\u77e5\u300d(\u4efb\u610f)\u3092\u5165\u529b\u3057\u30013\u3067\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>7.\u300c\u767a\u884c\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b</p> </li> <li> <p>8.\u8868\u793a\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u30b3\u30d4\u30fc\u3057\u3001\u4e00\u65e6\u30e1\u30e2\u5e33\u306a\u3069\u306b\u8cbc\u308a\u4ed8\u3051\u308b  \uff08\u767a\u884c\u3055\u308c\u305f\u30c8\u30fc\u30af\u30f3\u3092\u9589\u3058\u308b\u30682\u5ea6\u3068\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\uff09 </p> </li> </ul> <ul> <li> <p>1.\u30b5\u30fc\u30d0\u30fc\u3092\u8ffd\u52a0\u3059\u308b </p> </li> <li> <p>2.\u300c\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u4f5c\u6210\u300d\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>3.\u300c\u81ea\u5206\u3068\u53cb\u9054\u306e\u305f\u3081\u300d\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>4.\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u540d\u3092\u5165\u529b\u3057\u3066\u300c\u65b0\u898f\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>5.\u901a\u77e5\u3057\u305f\u3044\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u6b6f\u8eca\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>6.\u300c\u9023\u643a\u30b5\u30fc\u30d3\u30b9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u30a6\u30a7\u30d6\u30d5\u30c3\u30af\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>7.\u300c\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u30b3\u30d4\u30fc\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e00\u65e6\u30e1\u30e2\u5e33\u306a\u3069\u306b\u8cbc\u308a\u4ed8\u3051\u308b </p> </li> </ul> <ul> <li> <p>1.Telegram\u306e\u691c\u7d22\u6b04\u3067\u300c@botFather\u300d\u3092\u691c\u7d22\u3057\u3066\u8a8d\u8a3c\u30de\u30fc\u30af\u4ed8\u304d\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>2.\u300cSTART\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>3.\u300c/newbot\u300d\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308b </p> </li> <li> <p>4.\u4efb\u610f\u306ebot\u540d\u3092\u5165\u529b\u3059\u308b \u4f8b\uff09\u300cbtbf_bot\u300d\u6700\u5f8c\u306f\u5fc5\u305a<code>_bot</code>\u3067\u7d42\u308f\u308b\u3088\u3046\u306b\u3059\u308b </p> </li> <li> <p>5.\u7dd1\u3067\u96a0\u3057\u305f\u90e8\u5206\u306eAPI\u30c8\u30fc\u30af\u30f3\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> <li> <p>6.\u8d64\u67a0\u3067\u56f2\u3063\u305fbot\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u53c2\u52a0\u3059\u308b </p> </li> <li> <p>7.\u691c\u7d22\u6b04\u3067\u300c@RawDataBot\u300d\u3092\u691c\u7d22\u3057\u3066\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>8.\u300cSTART\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> <li> <p>9.\u300cChat id\u300d\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> </ul> <ul> <li> <p>1.Slack\u3092\u8d77\u52d5\u3057\u3001\u901a\u77e5\u7528\u306e\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</p> </li> <li> <p>2.Incoming Webhook\u306e\u8a2d\u5b9a\u30da\u30fc\u30b8\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b</p> </li> <li> <p>3.\u901a\u77e5\u3057\u305f\u3044\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u9078\u629e\u3059\u308b </p> </li> <li> <p>4.\u300cWebhook URL\u300d\u3092\u30e1\u30e2\u5e33\u306b\u63a7\u3048\u308b </p> </li> <li> <p>5.\u30da\u30fc\u30b8\u4e0b\u90e8\u306e\u300c\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b </p> </li> </ul>"},{"location":"setup/11-blocknotify-setup/#11-3","title":"11-3. \u901a\u77e5\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8a2d\u5b9a","text":"<p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092SJG\u7528\u306b\u66f8\u304d\u63db\u3048\u308b <pre><code>cd block-notify\nsed -i config.ini \\\n    -e 's!/opt/cardano/cnode!'${NODE_HOME}'!' \\\n    -e 's!files/!'${NODE_CONFIG}-'!' \\\n    -e 's!notify_language = en!notify_language = ja!' \\\n    -e 's!Etc/UTC!Asia/Tokyo!'\n</code></pre></p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6 \u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30\u3092\u53c2\u7167\u3057\u3001\u3054\u81ea\u8eab\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u5024\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME/scripts/block-notify\nnano config.ini\n</code></pre> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u8a73\u7d30</p> \u9805\u76ee \u5024 \u4f7f\u7528\u7528\u9014 <code>pool_ticker</code> ex.) SJG \u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u540d\u3092\u5165\u529b\u3059\u308b <code>notify_language</code> \u82f1\u8a9e:<code>en</code>\u65e5\u672c\u8a9e:<code>ja</code> \u901a\u77e5\u8a00\u8a9e\u3092\u5165\u529b\u3059\u308b <code>notify_timezone</code> Asia/Tokyo\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u4e00\u89a7 \u304a\u4f4f\u3044\u306e\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b <code>notify_platform</code> <code>Line</code><code>Discord</code><code>Slack</code><code>Telegram</code> \u901a\u77e5\u5148\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u6307\u5b9a\u3059\u308b (\u8907\u6570\u6307\u5b9a\u306f\u7121\u52b9) <code>notify_level</code> \u5168\u3066:<code>All</code>Confirm\u4ee5\u5916:<code>ExceptCofirm</code>Miss\u306e\u307f:<code>OnlyMissed</code> \u901a\u77e5\u57fa\u6e96\u3092\u8a2d\u5b9a\u3059\u308b <code>nextepoch_leader_date</code> \u6982\u8981\u306e\u307f:<code>SummaryOnly</code>\u6982\u8981\u3068\u65e5\u4ed8:<code>SummaryDate</code> \u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u6642\u306e\u901a\u77e5\u6709\u7121\u6b21\u30a8\u30dd\u30c3\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u65e5\u4ed8\u4e00\u89a7\u3092\u901a\u77e5\u306b\u6d41\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f<code>SummaryOnly</code>\u3092\u8a18\u8f09\u3057\u3066\u304f\u3060\u3055\u3044 <code>line_notify_token</code> LINE\u8a2d\u5b9a\u306e(8)\u3067\u767a\u884c\u3057\u305f\u30c8\u30fc\u30af\u30f3ID Line Notify\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>discord_webhook_url</code> Discord\u8a2d\u5b9a\u306e(7)\u3067\u767a\u884c\u3057\u305f\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL Discord\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>slack_webhook_url</code> Slack\u8a2d\u5b9a\u306e(4)\u3067\u767a\u884c\u3057\u305fWebhook URL Slack\u30a6\u30a7\u30d6\u30d5\u30c3\u30afURL\u3092\u5165\u529b\u3059\u308b <code>telegram_token</code> Telegram\u8a2d\u5b9a\u306e(5)\u3067\u767a\u884c\u3057\u305fAPI\u30c8\u30fc\u30af\u30f3 Telegram API\u30c8\u30fc\u30af\u30f3\u3092\u5165\u529b\u3059\u308b <code>telegram_id</code> Telegram\u8a2d\u5b9a\u306e(9)\u3067\u8868\u793a\u3055\u308c\u305fChat id Telegram ChatID\u3092\u5165\u529b\u3059\u308b <code>node_home</code> ex.)<code>/home/usr/cnode</code> node_home\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b <code>guild_db_dir</code> ex.)<code>%(node_home)s/guild-db/blocklog/</code> guild-db\u306e\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>shelley_genesis</code> ex.)<code>%(node_home)s/files/shelley-genesis.json</code> shelley_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <code>byron_genesis</code> ex.)<code>%(node_home)s/files/byron-genesis.json</code> byron_genesis\u306e\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u5165\u529b\u3059\u308b<code>%(node_home)s</code>\u306f\u5909\u6570\u306e\u305f\u3081\u5909\u66f4\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044 <p>\u30b5\u30fc\u30d3\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/service/cnode-blocknotify.service &lt;&lt; EOF \n# file: /etc/systemd/system/cnode-blocknotify.service\n\n[Unit]\nDescription=Cardano Node - SPO Blocknotify\nBindsTo=cnode-cncli-sync.service\nAfter=cnode-cncli-sync.service\n\n[Service]\nType=simple\nUser=$(whoami)\nWorkingDirectory=${NODE_HOME}/scripts/block-notify\nExecStart=/bin/bash -c 'cd ${NODE_HOME}/scripts/block-notify/ &amp;&amp; python3 -u block_notify.py'\nRestart=on-failure\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cnode-blocknotify\n\n[Install]\nWantedBy=cnode-cncli-sync.service\nEOF\n</code></pre> <pre><code>sudo cp $NODE_HOME/service/cnode-blocknotify.service /etc/systemd/system/cnode-blocknotify.service\n</code></pre> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo chmod 644 /etc/systemd/system/cnode-blocknotify.service\nsudo systemctl daemon-reload\nsudo systemctl enable cnode-blocknotify.service\n</code></pre> SPO BlockNotify\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-blocknotify.service\n</code></pre></p> <p>\u74b0\u5883\u5909\u6570\u306b\u30ed\u30b0\u78ba\u8a8d\u7528\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8ffd\u52a0\u3059\u308b <pre><code>echo alias blocknotify='\"journalctl --no-hostname -u cnode-blocknotify -f\"' &gt;&gt; $HOME/.bashrc\n</code></pre> \u74b0\u5883\u5909\u6570\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p> <p>\u8d77\u52d5\u78ba\u8a8d <pre><code>blocknotify\n</code></pre> \u4ee5\u4e0b\u306e\u8868\u793a\u306a\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>[xxx] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u30b9\u30c6\u30fc\u30bf\u30b9\u901a\u77e5\u3092\u8d77\u52d5\u3057\u307e\u3057\u305f </p> <p>\u65b0\u898f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u4ee5\u4e0a\u3067\u3059\u3002</p>"},{"location":"setup/11-blocknotify-setup/#11-4","title":"11-4.\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u624b\u9806","text":"<p>\u65e7\u30d0\u30fc\u30b8\u30e7\u30f3\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8(\u79fb\u884c)\u306b\u3064\u3044\u3066</p> <p>\u65e7\u30d6\u30ed\u30c3\u30af\u751f\u6210\u901a\u77e5\u307e\u305f\u306fSPO Block Notify2.1.3\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u5834\u5408\u306f\u3001\u79fb\u884c\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044</p> <p>SPO BlockNotify\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop cnode-blocknotify.service\n</code></pre></p> <p>\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>bn_release=\"$(curl -s https://api.github.com/repos/btbf/block-notify/releases/latest | jq -r '.tag_name')\"\nwget https://github.com/btbf/block-notify/archive/refs/tags/${bn_release}.tar.gz -P $NODE_HOME/scripts\ncd $NODE_HOME/scripts\ntar zxvf ${bn_release}.tar.gz block-notify-${bn_release}/block_notify.py block-notify-${bn_release}/i18n\ncp block-notify-${bn_release}/block_notify.py block-notify/block_notify.py\ncp -r block-notify-${bn_release}/i18n block-notify/\nrm -rf block-notify-${bn_release} ${bn_release}.tar.gz\n</code></pre></p> v2.2.0\u307e\u305f\u306fv2.2.1\u304b\u3089\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089\u3082\u5b9f\u65bd <pre><code>cd $NODE_HOME/scripts/block-notify/\nsed -i '9a prometheus_port = 12798' config.ini\n</code></pre> <p>SPO BlockNotify\u3092\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl start cnode-blocknotify.service\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>python3 $NODE_HOME/scripts/block-notify/block_notify.py version\n</code></pre></p>"},{"location":"setup/11-blocknotify-setup/#11-5","title":"11-5.\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806","text":"<p><pre><code>sudo systemctl stop cnode-blocknotify.service\n</code></pre> <pre><code>sudo systemctl disable cnode-blocknotify.service\nsudo rm /etc/systemd/system/cnode-blocknotify.service\n</code></pre></p>"},{"location":"setup/2-node-setup/","title":"2. \u30ce\u30fc\u30c9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3</p> Node CLI GHC Cabal CNCLI 10.1.4 10.1.1.0 8.10.7 3.8.1.0 6.5.1 <p>\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u6642\u306e\u6ce8\u610f\u70b9</p> <ul> <li>Ubuntu\u30b3\u30de\u30f3\u30c9\u521d\u5fc3\u8005\u306e\u65b9\u306f\u3001\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306b\u8907\u6570\u884c\u306e\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b\u5834\u5408\u3067\u3082\u3001\u30b3\u30de\u30f3\u30c9\u30921\u884c\u3065\u3064\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305f\u3060\u3057 <code>cat &gt; xxx &lt;&lt; EOF</code>\u306e\u30dc\u30c3\u30af\u30b9\u306b\u3064\u3044\u3066\u306f\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8907\u6570\u884c\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30fc\u30c9\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30d4\u30fc\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u5834\u5408\u3001\u9014\u4e2d\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u898b\u843d\u3068\u3055\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u307e\u305f\u3001\u6700\u5f8c\u306e\u884c\u304c\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u306a\u3044\u305f\u3081\u78ba\u8a8d\u306e\u4e0aEnter\u3092\u62bc\u3057\u3066\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>\u8907\u6570\u884c\u306esudo\u30b3\u30de\u30f3\u30c9\u3092\u4e00\u5ea6\u306b\u8cbc\u308a\u4ed8\u3051\u3066sudo\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6c42\u3081\u3089\u308c\u305f\u5834\u5408\u30011\u884c\u76ee\u306e\u30b3\u30de\u30f3\u30c9\u3057\u304b\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u6b8b\u308a\u306e\u30b3\u30de\u30f3\u30c9\u3092\u518d\u5ea6\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>Ubuntu22.04\u306e\u5834\u5408\u3001\u8907\u6570\u884c\u306esudo\u30b3\u30de\u30f3\u30c9\u30921\u5ea6\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u30681\u884c\u76ee\u3057\u304b\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u5fc5\u305a1\u884c\u305a\u3064\u8cbc\u308a\u4ed8\u3051\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"setup/2-node-setup/#2-1","title":"2-1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u8d77\u52d5\u3057\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u307e\u3057\u3087\u3046\uff01</p> <p>\u307e\u305a\u306f\u3058\u3081\u306b\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u66f4\u65b0\u3057Ubuntu\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b\u4fdd\u3061\u307e\u3059\u3002</p> <p><pre><code>sudo apt update -y &amp;&amp; sudo apt upgrade -y\n</code></pre> <pre><code>sudo apt install git jq bc automake tmux rsync htop curl build-essential pkg-config libffi-dev libgmp-dev libssl-dev libtinfo-dev libsystemd-dev zlib1g-dev make g++ wget libncursesw5 libtool autoconf liblmdb-dev -y\n</code></pre></p> <p>\u65b0\u3057\u3044TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u958b\u304f</p> <pre><code>tmux new -s build\n</code></pre>"},{"location":"setup/2-node-setup/#libsodium","title":"Libsodium\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>mkdir $HOME/git\ncd $HOME/git\ngit clone https://github.com/IntersectMBO/libsodium\ncd libsodium\ngit checkout dbb48cc\n./autogen.sh\n./configure\nmake\nmake check\n</code></pre> <p>make\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u534a\u306b\u51fa\u73fe\u3059\u308b <code>warning</code> \u306f\u7121\u8996\u3057\u3066\u5927\u4e08\u592b\u3067\u3059\u3002</p> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <pre><code>Testsuite summary for libsodium 1.0.18\n============================================================================\n# TOTAL: 82\n# PASS:  82\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p>"},{"location":"setup/2-node-setup/#secp256k1","title":"Secp256k1\u30e9\u30a4\u30d6\u30e9\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code>cd $HOME/git\ngit clone https://github.com/bitcoin-core/secp256k1.git\n</code></pre> <pre><code>cd secp256k1/\ngit checkout acf5c55\n./autogen.sh\n./configure --prefix=/usr --enable-module-schnorrsig --enable-experimental\nmake\nmake check\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <pre><code>Testsuite summary for libsecp256k1 0.3.2\n============================================================================\n# TOTAL: 3\n# PASS:  3\n# SKIP:  0\n# XFAIL: 0\n# FAIL:  0\n# XPASS: 0\n# ERROR: 0\n============================================================================\n</code></pre> <p>PASS:3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3092\u5fc5\u305a\u5b9f\u884c\u3059\u308b <pre><code>sudo make install\n</code></pre></p>"},{"location":"setup/2-node-setup/#blst","title":"blst\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>1.blst\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 <pre><code>cd $HOME/git\ngit clone https://github.com/supranational/blst\ncd blst\ngit checkout v0.3.11\n./build.sh\n</code></pre></p> <p>2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; libblst.pc &lt;&lt; EOF\nprefix=/usr/local\nexec_prefix=\\${prefix}\nlibdir=\\${exec_prefix}/lib\nincludedir=\\${prefix}/include\n\nName: libblst\nDescription: Multilingual BLS12-381 signature library\nURL: https://github.com/supranational/blst\nVersion: 0.3.11\nCflags: -I\\${includedir}\nLibs: -L\\${libdir} -lblst\nEOF\n</code></pre> <p>3.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u30b3\u30d4\u30fc</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo cp libblst.pc /usr/local/lib/pkgconfig/\nsudo cp bindings/blst_aux.h bindings/blst.h bindings/blst.hpp  /usr/local/include/\nsudo cp libblst.a /usr/local/lib\nsudo chmod u=rw,go=r /usr/local/{lib/{libblst.a,pkgconfig/libblst.pc},include/{blst.{h,hpp},blst_aux.h}}\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d <pre><code>cat /usr/local/lib/pkgconfig/libblst.pc | grep Version\n</code></pre></p> <p>Version 0.3.11</p>"},{"location":"setup/2-node-setup/#ghcup","title":"GHCUP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5909\u6570\u8a2d\u5b9a <pre><code>cd $HOME\nBOOTSTRAP_HASKELL_NONINTERACTIVE=1\nBOOTSTRAP_HASKELL_NO_UPGRADE=1\nBOOTSTRAP_HASKELL_INSTALL_NO_STACK=yes\nBOOTSTRAP_HASKELL_ADJUST_BASHRC=1\nunset BOOTSTRAP_HASKELL_INSTALL_HLS\nexport BOOTSTRAP_HASKELL_NONINTERACTIVE BOOTSTRAP_HASKELL_INSTALL_STACK BOOTSTRAP_HASKELL_ADJUST_BASHRC\n</code></pre></p> <p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>curl --proto '=https' --tlsv1.2 -sSf https://get-ghcup.haskell.org | bash\n</code></pre></p> <p>Cabal/GHC\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066</p> <p>\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306fcardano-node/cli\u306e\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3059\u308b\u305f\u3081\u5fc5\u305a\u4ee5\u4e0b\u3067\u6307\u5b9a\u3055\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>cabal\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <pre><code>source ~/.bashrc\nghcup upgrade\nghcup install cabal 3.8.1.0\nghcup set cabal 3.8.1.0\n</code></pre></p> <p>GHC\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <pre><code>ghcup install ghc 8.10.7\nghcup set ghc 8.10.7\n</code></pre> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>cabal update\ncabal --version\nghc --version\n</code></pre> <p>\u30c1\u30a7\u30c3\u30af</p> <p>Cabal\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a\u300c3.8.1.0\u300d GHC\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a\u300c8.10.7\u300d\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/2-node-setup/#2-2","title":"2-2. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9","text":"<p>\u78ba\u8a8d</p> <p>IOG\u306f\u73fe\u5728ARM\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u305b\u3093\u3002Raspberry Pi\u3092\u4f7f\u7528\u3057\u3066\u30d7\u30fc\u30eb\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u3001ARM\u7528\u30b3\u30f3\u30d1\u30a4\u30e9\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>Git\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u6700\u65b0\u306e\u30bf\u30b0\u306b\u5207\u308a\u66ff\u3048\u307e\u3059\u3002</p> <pre><code>cd $HOME/git\ngit clone https://github.com/IntersectMBO/cardano-node.git\ncd cardano-node\ngit fetch --all --recurse-submodules --tags\ngit checkout tags/10.1.4\n</code></pre> <p>Cabal\u306e\u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3057\u307e\u3059\u3002</p> <pre><code>cabal clean\ncabal update\ncabal configure --with-compiler=ghc-8.10.7\n</code></pre> <p>\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002</p> <pre><code>cabal build all cardano-cli\n</code></pre> <p>\u30d2\u30f3\u30c8</p> <p>\u30b5\u30fc\u30d0\u30b9\u30da\u30c3\u30af\u306b\u3088\u3063\u3066\u3001\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u3067\u306b\u6570\u5206\u304b\u3089\u6570\u6642\u9593\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>cardano-cli\u30d5\u30a1\u30a4\u30eb\u3068 cardano-node\u30d5\u30a1\u30a4\u30eb\u3092bin\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-cli) /usr/local/bin/cardano-cli\n</code></pre> <pre><code>cd $HOME/git/cardano-node\nsudo cp $(./scripts/bin-path.sh cardano-node) /usr/local/bin/cardano-node\n</code></pre> <p>cardano-cli \u3068 cardano-node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u6700\u65b0Git\u30bf\u30b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>cardano-cli version\ncardano-node version\n</code></pre> <p>\u4ee5\u4e0b\u306e\u623b\u308a\u5024\u3092\u78ba\u8a8d\u3059\u308b  </p> <p>cardano-cli 10.1.1.0 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08 </p> <p>cardano-node 10.1.4 - linux-x86_64 - ghc-8.10 git rev 1f63dbf2ab39e0b32bf6901dc203866d3e37de08  </p> <p>TMUX\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u9589\u3058\u308b</p> <pre><code>exit\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002 \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f $NODE_HOME(\u4f8b\uff1a/home/user/cnode) \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002</p> <pre><code>echo PATH=\"$HOME/.local/bin:$PATH\" &gt;&gt; $HOME/.bashrc\necho export LD_LIBRARY_PATH=\"/usr/local/lib:$LD_LIBRARY_PATH\" &gt;&gt; $HOME/.bashrc\necho export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH\" &gt;&gt; $HOME/.bashrc\necho export NODE_HOME=$HOME/cnode &gt;&gt; $HOME/.bashrc\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u306b\u63a5\u7d9a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3059\u308b <pre><code>echo export NODE_CONFIG=mainnet &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--mainnet\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=mainnet &gt;&gt; $HOME/.bashrc\n</code></pre></p> \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089 Preview(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8)PreProd(\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8) <pre><code>echo export NODE_CONFIG=preview &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 2\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=2 &gt;&gt; $HOME/.bashrc\n</code></pre> <pre><code>echo export NODE_CONFIG=preprod &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 1\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=1 &gt;&gt; $HOME/.bashrc\n</code></pre> <p>bashrc\u518d\u8aad\u307f\u8fbc\u307f <pre><code>source $HOME/.bashrc\n</code></pre></p>"},{"location":"setup/2-node-setup/#2-3","title":"2-3. \u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63","text":"<p>\u30ce\u30fc\u30c9\u69cb\u6210\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 config.json\u3001genesis.json\u3001topology.json</p> <pre><code>mkdir $NODE_HOME\ncd $NODE_HOME\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/byron-genesis.json -O ${NODE_CONFIG}-byron-genesis.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/topology.json -O ${NODE_CONFIG}-topology.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/shelley-genesis.json -O ${NODE_CONFIG}-shelley-genesis.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/alonzo-genesis.json -O ${NODE_CONFIG}-alonzo-genesis.json\nwget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/conway-genesis.json -O ${NODE_CONFIG}-conway-genesis.json\n</code></pre> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u5b9f\u65bd\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u5b9f\u65bd <pre><code>wget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/config.json -O ${NODE_CONFIG}-config.json\n</code></pre> <pre><code>wget --no-use-server-timestamps -q https://book.play.dev.cardano.org/environments/${NODE_CONFIG}/config-bp.json -O ${NODE_CONFIG}-config.json\n</code></pre> <p>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057 config.json\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002  </p> <p>\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u308b</p> <pre><code>sed -i ${NODE_CONFIG}-config.json \\\n    -e '2i \\  \"SnapshotInterval\": 86400,' \\\n    -e 's!\"AlonzoGenesisFile\": \"alonzo-genesis.json\"!\"AlonzoGenesisFile\": \"'${NODE_CONFIG}'-alonzo-genesis.json\"!' \\\n    -e 's!\"ByronGenesisFile\": \"byron-genesis.json\"!\"ByronGenesisFile\": \"'${NODE_CONFIG}'-byron-genesis.json\"!' \\\n    -e 's!\"ShelleyGenesisFile\": \"shelley-genesis.json\"!\"ShelleyGenesisFile\": \"'${NODE_CONFIG}'-shelley-genesis.json\"!' \\\n    -e 's!\"ConwayGenesisFile\": \"conway-genesis.json\"!\"ConwayGenesisFile\": \"'${NODE_CONFIG}'-conway-genesis.json\"!' \\\n    -e 's!\"TraceBlockFetchDecisions\": false!\"TraceBlockFetchDecisions\": true!' \\\n    -e 's!\"TraceMempool\": false!\"TraceMempool\": true!' \\\n    -e 's!\"rpKeepFilesNum\": 10!\"rpKeepFilesNum\": 30!' \\\n    -e 's!\"rpMaxAgeHours\": 24!\"rpMaxAgeHours\": 48!' \\\n    -e '/\"defaultScribes\": \\[/a\\    \\[\\n      \"FileSK\",\\n      \"'${NODE_HOME}'/logs/node.json\"\\n    \\],' \\\n    -e '/\"setupScribes\": \\[/a\\    \\{\\n      \"scFormat\": \"ScJson\",\\n      \"scKind\": \"FileSK\",\\n      \"scName\": \"'${NODE_HOME}'/logs/node.json\"\\n    \\},' \\\n    -e \"s/127.0.0.1/0.0.0.0/g\"\n</code></pre> <p>\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3057\u3001.bashrc\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002</p> <pre><code>echo export CARDANO_NODE_SOCKET_PATH=\"$NODE_HOME/db/socket\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre>"},{"location":"setup/2-node-setup/#2-4","title":"2-4. \u30ce\u30fc\u30c9\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210","text":"<p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u3001DB\u30d1\u30b9\u3001\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306a\u3069\u3001\u30ab\u30eb\u30c0\u30ce\u30ce\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u5909\u6570\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b <pre><code>PORT=6000\n</code></pre></p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startRelayNode1.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A16m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG}\nEOF\n</code></pre></p> <p>\u6ce8\u610f</p> <ul> <li>BP\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u308b\u305f\u3081\u306b\u300149513\uff5e65535\u307e\u3067\u306e\u4efb\u610f\u756a\u53f7\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u3053\u3067\u8a2d\u5b9a\u3059\u308b\u756a\u53f7\u306f1-3\u3067\u8a2d\u5b9a\u3057\u305fSSH\u30dd\u30fc\u30c8\u756a\u53f7\u3068\u306f\u5225\u306e\u756a\u53f7\u3092\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044.</li> </ul> <p>BP\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u3066\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b <pre><code>PORT=xxxxx\n</code></pre></p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startBlockProducingNode.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A16m -F1.5 -H2500M -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG}\nEOF\n</code></pre></p>"},{"location":"setup/2-node-setup/#2-5","title":"2-5. \u30ce\u30fc\u30c9\u8d77\u52d5","text":"<p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306e\u540c\u671f\u3092\u958b\u59cb\u3057\u307e\u3059\u3002 </p> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u5b9f\u65bd\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nchmod +x startRelayNode1.sh\n./startRelayNode1.sh\n</code></pre> <pre><code>cd $NODE_HOME\nchmod +x startBlockProducingNode.sh\n./startBlockProducingNode.sh\n</code></pre> <p>\u30ed\u30b0\u5185\u306b<code>Chain extended, new tip: xxxx</code>\u306e\u30ed\u30b0\u304c\u6d41\u308c\u3066\u3044\u305f\u3089\u6b63\u5e38\u3067\u3059\u3002</p> <p>\u4e00\u65e6\u30ce\u30fc\u30c9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002 <pre><code>Ctrl+C\n</code></pre></p>"},{"location":"setup/2-node-setup/#2-6-systemd","title":"2-6. \u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a(systemd)","text":"<p>\u5148\u7a0b\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3060\u3051\u3067\u306f\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u753b\u9762\u3092\u9589\u3058\u308b\u3068\u30ce\u30fc\u30c9\u304c\u7d42\u4e86\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u767b\u9332\u3057\u3001\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046</p> <p>\u30ce\u30fc\u30c9\u8d77\u52d5\u306bsystemd\u3092\u4f7f\u7528\u3059\u308b\u30e1\u30ea\u30c3\u30c8</p> <ol> <li>\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3084\u505c\u96fb\u306a\u3069\u3001\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u518d\u8d77\u52d5\u3057\u305f\u3068\u304d\u30ce\u30fc\u30c9\u3092\u81ea\u52d5\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u30ce\u30fc\u30c9\u30d7\u30ed\u30bb\u30b9\u3092\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>\u30ce\u30fc\u30c9\u306e\u7a3c\u50cd\u6642\u9593\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u307e\u3059\u3002</li> </ol> <p>\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/cardano-node.service &lt;&lt; EOF \n# The Cardano node service (part of systemd)\n# file: /etc/systemd/system/cardano-node.service \n\n[Unit]\nDescription     = Cardano node service\nWants           = network-online.target\nAfter           = network-online.target \n\n[Service]\nUser            = ${USER}\nType            = simple\nWorkingDirectory= ${NODE_HOME}\nExecStart       = /bin/bash -c '${NODE_HOME}/startRelayNode1.sh'\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cardano-node\n\n[Install]\nWantedBy    = multi-user.target\nEOF\n</code></pre> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/cardano-node.service &lt;&lt; EOF \n# The Cardano node service (part of systemd)\n# file: /etc/systemd/system/cardano-node.service \n\n[Unit]\nDescription     = Cardano node service\nWants           = network-online.target\nAfter           = network-online.target \n\n[Service]\nUser            = ${USER}\nType            = simple\nWorkingDirectory= ${NODE_HOME}\nExecStart       = /bin/bash -c '${NODE_HOME}/startBlockProducingNode.sh'\nKillSignal=SIGINT\nRestartKillSignal=SIGINT\nTimeoutStopSec=300\nLimitNOFILE=32768\nRestart=always\nRestartSec=5\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=cardano-node\n\n[Install]\nWantedBy    = multi-user.target\nEOF\n</code></pre> <p><code>/etc/systemd/system</code>\u306b\u30e6\u30cb\u30c3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002</p> <pre><code>sudo cp $NODE_HOME/cardano-node.service /etc/systemd/system/cardano-node.service\n</code></pre> <pre><code>sudo chmod 644 /etc/systemd/system/cardano-node.service\n</code></pre> <p>\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001OS\u8d77\u52d5\u6642\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002</p> <p>Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl daemon-reload\nsudo systemctl enable cardano-node\nsudo systemctl start cardano-node\n</code></pre> \u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u5f8c\u306b\u3001\u30ed\u30b0\u30e2\u30cb\u30bf\u30fc\u3092\u8868\u793a\u3057\u307e\u3059</p> <pre><code>journalctl --unit=cardano-node --follow\n</code></pre> <p>\u30b3\u30de\u30f3\u30c9\u5165\u529b\u306b\u623b\u308b\u5834\u5408\u306f\u300cCtrl\uff0bC\u300d\uff08\u3053\u306e\u5834\u5408\u30ce\u30fc\u30c9\u306f\u7d42\u4e86\u3057\u307e\u305b\u3093\uff09</p>"},{"location":"setup/2-node-setup/#_1","title":"\u4fbf\u5229\u306a\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a","text":"<p>\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias cnode='\"journalctl -u cardano-node -f\"' &gt;&gt; $HOME/.bashrc\necho alias cnstart='\"sudo systemctl start cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnrestart='\"sudo systemctl reload-or-restart cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnstop='\"sudo systemctl stop cardano-node\"' &gt;&gt; $HOME/.bashrc\necho alias cnreload='\"pkill -HUP cardano-node\"' &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u5358\u8a9e\u3092\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u8d77\u52d5\u72b6\u614b(\u30ed\u30b0)\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002 <pre><code>cnode \u30fb\u30fb\u30fb\u30ed\u30b0\u8868\u793a\ncnstart \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u8d77\u52d5\ncnrestart \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u518d\u8d77\u52d5\ncnreload \u30fb\u30fb\u30fb\u8a2d\u5b9a\u518d\u8aad\u307f\u8fbc\u307f\ncnstop \u30fb\u30fb\u30fb\u30ce\u30fc\u30c9\u505c\u6b62\n</code></pre></p>"},{"location":"setup/2-node-setup/#2-7-gliveview","title":"2-7. gLiveView\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>cardano-node\u306f\u30ed\u30b0\u304c\u6d41\u308c\u308b\u753b\u9762\u3060\u3051\u3067\u306f\u4f55\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u3002 \u305d\u308c\u3092\u8996\u899a\u7684\u306b\u78ba\u8a8d\u3067\u304d\u308b\u30c4\u30fc\u30eb\u304cgLiveView\u3067\u3059\u3002</p> <p>gLiveView\u306f\u91cd\u8981\u306a\u30ce\u30fc\u30c9\u30b9\u30c6\u30fc\u30bf\u30b9\u60c5\u5831\u3092\u8868\u793a\u3057\u3001systemd\u30b5\u30fc\u30d3\u30b9\u3068\u3046\u307e\u304f\u9023\u643a\u3057\u307e\u3059\u3002\u3053\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u6210\u3057\u305f Guild Operators \u306e\u529f\u7e3e\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002</p> <p>Guild LiveView\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <p><pre><code>mkdir $NODE_HOME/scripts\ncd $NODE_HOME/scripts\nsudo apt install bc tcptraceroute -y\n</code></pre> <pre><code>curl -s -o gLiveView.sh https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/gLiveView.sh\ncurl -s -o env https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/env\nchmod 755 gLiveView.sh\n</code></pre></p> <p>env \u30d5\u30a1\u30a4\u30eb\u5185\u306e\u5b9a\u7fa9\u3092\u4fee\u6b63\u3057\u307e\u3059</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startRelayNode1.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"\u30ea\u30ec\u30fc\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre> <pre><code>sed -i $NODE_HOME/scripts/env \\\n    -e '1,73s!#CNODE_HOME=\"/opt/cardano/cnode\"!CNODE_HOME=${NODE_HOME}!' \\\n    -e '1,73s!#CNODE_PORT=6000!CNODE_PORT='${b_PORT}'!' \\\n    -e '1,73s!#UPDATE_CHECK=\"Y\"!UPDATE_CHECK=\"N\"!' \\\n    -e '1,73s!#CONFIG=\"${CNODE_HOME}/files/config.json\"!CONFIG=\"${CNODE_HOME}/'${NODE_CONFIG}'-config.json\"!' \\\n    -e '1,73s!#SOCKET=\"${CNODE_HOME}/sockets/node.socket\"!SOCKET=\"${CNODE_HOME}/db/socket\"!'\n</code></pre> <p>Guild Liveview\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>./gLiveView.sh\n</code></pre> <p></p> <p>GliveView\u8d77\u52d5\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u30b3\u30fc\u30c9\u767b\u9332</p> <p>\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u30d1\u30b9\u3092\u901a\u3057\u3001\u4efb\u610f\u306e\u5358\u8a9e\u3067\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002 <pre><code>echo alias glive=\"'cd $NODE_HOME/scripts; ./gLiveView.sh'\" &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\n</code></pre></p> <p>\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b<code>glive</code>\u3068\u5165\u529b\u3059\u308b\u3060\u3051\u3067\u3001\u3069\u3053\u304b\u3089\u3067\u3082\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002   </p> gLiveView\u306b\u3064\u3044\u3066\u25bc <ul> <li>\u3053\u306e\u30c4\u30fc\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3082\u30ce\u30fc\u30c9\u306f\u8d77\u52d5\u3057\u307e\u305b\u3093\u3002\u30ce\u30fc\u30c9\u306f\u5225\u9014\u8d77\u52d5\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 </li> <li>\u30ea\u30ec\u30fc\uff0fBP\u306e\u81ea\u52d5\u5224\u5225\u306f\u3001\u624b\u98064-5\u7d42\u4e86\u5f8c\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 </li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u57fa\u672c\u60c5\u5831\u306b\u52a0\u3048\u3001\u30c8\u30dd\u30ed\u30b8\u30fc\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  </li> <li>BP\u30ce\u30fc\u30c9\u3067\u306f\u57fa\u672c\u60c5\u5831\u306b\u52a0\u3048\u3001KES\u6709\u52b9\u671f\u9650\u3001\u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002  </li> </ul> <p>\u91cd\u8981\uff1a\u30ce\u30fc\u30c9\u540c\u671f\u306b\u3064\u3044\u3066</p> <p>0\u30a8\u30dd\u30c3\u30af\u304b\u3089\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u540c\u671f\u3057\u307e\u3059\u3002\u6700\u65b0\u30a8\u30dd\u30c3\u30af\u307e\u3067\u8ffd\u3044\u3064\u304f\u307e\u3067\u306b1\u65e5\u534a\uff5e2\u65e5\u304b\u304b\u308a\u3001\u5b8c\u5168\u306b\u540c\u671f\u3059\u308b\u307e\u3067\u6b21\u306e\u9805\u76ee\u306b\u306f\u9032\u3081\u307e\u305b\u3093\u3002 BP\u30b5\u30fc\u30d0\u30fc\u30842\u3064\u76ee\u306e\u30ea\u30ec\u30fc\u30b5\u30fc\u30d0\u30fc\u3067\u3082\u540c\u3058\u4f5c\u696d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\uff1cMithril-Client\u306b\u3088\u308bDB\u540c\u671f\uff1e <code>Mithril-Client</code>\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u7d042\u65e5\u304b\u304b\u3063\u3066\u3044\u305f\u521d\u56de\u306eDB\u540c\u671f\u6642\u9593\u3092\u7d0430\u5206\u4ee5\u5185\u306b\u307e\u3067\u77ed\u7e2e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002 \u624b\u9806\u306f\u3053\u3061\u3089\u2192DB\u540c\u671f(Mithril)</p>"},{"location":"setup/2-node-setup/#2-8","title":"2-8. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068\u306f\uff1f</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306f\u300c\u30b3\u30fc\u30eb\u30c9\u74b0\u5883\u300d\u3068\u547c\u3070\u308c\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u304a\u3044\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u308b\u65b9\u6cd5\u306e\u4e00\u3064\u3002 \u5b89\u5168\u306b\u3057\u305f\u3044\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3084\u5b89\u5168\u3067\u306a\u3044LAN\u3068\u3044\u3063\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304b\u3089\u7269\u7406\u7684\u306b\u9694\u96e2\u3059\u308b\u3053\u3068\u3092\u6307\u3059\u3002</p> <ul> <li>\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3044\u3066\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3092\u7ba1\u7406\u3057\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u7f72\u540d\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</li> <li>\u30ad\u30fc\u30ed\u30ae\u30f3\u30b0\u653b\u6483\u3001\u30de\u30eb\u30a6\u30a8\u30a2\uff0f\u30a6\u30a4\u30eb\u30b9\u30d9\u30fc\u30b9\u306e\u653b\u6483\u3001\u305d\u306e\u4ed6\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3084\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u306e\u60aa\u7528\u304b\u3089\u4fdd\u8b77\u3057\u307e\u3059\u3002</li> <li>\u6709\u7dda\u30fb\u7121\u7dda\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u306f\u63a5\u7d9a\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002</li> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u3042\u308bVM\u30de\u30b7\u30f3\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> <li>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u306b\u3064\u3044\u3066\u66f4\u306b\u8a73\u3057\u304f\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u3061\u3089\u3092\u53c2\u7167\u4e0b\u3055\u3044\u3002</li> </ul> <p>\uff11\uff0e2-1. \u4f9d\u5b58\u95a2\u4fc2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30682-2. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u5b9f\u884c\u3059\u308b  </p> <p>\uff12\uff0e\u4ee5\u4e0b\u306e\u30d1\u30b9\u3092\u74b0\u5883\u5909\u6570\u306b\u30bb\u30c3\u30c8\u3057\u3001\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <pre><code>echo export NODE_HOME=$HOME/cnode &gt;&gt; $HOME/.bashrc\necho export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH\" &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK=\"--mainnet\" &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=mainnet &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\nmkdir -p $NODE_HOME\n</code></pre> \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u306e\u5834\u5408\u306f\u3053\u3061\u3089 PreviewPreProd <pre><code>echo export NODE_HOME=$HOME/cnode &gt;&gt; $HOME/.bashrc\necho export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH\" &gt;&gt; $HOME/.bashrc\necho export NODE_CONFIG=preview &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 2\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=2 &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\nmkdir -p $NODE_HOME\n</code></pre> <pre><code>echo export NODE_HOME=$HOME/cnode &gt;&gt; $HOME/.bashrc\necho export PKG_CONFIG_PATH=\"/usr/local/lib/pkgconfig:$PKG_CONFIG_PATH\" &gt;&gt; $HOME/.bashrc\necho export NODE_CONFIG=preview &gt;&gt; $HOME/.bashrc\necho export NODE_NETWORK='\"--testnet-magic 1\"' &gt;&gt; $HOME/.bashrc\necho export CARDANO_NODE_NETWORK_ID=1 &gt;&gt; $HOME/.bashrc\nsource $HOME/.bashrc\nmkdir -p $NODE_HOME\n</code></pre>"},{"location":"setup/3-relay-bp-setup/","title":"3. \u30ea\u30ec\u30fc\u3068BP\u3092\u63a5\u7d9a\u3059\u308b","text":"<p>\u30ea\u30ec\u30fcBP\u3068\u306e\u5f79\u5272</p> <ul> <li> <p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9(\u30ea\u30ec\u30fc) \u81ea\u8eab\u306eBP\u3068\u4ed6\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9(\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af)\u3068\u306e\u7e4b\u304c\u308a\u3092\u6301\u3061\u6700\u65b0\u30b9\u30ed\u30c3\u30c8\u3092\u53d6\u5f97\u3057\u30d6\u30ed\u30c3\u30af\u4f1d\u64ad\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u307e\u3059\u3002</p> </li> <li> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9(BP) \u30d6\u30ed\u30c3\u30af\u751f\u6210\u5c02\u7528\u30ce\u30fc\u30c9\u3067\u3059\u3002\u30d6\u30ed\u30c3\u30af\u751f\u6210\u306b\u5fc5\u8981\u306a\u30ad\u30fc\u3068\u8a3c\u660e\u66f8 (node.cert, kes.skey vrf.skey)\u3092\u7528\u3044\u3066\u8d77\u52d5\u3057\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u307f\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u5316\u3057\u307e\u3059\u3002  </p> </li> </ul>"},{"location":"setup/3-relay-bp-setup/#3-1-p2p","title":"3-1. \u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u3092\u7406\u89e3\u3059\u308b","text":"<p>\u30c0\u30a4\u30ca\u30df\u30c3\u30afP2P\u306f\u30ab\u30eb\u30c0\u30ce\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u6210\u3059\u308b\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u500b\u3005\u306e\u7e4b\u304c\u308a\u3092\u5f62\u6210\u3059\u308b\u305f\u3081\u306b\u9759\u7684\u63a5\u7d9a\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u5fc5\u8981\u3068\u305b\u305a\u3001\u53f0\u5e33\u306b\u767b\u9332\u3055\u308c\u305f\u5404\u30d7\u30fc\u30eb\u306e\u30ea\u30ec\u30fc\u30ea\u30b9\u30c8\u306e\u4e2d\u304b\u3089\u6700\u9069\u306a\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u691c\u51fa\u3057\u81ea\u52d5\u63a5\u7d9a\u3057\u307e\u3059\u3002 \u3053\u308c\u306b\u3088\u308a\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u3001\u56de\u5fa9\u529b\u3001\u5206\u6563\u5316\u3092\u3055\u3089\u306b\u5f37\u5316\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"setup/3-relay-bp-setup/#_1","title":"\u305d\u308c\u305e\u308c\u306e\u5185\u90e8\u6a5f\u80fd\u3068\u5f79\u5272","text":"\u6a5f\u80fd\u540d \u5f79\u5272 \u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc \u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3059\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406 \u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc \u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u306b\u63a5\u7d9a\u3057\u3066\u304f\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406 \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u30fc \u5168\u3066\u306eTCP\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u72b6\u614b\u7ba1\u7406\u30fb\u8ffd\u8de1 \u30d4\u30a2\u5171\u6709(Peer Sharing) \u30ce\u30fc\u30c9\u3092\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u4f1d\u9054\u30fb\u65e2\u77e5\u306e\u30d4\u30a2\u306b\u8ffd\u52a0\u3059\u308b\u6a5f\u80fd Genesis lite(Bootstrap Peers) Ouroboros Genesis\u5b9f\u88c5\u307e\u3067\u306e\u4fe1\u983c\u30ce\u30fc\u30c9\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u6a5f\u80fd <p>\u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc\u3068\u306f\uff1f(Outgoing)</p> <p>\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3059\u308b\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308b\u6a5f\u80fd\u3067\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(mainnet-config.json)\u3067\u63a5\u7d9a\u6570\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u304c\u53ef\u80fd\u3002</p> \u8a2d\u5b9a\u30d5\u30e9\u30b0:\u30c7\u30d5\u30a9\u30eb\u30c8\u5024 \u5f79\u5272 \"TargetNumberOfKnownPeers:100\" \u5168\u4f53\u306e\u65e2\u77e5\u30eb\u30fc\u30c8\u30d4\u30a2\u6570(Hot/Warm/Cold\u5408\u8a08) \"TargetNumberOfEstablishedPeers:50\" \u63a5\u7d9a\u3092\u78ba\u7acb\u3055\u305b\u305f\u3044\u30eb\u30fc\u30c8\u30d4\u30a2\u6570(Hot/Warm/\u5408\u8a08) \"TargetNumberOfActivePeers:20\" Hot\u63a5\u7d9a\u3055\u305b\u305f\u3044\u30eb\u30fc\u30c8\u30d4\u30a2\u6570 \"TargetNumberOfRootPeers:100\" \u53f0\u5e33\u304b\u3089\u53d6\u5f97\u3059\u308b\u30eb\u30fc\u30c8\u30d4\u30a2\u306e\u6570 <ul> <li><code>TargetNumberOfRootPeers</code>\u306f\u3001\u5168\u4f53\u306e\u65e2\u77e5\u30d4\u30a2\u6570\u3092\u6c7a\u3081\u308b<code>TargetNumberOfKnownPeers</code>\u3068\u540c\u7b49\u304b\u305d\u308c\u4ee5\u4e0b\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li><code>TargetNumberOfRootPeers</code>\u3092\u6e1b\u3089\u3059\u3053\u3068\u3067\u3001\u53f0\u5e33\u304b\u3089\u81ea\u52d5\u53d6\u5f97\u3059\u308b\u30d4\u30a2\u306e\u4ed6\u306b<code>PeerSharing</code>\u306b\u3088\u308a\u4ed6\u306e\u30ce\u30fc\u30c9\u304b\u3089\u4f1d\u9054\u3055\u308c\u305f\u30d4\u30a2\u60c5\u5831\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</li> <li>Hot/Warm/Cold\u306e\u63a5\u7d9a\u9078\u5b9a\u306f\u305d\u306e\u30ce\u30fc\u30c9\u306b\u3068\u3063\u3066\u4e00\u756a\u6700\u9069\u306a\u63a5\u7d9a\u5148\u3092\u30ce\u30fc\u30c9\u304c\u5168\u81ea\u52d5\u3067\u5236\u5fa1\u3059\u308b\u306e\u3067SPO\u304c\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002</li> </ul> <p></p> <p>\u30d4\u30a2\u5171\u6709\u3068\u306f\uff1f(Peer Sharing)</p> <p>\u30a2\u30a6\u30c8\u30d0\u30a6\u30f3\u30c9\u30ac\u30d0\u30ca\u30fc\u3078\u306e\u65e2\u77e5\u306e\u30d4\u30a2\u3092\u8ffd\u52a0\u3059\u308b2\u3064\u76ee\u306e\u65b9\u6cd5\u3067\u3059\u3002\u30d4\u30a2\u5171\u6709\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u63a5\u7d9a\u5148\u30ce\u30fc\u30c9\u304b\u3089\u30d4\u30a2\u60c5\u5831\u3092\u8981\u6c42\u3067\u304d\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u81ea\u8eab\u306e\u30d4\u30a2\u3092\u4f1d\u9054\u3067\u304d\u307e\u3059\u3002\u7279\u306b\u53f0\u5e33\u306b\u767b\u9332\u3057\u3066\u3044\u306a\u3044\u30ea\u30ec\u30fc\u3092\u4ed6\u306e\u30ea\u30ec\u30fc\u306b\u77e5\u3089\u305b\u308b\u969b\u306b\u6709\u52b9\u3067\u3059\u3002  </p> <ul> <li>mainnet-topology.json\u30d5\u30a1\u30a4\u30eb\u3067\u4f1d\u9054\u3057\u305f\u3044\u30ea\u30ec\u30fc\u60c5\u5831\u306b\u5bfe\u3057\u3066<code>advertise: true</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u306e\u30c8\u30dd\u30ed\u30b8\u30fc\u306b\u8a18\u8f09\u3055\u308c\u305fBP\u60c5\u5831\u306b\u5bfe\u3057\u3066<code>advertise: true</code>\u3092\u6307\u5b9a\u3059\u308b\u3068BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u304c\u5916\u90e8\u306b\u6f0f\u6d29\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u5fc5\u305a<code>advertise: false</code>\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"setup/3-relay-bp-setup/#3-3","title":"3-3. \u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u5909\u66f4","text":"<p>mainnet-topology.json \u3068\u306f\uff1f</p> <ul> <li>P2P(\u30d4\u30a2\u30c4\u30fc\u30d4\u30a2)\u63a5\u7d9a\u306b\u304a\u3051\u308b\u56fa\u5b9a\u63a5\u7d9a\u5148\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002</li> <li>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u30ce\u30fc\u30c9\u3001\u30d1\u30d6\u30ea\u30c3\u30af\u30ce\u30fc\u30c9 (IOHK\u3084\u4ed6\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9) \u53ca\u3073\u3001\u81ea\u8eab\u306e\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</li> <li>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u306f\u3001\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u60c5\u5831\u306e\u307f\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002</li> <li>\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u6307\u5b9a\u3059\u308bIP\u306f\u30b5\u30fc\u30d0\u30fc\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u66f8\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044</li> <li>\u5404\u30ce\u30fc\u30c9\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u90fd\u5ea6\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044</li> </ul> <p>\u8a2d\u5b9a\u306e\u524d\u63d0\u6761\u4ef6</p> <p>\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3059\u308b\u524d\u306b\u30ea\u30ec\u30fc/BP\u30ce\u30fc\u30c9\u304c\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u3068\u540c\u671f\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>cardano-cli conway query tip --mainnet | grep syncProgress\n</code></pre></p> <p>\u623b\u308a\u5024\u78ba\u8a8d <code>\"syncProgress\": \"100.00\"</code> </p> <p>\u623b\u308a\u5024\u304c99\u4ee5\u4e0b\u306e\u5834\u5408\u306f100(\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u307e\u3067\u540c\u671f)\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046\u3002</p> <p>\u65b0\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u9805\u76ee\u89e3\u8aac</p> \u9805\u76ee \u8aac\u660e <code>bootstrapPeers</code> Genesis lite bootstrap\u7528\u30ce\u30fc\u30c9 <code>localRoots</code> \u5e38\u306bHot\u63a5\u7d9a\u3092\u56fa\u5b9a\u3057\u305f\u3044\u63a5\u7d9a\u5148\u3092\u8a18\u5165 <code>accessPoints</code> \u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7 <code>advertise</code> PeerSharing\u4f1d\u64ad\u30d5\u30e9\u30b0 <code>trustable</code> \u4fe1\u983c\u30ce\u30fc\u30c9\u8a2d\u5b9a\u30d5\u30e9\u30b0 <code>valency</code> \u63a5\u7d9a\u6570(\u63a5\u7d9a\u5148\u30b0\u30eb\u30fc\u30d7\u5185\u306b\u8a18\u8f09\u3057\u305f\u6570\u3068\u4e00\u81f4\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059) <code>publicRoots</code> IOG\u30ea\u30ec\u30fc\u306a\u3069\u306e\u516c\u958b\u30ea\u30ec\u30fc\u63a5\u7d9a\u5148 <code>useLedgerAfterSlot</code> \u521d\u671f\u540c\u671f\u306e\u969b\u306b\u53f0\u5e33Peer\u691c\u7d22\u3092\u6709\u52b9\u306b\u3059\u308b\u30b9\u30ed\u30c3\u30c8\u756a\u53f7 <p>\u4ee5\u4e0b\u3001\u5404\u30ce\u30fc\u30c9\u3054\u3068\u306e\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u5834\u5408 <p>\u30ea\u30ec\u30fc\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u3092\u5909\u66f4</p> \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u306e\u6ce8\u610f\u70b9 <p>\u3054\u5229\u7528\u306eVPS\u306b\u3088\u3063\u3066\u306f\u7ba1\u7406\u753b\u9762\u304b\u3089FW\u3092\u8a2d\u5b9a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff08\u4f8bAWS\u7cfb\u306a\u3069\uff09 \u305d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u308f\u305a\u3001VPS\u30de\u30a4\u30da\u30fc\u30b8\u7ba1\u7406\u753b\u9762\u306a\u3069\u304b\u3089\u500b\u5225\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3067\u4f7f\u7528\u3059\u308b <code>6000</code> \u756a\u30dd\u30fc\u30c8\u306e\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u3002\u4efb\u610f\u306e\u756a\u53f7\u3067\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u305d\u306e\u756a\u53f7\u3092\u8a31\u53ef\u3059\u308b\u3002</p> <p><pre><code>sudo ufw allow 6000/tcp\n</code></pre> <pre><code>sudo ufw reload\n</code></pre></p> <p>\u30ea\u30ec\u30fcTopology\u30d5\u30a1\u30a4\u30eb\u5909\u66f4</p> <p>\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u304b\u3089\u63a5\u7d9a\u3092\u56fa\u5b9a\u3059\u308b\u30ce\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <ul> <li>IP\u306f\u5404\u30b5\u30fc\u30d0\u30fc\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066\u4e0b\u3055\u3044\u3002</li> <li>\u30dd\u30fc\u30c8\u756a\u53f7\u306f2-4\u3067\u8a2d\u5b9a\u3057\u305f\u5404\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002(SSH\u30dd\u30fc\u30c8\u3068\u9593\u9055\u3048\u306a\u3044\u3067\u304f\u3060\u3055\u3044)</li> </ul> <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p><pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": [\n    {\n    \"address\": \"backbone.cardano.iog.io\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.emurgornd.com\",\n    \"port\": 3001\n    },\n    {\n    \"address\": \"backbone.mainnet.cardanofoundation.org\",\n    \"port\": 3001\n    }\n],\n\"localRoots\": [\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"BP\u306eIP\",#(1)!\n        \"port\": 00000 #(2)!\n        }\n    ],\n        \"advertise\": false,#(5)!\n        \"trustable\": true,\n        \"valency\": 1\n    },\n    {\n    \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n    ],\n        \"advertise\": true,\n        \"trustable\": true,\n        \"valency\": 1\n    }\n],\n\"publicRoots\": [\n    {\n    \"accessPoints\": [],\n    \"advertise\": false\n    }\n],\n\"useLedgerAfterSlot\": 128908821\n}\nEOF\n</code></pre></p> <ol> <li>BP\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>BP\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>accessPoints\u306bBP\u3092\u6307\u5b9a\u3059\u308b\u6642\u306f\u5fc5\u305a<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> BP\u306e\u5834\u5408 <p>BP-Topology\u30d5\u30a1\u30a4\u30eb\u5909\u66f4  </p> <p>\u5b9f\u884c\u524d\u306b <code>+</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u6ce8\u91c8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>BP\u3067\u306f<code>bootstrapPeers</code>\u3068<code>PeerSharing</code>\u3092\u7121\u52b9\u306b\u3057\u307e\u3059 <pre><code>cat &gt; $NODE_HOME/${NODE_CONFIG}-topology.json &lt;&lt; EOF\n{\n\"bootstrapPeers\": null,\n\"localRoots\": [\n    {\n      \"accessPoints\": [\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff11\u306eIP\",#(1)!\n        \"port\": 6000 #(2)!\n        },\n        {\n        \"address\": \"\u30ea\u30ec\u30fc\uff12\u306eIP\",#(3)!\n        \"port\": 6000 #(4)!\n        }\n      ],\n      \"advertise\": false,#(8)!\n      \"trustable\": true,\n      \"valency\": 2 #(5)!\n    }\n],\n\"publicRoots\": [],#(6)!\n\"useLedgerAfterSlot\": -1 #(7)!\n}\nEOF\n</code></pre></p> <ol> <li>\u30ea\u30ec\u30fc\uff11\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff11\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306eIP\u30a2\u30c9\u30ec\u30b9\u307e\u305f\u306fDNS\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u30ea\u30ec\u30fc\uff12\u306e\u30dd\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</li> <li>\u56fa\u5b9a\u63a5\u7d9a\u30d4\u30a2\u306e\u6570\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044</li> <li>\"publicRoots\":\u3092\u7a7a\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> <li><code>-1</code>\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u53f0\u5e33\u304b\u3089\u63a5\u7d9a\u5148\u3092\u53d6\u5f97\u3057\u306a\u3044BP\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059</li> <li>\u3053\u3053\u3067\u306f<code>advertise</code>\u3092<code>false</code>\u306b\u3057\u3066\u304f\u3060\u3055\u3044</li> </ol> <p>mainnet-topology.json\u69cb\u6587\u30c1\u30a7\u30c3\u30af <pre><code>cat $NODE_HOME/mainnet-topology.json | jq .\n</code></pre></p> \u6b63\u5e38parse error <p>mainnet-topology.json\u306e\u4e2d\u8eab\u304c\u305d\u306e\u307e\u307e\u8868\u793a\u3055\u308c\u307e\u3059</p> <p>json\u8a18\u6cd5\u306b\u8aa4\u308a\u304c\u3042\u308b\u305f\u3081\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002mainnet-topology.json\u3092\u958b\u3044\u3066<code>{}</code> <code>[]</code> <code>,</code>\u304c\u6b63\u3057\u3044\u4f4d\u7f6e\u306b\u3042\u308b\u304b\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002 <pre><code>parse error: Expected another key-value pair at line x, column x\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>cnrestart\n</code></pre></p>"},{"location":"setup/4-bp-setup/","title":"4.BP\u7528\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210","text":"<p>\u4e8b\u524d\u78ba\u8a8d</p> <p>\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u5b9f\u65bd\u3059\u308b\u524d\u306bBP\u30ce\u30fc\u30c9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>cardano-cli conway query tip --mainnet | grep syncProgress\n</code></pre></p> <p>\u623b\u308a\u5024\u78ba\u8a8d <code>\"syncProgress\": \"100.00\"</code> \u623b\u308a\u5024\u304c99\u4ee5\u4e0b\u306e\u5834\u5408\u306f100(\u6700\u65b0\u30d6\u30ed\u30c3\u30af\u307e\u3067\u540c\u671f)\u306b\u306a\u308b\u307e\u3067\u5f85\u3061\u307e\u3057\u3087\u3046\u3002</p> <p>BP\u8d77\u52d5\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3068\u306f\uff1f</p> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067\u306f\uff13\u3064\u306e\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ul> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u904b\u7528\u8a3c\u660e\u66f8 (node.cert)</li> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ad\u30fc (kes.skey)</li> <li>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306eVRF\u30ad\u30fc (vrf.skey)</li> </ul>"},{"location":"setup/4-bp-setup/#1kes","title":"1.KES\u30ad\u30fc\u306e\u4f5c\u6210","text":"<p>KES\u30ad\u30fc\u306b\u3064\u3044\u3066</p> <p>(KES=Key Evolving Signature)\u306e\u7565 \u30ad\u30fc\u3092\u60aa\u7528\u3059\u308b\u30cf\u30c3\u30ab\u30fc\u304b\u3089\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u3092\u4fdd\u8b77\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u300190\u65e5\u3054\u3068\u306b\u518d\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway node key-gen-KES \\\n    --verification-key-file kes.vkey \\\n    --signing-key-file kes.skey\n</code></pre>"},{"location":"setup/4-bp-setup/#2","title":"2.\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306e\u4f5c\u6210","text":"<p>\u6ce8\u610f</p> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3067\u751f\u6210\u3057\u4fdd\u7ba1\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u3067\u91cd\u8981\u306a\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u3067\u3059\u3002\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067\u4f5c\u6210\u3057\u30aa\u30f3\u30e9\u30a4\u30f3\u74b0\u5883\u306b\u4fdd\u7ba1\u3057\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002 \u5916\u90e8\u306b\u6d41\u51fa\u3059\u308b\u3068\u30d7\u30fc\u30eb\u304c\u4e57\u3063\u53d6\u3089\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u7ba1\u7406\u306b\u306f\u5341\u5206\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044 \u307e\u305f\u8907\u6570\u306eUSB\u306b\u4fdd\u7ba1\u3057\u3001\u7d76\u5bfe\u306b\u4e0a\u66f8\u304d\u30fb\u524a\u9664\u3057\u306a\u3044\u3088\u3046\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306f\u6b21\u306e\u30d1\u30b9\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059 <code>$HOME/cold-keys</code></p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>mkdir $HOME/cold-keys\n</code></pre> <p>\u30b3\u30fc\u30eb\u30c9\u30ad\u30fc\u306e\u30da\u30a2\u30ad\u30fc\u3068\u30ab\u30a6\u30f3\u30bf\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> <p><pre><code>cd $HOME/cold-keys\ncardano-cli conway node key-gen \\\n    --cold-verification-key-file node.vkey \\\n    --cold-signing-key-file node.skey \\\n    --operational-certificate-issue-counter node.counter\n</code></pre> \u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306b\u66f4\u65b0\u3057\u307e\u3059\u3002 <pre><code>chmod 400 node.vkey\nchmod 400 node.skey\n</code></pre></p> <p>\u91cd\u8981</p> <p>\u3059\u3079\u3066\u306e\u30ad\u30fc\u3092\u5225\u306e\u5b89\u5168\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30c7\u30d0\u30a4\u30b9(USB)\u306a\u3069\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u307e\u3057\u3087\u3046\uff01\u8907\u6570\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002</p>"},{"location":"setup/4-bp-setup/#3","title":"3.\u30d7\u30fc\u30eb\u904b\u7528\u8a3c\u660e\u66f8\u306e\u4f5c\u6210","text":"<p>\u4e8b\u524d\u78ba\u8a8d</p> <p>\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u5b8c\u5168\u306b\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u540c\u671f\u304c\u9014\u4e2d\u306e\u5834\u5408\u3001\u6b63\u3057\u3044slotsPerKESPeriod\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002 \u3042\u306a\u305f\u306eBP\u30ce\u30fc\u30c9\u304c\u5b8c\u5168\u306b\u540c\u671f\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001\u30ab\u30eb\u30c0\u30ce\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u3067\u81ea\u8eab\u306e\u540c\u671f\u6e08\u307f\u30a8\u30dd\u30c3\u30af\u3068\u30b9\u30ed\u30c3\u30c8\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u304b\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p>\u30b8\u30a7\u30cd\u30b7\u30b9\u30d5\u30a1\u30a4\u30eb\u304b\u3089slotsPerKESPeriod\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 <pre><code>cd $NODE_HOME\nslotsPerKESPeriod=$(cat $NODE_HOME/${NODE_CONFIG}-shelley-genesis.json | jq -r '.slotsPerKESPeriod')\necho slotsPerKESPeriod: ${slotsPerKESPeriod}\n</code></pre> \u540c\u671f\u6e08\u307fslotNo\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002 <pre><code>slotNo=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho slotNo: ${slotNo}\n</code></pre></p> <p>startKesPeriod\u3092\u7b97\u51fa\u3057\u307e\u3059\u3002</p> <pre><code>kesPeriod=$((${slotNo} / ${slotsPerKESPeriod}))\necho kesPeriod: ${kesPeriod}\nstartKesPeriod=${kesPeriod}\necho startKesPeriod: ${startKesPeriod}\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>kes.skey</code>\u3068<code>kes.vkey</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|kes.skey / kes.vkey| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>kes.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum kes.vkey\n</code></pre> <p>\u78ba\u8a8d</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u30aa\u30da\u30ec\u30fc\u30bf\u306f\u3001\u30d7\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306e\u904b\u7528\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a3c\u660e\u66f8\u306b\u306f\u3001\u30aa\u30da\u30ec\u30fc\u30bf\u306e\u7f72\u540d\u304c\u542b\u307e\u308c\u30d7\u30fc\u30eb\u306b\u95a2\u3059\u308b\u60c5\u5831\uff08\u30a2\u30c9\u30ec\u30b9\u3001\u30ad\u30fc\u306a\u3069\uff09\u304c\u542b\u307e\u308c\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nread -p \"BP\u3067\u7b97\u51fa\u3057\u305fstartKesPeriod\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044:\" kes\n</code></pre> <p>\u2191\u3053\u306e\u307e\u307e\u30b3\u30de\u30f3\u30c9\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u5f8c\u306b\u3001\u6570\u5b57\u5165\u529b\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\u306e\u3067 \u305d\u3053\u3067BP\u3067\u7b97\u51fa\u3057\u305f<code>startKesPeriod</code>\u306e\u6570\u5b57\u3092\u5165\u529b\u3057\u307e\u3059</p> <p>\u5165\u529b\u3057\u305f\u6570\u5b57\u304c\u623b\u308a\u5024\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b <pre><code>echo \"\u5165\u529b\u3057\u305f\u6570\u5b57\u306f$kes\u3067\u3059\"\n</code></pre></p> <pre><code>cardano-cli conway node issue-op-cert \\\n    --kes-verification-key-file kes.vkey \\\n    --cold-signing-key-file $HOME/cold-keys/node.skey \\\n    --operational-certificate-issue-counter $HOME/cold-keys/node.counter \\\n    --kes-period $kes \\\n    --out-file node.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306enode.cert \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|node.cert| B[BP];</code></pre> <p>** BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>node.cert</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b **</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum node.cert\n</code></pre>"},{"location":"setup/4-bp-setup/#4vrf","title":"4.VRF\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway node key-gen-VRF \\\n    --verification-key-file vrf.vkey \\\n    --signing-key-file vrf.skey\n</code></pre> <p>vrf\u30ad\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8aad\u307f\u53d6\u308a\u5c02\u7528\u306b\u66f4\u65b0\u3057\u307e\u3059\u3002 <pre><code>chmod 400 vrf.skey\nchmod 400 vrf.vkey\n</code></pre></p> <p>\u6ce8\u610f</p> <p>vrf\u30ad\u30fc\u3092\u8aa4\u3063\u3066\u524a\u9664\u3057\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/4-bp-setup/#5bp","title":"5.BP\u30ce\u30fc\u30c9\u3068\u3057\u3066\u518d\u8d77\u52d5","text":"<p>BP\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u505c\u6b62\u3059\u308b  </p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>sudo systemctl stop cardano-node\n</code></pre> <p>\u30ce\u30fc\u30c9\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u78ba\u8a8d\u3059\u308b <pre><code>PORT=`grep \"PORT=\" $NODE_HOME/startBlockProducingNode.sh`\nb_PORT=${PORT#\"PORT=\"}\necho \"BP\u30dd\u30fc\u30c8\u306f${b_PORT}\u3067\u3059\"\n</code></pre></p> <p>\u2191\u305d\u306e\u307e\u307e\u5b9f\u884c\u3057\u3001BP\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b</p> <p>\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306bKES\u3001VRF\u3001\u904b\u7528\u8a3c\u660e\u66f8\u306e\u30d1\u30b9\u3092\u8ffd\u8a18\u3057\u66f4\u65b0\u3057\u307e\u3059\u3002</p> \u3053\u306e\u30dc\u30c3\u30af\u30b9\u306f\u3059\u3079\u3066\u30b3\u30d4\u30fc\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>cat &gt; $NODE_HOME/startBlockProducingNode.sh &lt;&lt; EOF \n#!/bin/bash\nDIRECTORY=$NODE_HOME\nPORT=${b_PORT}\nHOSTADDR=0.0.0.0\nTOPOLOGY=\\${DIRECTORY}/${NODE_CONFIG}-topology.json\nDB_PATH=\\${DIRECTORY}/db\nSOCKET_PATH=\\${DIRECTORY}/db/socket\nCONFIG=\\${DIRECTORY}/${NODE_CONFIG}-config.json\nSNAPSHOT=43200\nKES=\\${DIRECTORY}/kes.skey\nVRF=\\${DIRECTORY}/vrf.skey\nCERT=\\${DIRECTORY}/node.cert\n/usr/local/bin/cardano-node +RTS -N --disable-delayed-os-memory-return -I0.1 -Iw300 -A32m -n4m -F1.5 -H2500M -T -S -RTS run --topology \\${TOPOLOGY} --database-path \\${DB_PATH} --socket-path \\${SOCKET_PATH} --host-addr \\${HOSTADDR} --port \\${PORT} --config \\${CONFIG} --shelley-kes-key \\${KES} --shelley-vrf-key \\${VRF} --shelley-operational-certificate \\${CERT} --snapshot-interval \\${SNAPSHOT}\nEOF\n</code></pre> <p>BP\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code>sudo systemctl start cardano-node\n</code></pre> <p>BP\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre> <p>\u30c1\u30a7\u30fc\u30f3\u540c\u671f\u5f8c\u306bCore\u306e\u8868\u793a\u304c\u3042\u308c\u3070OK</p> <p>\u6ce8\u610f\u4e8b\u9805</p> <p>\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u63c3\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3084\u8d77\u52d5\u6642\u306b\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u304c\u751f\u6210\u3067\u304d\u307e\u305b\u3093\u3002</p> <ul> <li>kes.skey</li> <li>vrf.skey</li> <li>node.cert</li> </ul>"},{"location":"setup/5-generate-address/","title":"5.\u30d7\u30fc\u30eb\u904b\u55b6\u3067\u4f7f\u7528\u3059\u308b\u30a2\u30c9\u30ec\u30b9\u3092\u4f5c\u6210\u3059\u308b","text":"<p>\u6ce8\u610f</p> <p>\u30d7\u30fc\u30eb\u767b\u9332\u5f8c\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u3084\u308a\u76f4\u3057\u3059\u308b\u3068\u5909\u66f4\u624b\u7d9a\u304d\u304c\u9762\u5012\u306b\u306a\u308b\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/5-generate-address/#1","title":"1.\u30d7\u30ed\u30c8\u30b3\u30eb\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97","text":"\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway query protocol-parameters \\\n    $NODE_NETWORK \\\n    --out-file params.json\n</code></pre> <p>\u904b\u7528\u4e0a\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u3059\u308b\u91cd\u8981\u306a\u30a2\u30c9\u30d0\u30a4\u30b9</p> <p>\u30ad\u30fc\u306e\u751f\u6210\u306f\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3067\u751f\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u304c\u7121\u304f\u3066\u3082\u751f\u6210\u53ef\u80fd\u3067\u3059\u3002 payment\u30ad\u30fc\u306f\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u4f7f\u7528\u3055\u308c\u3001stake\u30ad\u30fc\u306f\u30d7\u30fc\u30eb\u59d4\u4efb\u30a2\u30c9\u30ec\u30b9\u7528\u306e\u7ba1\u7406\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</p>"},{"location":"setup/5-generate-address/#2","title":"2.\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway address key-gen \\\n    --verification-key-file payment.vkey \\\n    --signing-key-file payment.skey\n</code></pre>"},{"location":"setup/5-generate-address/#3","title":"3. \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u30ad\u30fc\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address key-gen \\\n    --verification-key-file stake.vkey \\\n    --signing-key-file stake.skey\n</code></pre>"},{"location":"setup/5-generate-address/#4","title":"4.\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address build \\\n    --stake-verification-key-file stake.vkey \\\n    --out-file stake.addr \\\n    $NODE_NETWORK\n</code></pre>"},{"location":"setup/5-generate-address/#5_1","title":"5.\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306e\u4f5c\u6210","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cardano-cli conway address build \\\n    --payment-verification-key-file payment.vkey \\\n    --stake-verification-key-file stake.vkey \\\n    --out-file payment.addr \\\n    $NODE_NETWORK\n</code></pre> <p>\u4e0a\u66f8\u304d\u30fb\u524a\u9664\u3055\u308c\u306a\u3044\u3088\u3046\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>chmod 400 payment.vkey\nchmod 400 payment.skey\nchmod 400 stake.vkey\nchmod 400 stake.skey\nchmod 400 stake.addr\nchmod 400 payment.addr\n</code></pre> \u30d5\u30a1\u30a4\u30eb \u7528\u9014 <code>payment.vkey</code> payment\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 <code>payment.skey</code> payment\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 <code>payment.addr</code> payment\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb <code>stake.vkey</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u516c\u958b\u9375 <code>stake.skey</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u79d8\u5bc6\u9375 <code>stake.addr</code> \u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u30d5\u30a1\u30a4\u30eb <p>\u6ce8\u610f</p> <p>\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7d1b\u5931\u3057\u306a\u3044\u3088\u3046\u306b\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u7279\u306b.vkey/.skey\u3092\u7121\u304f\u3057\u305f\u5834\u5408\u3001\u30d7\u30fc\u30eb\u5831\u916c\u3084\u8a93\u7d04\u91d1\u3092\u5f15\u304d\u51fa\u305b\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u8907\u6570\u306e\u5916\u90e8\u30c7\u30d0\u30a4\u30b9\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/5-generate-address/#6","title":"6.\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u5165\u91d1\u3059\u308b","text":"<p>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\u306f\u3001\u3042\u306a\u305f\u306e\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u3059\u308b\u624b\u9806\u3067\u3059\u3002</p> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306epayment.addr\u3068stake.addr \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|payment.addr / stake.addr| B[BP];</code></pre></p> \u30e1\u30a4\u30f3\u30cd\u30c3\u30c8\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8 <p>\u4ee5\u4e0b\u306e\u30a6\u30a9\u30ec\u30c3\u30c8\u304b\u3089\u9001\u91d1\u304c\u53ef\u80fd\u3067\u3059</p> <ul> <li>\u30c0\u30a4\u30c0\u30ed\u30b9 / \u30e8\u30ed\u30a4\u30a6\u30a9\u30ec\u30c3\u30c8 / nami / ccvault.io</li> </ul> <p>\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u3092\u8868\u793a\u3055\u305b\u3001\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u3057\u307e\u3059\u3002</p> <pre><code>echo \"$(cat $NODE_HOME/payment.addr)\"\n</code></pre> <p>\u4f55ADA\u5165\u91d1\u3057\u305f\u3089\u3044\u3044\uff1f</p> <p>\u521d\u56de\u306f\u30c6\u30b9\u30c8\u3067\u5c11\u984d\u304b\u3089\u5165\u91d1\u3057\u3066\u304f\u3060\u3055\u3044  </p> <p>payment.addr\u306f\u4ee5\u4e0b\u306e\u5f79\u5272\u304c\u3042\u308b\u305f\u3081\u5fc5\u8981\u5206\u5165\u91d1\u3057\u3066\u304f\u3060\u3055\u3044 \u25cf\u30d7\u30fc\u30eb\u767b\u9332\u6599\u306e\u652f\u6255\u3044(500ADA) \u25cf\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u767b\u9332\u6599\u306e\u652f\u6255\u3044(2ADA) \u25cf\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u624b\u6570\u6599\u306e\u652f\u6255\u3044(\u6570ADA) \u25cf\u8a93\u7d04\u91d1\u306e\u9810\u3051\u5148(\u8a93\u7d04\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u305f\u3044\u984d)  </p> <p>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528tADA\u306e\u8acb\u6c42</p> <p>\u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528\u53e3\u5ea7\u306b\u3042\u306a\u305f\u306e\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\u3002 \u30c6\u30b9\u30c8\u30cd\u30c3\u30c8\u7528\u53e3\u5ea7\u306f24\u6642\u9593\u3054\u3068\u306b10000tADA\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\u3057\u3002\u652f\u6255\u3044\u30a2\u30c9\u30ec\u30b9\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002</p> <pre><code>echo \"$(cat $NODE_HOME/payment.addr)\"\n</code></pre> <p>\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6b04\u306b\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002</p> <p>\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9\u306b\u9001\u91d1\u5f8c\u3001\u6b8b\u9ad8\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30ce\u30fc\u30c9\u3092\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3068\u5b8c\u5168\u306b\u540c\u671f\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u5b8c\u5168\u306b\u540c\u671f\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u6b8b\u9ad8\u304c\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK\n</code></pre> <p>\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u5165\u91d1\u5b8c\u4e86\u3067\u3059\u3002</p> <pre><code>                        TxHash                                 TxIx        Lovelace\n----------------------------------------------------------------------------------------\n100322a39d02c2ead....                                              0        1000000000\n</code></pre>"},{"location":"setup/6-register-stakeaddress/","title":"6.\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332","text":""},{"location":"setup/6-register-stakeaddress/#1","title":"1.\u30b9\u30c6\u30fc\u30af\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b","text":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-address registration-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --key-reg-deposit-amt 2000000 \\\n    --out-file stake.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306estake.cert \u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|stake.cert| B[BP];</code></pre></p>"},{"location":"setup/6-register-stakeaddress/#2","title":"2.\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3059\u308b","text":"<p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332\u306b\u306f2000000 lovelace (2ADA)\u304c\u5fc5\u8981\u3067\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>keyDeposit\u306e\u5024\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>keyDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakeAddressDeposit')\necho keyDeposit: $keyDeposit\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} - ${keyDeposit} )) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --out-file tx.tmp \\\n    --certificate stake.cert\n</code></pre> <p>\u73fe\u5728\u306e\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 2 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${keyDeposit}-${fee}))\necho Change Output: ${txOut}\n</code></pre> <p>\u30b9\u30c6\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u767b\u9332\u3059\u308b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file stake.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306etx.raw\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>payment\u3068stake\u306e\u79d8\u5bc6\u9375\u3067\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306b\u7f72\u540d\u3057\u307e\u3059\u3002</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306etx.signed\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre> <p>\u7f72\u540d\u3055\u308c\u305f\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"setup/7-register-stakepool/","title":"7.\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306e\u767b\u9332","text":"<p>\u6982\u8981</p> <p>\u3053\u3061\u3089\u306e\u624b\u9806\u306f\u521d\u56de\u30d7\u30fc\u30eb\u767b\u9332\u6642\u306e\u307f\u6709\u52b9\u3067\u3059\u3002 \u30d7\u30fc\u30eb\u767b\u9332\u5f8c\u306b\u30e1\u30bf\u60c5\u5831\u3001\u8a93\u7d04\u3001\u56fa\u5b9a\u8cbb\u3001\u5909\u52d5\u8cbb\u3001\u30ea\u30ec\u30fc\u60c5\u5831\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u30d7\u30fc\u30eb\u60c5\u5831(pool.cert)\u306e\u66f4\u65b0\u306e\u5909\u66f4\u624b\u9806\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30d7\u30fc\u30eb\u767b\u9332\u6599</p> <p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u767b\u9332\u306b\u306f500ADA\u306e\u767b\u9332\u6599\u304c\u5fc5\u8981\u3067\u3059\u3002payment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"setup/7-register-stakepool/#1","title":"1.\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u4f5c\u6210","text":"<p>\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408</p> <p>\u300cjson\u30d5\u30a1\u30a4\u30eb\u3092Github\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5\u300d\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044</p> json\u30d5\u30a1\u30a4\u30eb\u3092Github\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5\u3054\u81ea\u8eab\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u30b5\u30fc\u30d0\u3067\u30db\u30b9\u30c8\u3059\u308b\u65b9\u6cd5 <p>1.Github\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059 https://github.com/ \u30e6\u30fc\u30b6\u30fc\u540d\u3092\u6700\u592713\u6587\u5b57\u4ee5\u5185\u3067\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>2.Repositories\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u53f3\u4e0a\u306eNew \u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002 </p> <p>3.\u30ea\u30dd\u30b8\u30c8\u30ea\u4f5c\u6210</p> <ul> <li>Repository name\u306b\u4efb\u610f\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d(\u6700\u592713\u6587\u5b57\u4ee5\u5185)\u3092\u5165\u529b</li> <li>Public\u3092\u9078\u629e</li> <li>Create repository\u3092\u30af\u30ea\u30c3\u30af</li> </ul> <p></p> <p>4.\u5c0f\u3055\u3044\u6587\u5b57\u3067\u66f8\u304b\u308c\u305f\"creating a new file\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002  </p> <p></p> <p>5.\u30d5\u30a1\u30a4\u30eb\u540d\u3092 poolMetaData.json \u3068\u3057\u3066\u5165\u529b\u3057 json \u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u3002</p> <p></p> <pre><code>{\n\"name\": \"MyPoolName\",\n\"description\": \"My pool description\",\n\"ticker\": \"MPN\",\n\"homepage\": \"https://myadapoolnamerocks.com\"\n}\n</code></pre> <p>\u4f5c\u6210\u6642\u306e\u6ce8\u610f</p> <ul> <li>\u4e0b\u8a18\u306f\u53c2\u8003\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u540d\u3001Ticker\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  </li> <li>\u307e\u3060homepage\u30a2\u30c9\u30ec\u30b9\u304c\u7121\u3044\u5834\u5408\u306f\u3001\u3054\u81ea\u8eab\u306eTwitter\u30a2\u30c9\u30ec\u30b9\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002</li> <li>ticker\u540d\u306e\u9577\u3055\u306f3\uff5e5\u6587\u5b57\u4ee5\u5185\u3067\u3001A-Z\u30680-9\u306e\u307f\u3067\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002  </li> <li>description\u306e\u9577\u3055\u306f255\u6587\u5b57\u4ee5\u5185(255byte)\u3068\u306a\u308a\u307e\u3059\u3002\uff08\u3072\u3089\u304c\u306a\u3001\u6f22\u5b57\u3001\u30ab\u30bf\u30ab\u30ca\u306f1\u6587\u5b572byte\uff09</li> </ul> <p>6.Commit Changes...\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p> </p> <p>7.\u4e0a\u90e8\u306e\u30e1\u30cb\u30e5\u30fc\u30bf\u30d6\u304b\u3089Settings\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</p> <p></p> <p>8.GitPages\u8a2d\u5b9a</p> <ul> <li>\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Pages\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>Branch\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u304b\u3089main /root\u3092\u9078\u629e\u3059\u308b</li> <li>Save\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</li> </ul> <p></p> <p>9.URL\u306e\u751f\u6210</p> <ul> <li>\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Pages\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u4e0a\u90e8\u306b\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u516c\u958bURL\u304c\u8868\u793a\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059</li> <li>\u8d64\u67a0\u306eURL\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059</li> </ul> <p></p> <p>10.\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306e\u751f\u6210</p> <p>9\u3067\u30b3\u30d4\u30fc\u3057\u305fURL\u306b<code>poolMetaData.json</code>\u3092\u7e4b\u3052\u307e\u3059</p> <p>\u4f8b\uff09https://btbf.github.io/sjg/poolMetaData.json</p> <p>\u3053\u306eURL\u306e\u6587\u5b57\u5217\u304c64\u6587\u5b57\u4ee5\u5185\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044</p> <p>11\uff0e\u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9\u3067json\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u8a08\u7b97\u3059\u308b\u3002  </p> <p>URL\u3092\u66f8\u304d\u63db\u3048\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u4e0b\u3055\u3044</p> <p>10\u3067\u4f5c\u6210\u3057\u305f\u30e1\u30bf\u30c7\u30fc\u30bfURL\u3092\u7528\u3044\u3066\u4e0b\u3055\u3044\u3002</p> <pre><code>cd $NODE_HOME\nwget -O poolMetaData.json https://xxx.github.io/xxx/poolMetaData.json \n</code></pre> <p>\u4e0b\u8a18\u306f\u53c2\u8003\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u540d\u3001Ticker\u540d\u306b\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  </p> <p>\u4f5c\u6210\u30eb\u30fc\u30eb</p> <p>ticker\u540d\u306e\u9577\u3055\u306f3\uff5e5\u6587\u5b57\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6587\u5b57\u306fA-Z\u30680-9\u306e\u307f\u3067\u69cb\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 description\u306e\u9577\u3055\u306f255\u6587\u5b57\u4ee5\u5185(255byte)\u3068\u306a\u308a\u307e\u3059\u3002\uff08\u3072\u3089\u304c\u306a\u3001\u6f22\u5b57\u3001\u30ab\u30bf\u30ab\u30ca\u306f1\u6587\u5b572byte\uff09</p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncat &gt; poolMetaData.json &lt;&lt; EOF\n{\n\"name\": \"MyPoolName\",\n\"description\": \"My pool description\",\n\"ticker\": \"MPN\",\n\"homepage\": \"https://myadapoolnamerocks.com\"\n}\nEOF\n</code></pre> <p>\u6ce8\u610f</p> <p>poolMetaData.json\u3092\u3042\u306a\u305f\u306e\u516c\u958b\u7528WEB\u30b5\u30fc\u30d0\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002 </p> <p>\u30e1\u30bf\u30c7\u30fc\u30bfJSON\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b <pre><code>cat $NODE_HOME/poolMetaData.json | jq .\n</code></pre></p> <p>\u623b\u308a\u5024\u306b\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408</p> <p>\u623b\u308a\u4fa1\u306b<code>parse error:</code>\u304c\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001JSON\u69cb\u6587\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002 \u4f5c\u6210\u3057\u305f\u30e1\u30bf\u30c7\u30fc\u30bfJSON\u30d5\u30a1\u30a4\u30eb\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002</p> <p>\u30e1\u30bf\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u8a08\u7b97\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool metadata-hash --pool-metadata-file poolMetaData.json &gt; poolMetaDataHash.txt\n</code></pre>"},{"location":"setup/7-register-stakepool/#2","title":"2.\u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u306e\u4f5c\u6210","text":"<p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306b\u3042\u308b<code>vrf.vkey</code>\u3068<code>poolMetaDataHash.txt</code> \u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[BP] --&gt;| vrf.vkey / poolMetaDataHash.txt | B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre></p> <p>** BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067<code>vrf.vkey</code>\u30d5\u30a1\u30a4\u30eb\u30cf\u30c3\u30b7\u30e5\u3092\u6bd4\u8f03\u3059\u308b **</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\nsha256sum vrf.vkey\n</code></pre> <p>BP\u3068\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u3067\u8868\u793a\u3055\u308c\u305f\u623b\u308a\u5024\u3092\u6bd4\u8f03\u3057\u3066\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u304c\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070OK  </p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\nsha256sum vrf.vkey\n</code></pre> <p>\u6700\u5c0f\u30d7\u30fc\u30eb\u30b3\u30b9\u30c8(\u6700\u4f4e\u56fa\u5b9a\u8cbb)\u3092\u51fa\u529b\u3057\u307e\u3059\u3002</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>minPoolCost=$(cat $NODE_HOME/params.json | jq -r .minPoolCost)\necho minPoolCost: ${minPoolCost}\n</code></pre> <p>minPoolCost(\u6700\u4f4e\u56fa\u5b9a\u8cbb)\u306f 170000000 lovelace (170 ADA)\u3067\u3059\u3002</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3067pool.cert\u3092\u4f5c\u6210\u3059\u308b</p> <p>pool.cert\u4f5c\u6210\u6642\u306e\u6ce8\u610f\u70b9\u25bc</p> <p>pool.cert\u306f\u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u3001\u30d7\u30fc\u30eb\u60c5\u5831\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002  </p> <ul> <li>\u8a93\u7d04 100ADA \u3000(--pool-pledge) \u3000\u6ce8\u91c8\u2192(1)  </li> <li>\u56fa\u5b9a\u624b\u6570\u6599 170ADA (--pool-cost) \u3000\u6ce8\u91c8\u2192(2)  </li> <li>\u5909\u52d5\u624b\u6570\u65995% (--pool-margin) \u3000\u6ce8\u91c8\u2192(3)  </li> </ul> <ol> <li> \u8a93\u7d04(Pledge)\u3068\u306f\uff1fPledge(\u8a93\u7d04)\u306f\u30b7\u30d3\u30eb\u653b\u6483\u3092\u9632\u3050\u76ee\u7684\u3067\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3001SPO\u304c\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u306bADA\u3092\u3088\u308a\u9810\u3051\u308b\u3053\u3068\u3067\u59d4\u4efb\u8005\u69d8\u306e\u5831\u916c\u304c\u82e5\u5e72\u591a\u304f\u5206\u914d\u3055\u308c\u308b\u8a2d\u8a08\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u8907\u6570\u30d7\u30fc\u30eb\u3092\u958b\u8a2d\u3059\u308b\u3088\u308a\u3082\u5358\u4e00\u30d7\u30fc\u30eb\u3067\u306e\u904b\u55b6\u30e1\u30ea\u30c3\u30c8\u4fc3\u3059\u305f\u3081\u306b\u8a2d\u3051\u3089\u308c\u305f\u5236\u5ea6\u3067\u3059\u30022022/02/16\u6642\u70b9\u3067\u306ePledge(\u8a93\u7d04)\u306e\u8a2d\u8a08\u306f\u3001SPO\u304c\u5dee\u3057\u51fa\u3059ADA(Pledge)\u304c10M ADA\u4ee5\u4e0a\u304b\u3089\u3058\u3083\u306a\u3044\u3068\u5831\u916c\u304c\u5897\u3048\u308b\u5272\u5408\u304c\u5909\u308f\u3089\u306a\u3044\u305f\u3081\u3001\u3042\u307e\u308a\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u306e\u304c\u5b9f\u60c5\u3067\u3059\u3002(\u73fe\u5728\u6539\u826f\u304c\u691c\u8a0e\u3055\u308c\u3066\u3044\u307e\u3059)</li> <li> \u56fa\u5b9a\u624b\u6570\u6599(cost)\u3068\u306f\uff1f\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u306e1\u3064\u3067\u3001\u6700\u4f4e170ADA\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd</li> <li> \u5909\u52d5\u624b\u6570\u6599(margin)\u3068\u306f\uff1f\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u306e1\u3064\u3067 (\u7dcf\u5831\u916c-\u56fa\u5b9a\u624b\u6570\u6599\u8cbb)\u306b\u304a\u3051\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u5831\u916c\u7387</li> </ol> \u8a93\u7d04(Pledge)\u306b\u3064\u3044\u3066\u25bc <p>\u81ea\u5206\u306e\u30d7\u30fc\u30eb\u306b\u4fdd\u8a3c\u91d1\u3092\u9810\u3051\u308b\u3053\u3068\u3092Pledge(\u8a93\u7d04)\u3068\u547c\u3073\u307e\u3059</p> <ul> <li>\u652f\u6255\u3044\u7528\u30a2\u30c9\u30ec\u30b9(payment.addr)\u306e\u6b8b\u9ad8\u306fPledge\u984d\u3088\u308a\u3082\u5927\u304d\u3044\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u8a93\u7d04\u91d1\u306fpayment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> <li>\u8a2d\u5b9a\u3057\u305f\u8a93\u7d04\u6570\u3088\u308apayment.addr\u306b\u5165\u91d1\u3055\u308c\u3066\u308bADA\u304c\u4e0b\u56de\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u30d7\u30fc\u30eb\u5831\u916c\u304c\uff10\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>\u8a93\u7d04\u91d1\u306f\u30ed\u30c3\u30af\u3055\u308c\u307e\u305b\u3093\u3002\u3044\u3064\u3067\u3082\u81ea\u7531\u306b\u53d6\u308a\u51fa\u305b\u307e\u3059\u304c\u30d7\u30fc\u30eb\u767b\u9332\u8a3c\u660e\u66f8\u3092\u518d\u63d0\u51fa\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul> \u30ea\u30ec\u30fc(--pool-relay-ipv4)\u306e\u8a18\u8ff0\u306b\u3064\u3044\u3066\u25bc <p>\u4e0a\u8a18\u306epool.cert\u4f5c\u6210\u6642\u3001\u81ea\u8eab\u306e\u30ea\u30ec\u30fc\u60c5\u5831\u3092\u4ee5\u4e0b\u306e3\u30d1\u30bf\u30fc\u30f3\u306e\u8a18\u8ff0\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002</p> <p>\u8907\u6570\u306e\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u3092\u69cb\u6210\u3059\u308b\u8a18\u8ff0\u65b9\u6cd5</p> <p>IP\u30a2\u30c9\u30ec\u30b9\u65b9\u5f0f\uff1a 1\u30ce\u30fc\u30c91IP\u30a2\u30c9\u30ec\u30b9\u306e\u5834\u5408(\u5206\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u3053\u3061\u3089) [xxx.xxx.xxx]\u3092\u30ea\u30ec\u30fc\u30ce\u30fc\u30c9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u3078\u66f8\u304d\u63db\u3048 <pre><code>    --pool-relay-ipv4 xxx.xxx.xxx \\\n    --pool-relay-port 6000 \\\n    --pool-relay-ipv4 xxx.xxx.xxx \\\n    --pool-relay-port 6000 \\\n</code></pre></p> <p>DNS\u65b9\u5f0f\uff1a1\u3064\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u5834\u5408 [relay1.yourdomain.com]\u3092\u3042\u306a\u305f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u66f8\u304d\u63db\u3048 <pre><code>    --single-host-pool-relay relay1.yourdomain.com \\\n    --pool-relay-port 6000 \\\n    --single-host-pool-relay relay2.yourdomain.com \\\n    --pool-relay-port 6000 \\\n</code></pre></p> <p>\u30e9\u30a6\u30f3\u30c9\u30ed\u30d3\u30f3DNS\u30d9\u30fc\u30b9 SRV DNS record\u306e\u5834\u5408 [relay.yourdomain.com]\u3092\u3042\u306a\u305f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306b\u66f8\u304d\u63db\u3048 <pre><code>    --multi-host-pool-relay relay.yourdomain.com \\\n    --pool-relay-port 6000 \\\n</code></pre></p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3(\u30ea\u30ec\u30fc1\u53f0\u306e\u5834\u5408)\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3(\u30ea\u30ec\u30fc2\u53f0\u306e\u5834\u5408) <p>\u4e0b\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u4f8b\u3067\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u904b\u7528\u8a2d\u5b9a\u5024\u306b\u5909\u66f4\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u5024\u3092\u5909\u66f4\u3059\u308b</p> <p><code>--pool-pledge</code> \u8a93\u7d04\u6570 <code>--pool-cost</code> \u56fa\u5b9a\u624b\u6570\u6599 <code>--pool-margin</code> \u5909\u52d5\u624b\u6570\u6599 <code>***.***.***.***</code>\u306f\u30ea\u30ec\u30fc1\u306eIP\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044 <code>https://xxx.github.io/xxx/poolMetaData.json</code> \u306f\u3054\u81ea\u8eab\u306e\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool registration-certificate \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --vrf-verification-key-file vrf.vkey \\\n    --pool-pledge 100000000 \\\n    --pool-cost 170000000 \\\n    --pool-margin 0.05 \\\n    --pool-reward-account-verification-key-file stake.vkey \\\n    --pool-owner-stake-verification-key-file stake.vkey \\\n    $NODE_NETWORK \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --metadata-url https://xxx.github.io/xxx/poolMetaData.json \\\n    --metadata-hash $(cat poolMetaDataHash.txt) \\\n    --out-file pool.cert\n</code></pre> <p>\u4e0b\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u4f8b\u3067\u3059\u3002\u3054\u81ea\u8eab\u306e\u30d7\u30fc\u30eb\u904b\u7528\u8a2d\u5b9a\u5024\u306b\u5909\u66f4\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002  </p> <p>\u5024\u3092\u5909\u66f4\u3059\u308b</p> <p><code>--pool-pledge</code> \u8a93\u7d04\u6570 <code>--pool-cost</code> \u56fa\u5b9a\u624b\u6570\u6599 <code>--pool-margin</code> \u5909\u52d5\u624b\u6570\u6599 <code>***.***.***.***</code>\u306f\u30ea\u30ec\u30fc1\u3001\u30ea\u30ec\u30fc2\u306eIP\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044  <code>https://xxx.github.io/xxx/poolMetaData.json</code> \u306f\u3054\u81ea\u8eab\u306e\u30e1\u30bf\u30c7\u30fc\u30bfURL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044</p> <pre><code>cd $NODE_HOME\ncardano-cli conway stake-pool registration-certificate \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --vrf-verification-key-file vrf.vkey \\\n    --pool-pledge 100000000 \\\n    --pool-cost 170000000 \\\n    --pool-margin 0.05 \\\n    --pool-reward-account-verification-key-file stake.vkey \\\n    --pool-owner-stake-verification-key-file stake.vkey \\\n    $NODE_NETWORK \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --pool-relay-ipv4 ***.***.***.*** \\\n    --pool-relay-port 6000 \\\n    --metadata-url https://xxx.github.io/xxx/poolMetaData.json \\\n    --metadata-hash $(cat poolMetaDataHash.txt) \\\n    --out-file pool.cert\n</code></pre> <p>\u81ea\u8eab\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u306b\u59d4\u4efb\u3059\u308b\u8a3c\u660e\u66f8(deleg.cert)\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cardano-cli conway stake-address stake-delegation-certificate \\\n    --stake-verification-key-file stake.vkey \\\n    --cold-verification-key-file $HOME/cold-keys/node.vkey \\\n    --out-file deleg.cert\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>pool.cert</code>\u3068<code>deleg.cert</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.cert / deleg.cert| B[BP];</code></pre></p>"},{"location":"setup/7-register-stakepool/#3","title":"3.\u30d7\u30fc\u30eb\u767b\u9332\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u9001\u4fe1","text":"<p>\u6700\u65b0\u306e\u30b9\u30ed\u30c3\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncurrentSlot=$(cardano-cli conway query tip $NODE_NETWORK | jq -r '.slot')\necho Current Slot: $currentSlot\n</code></pre> <p>payment.addr\u306e\u6b8b\u9ad8\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway query utxo \\\n    --address $(cat payment.addr) \\\n    $NODE_NETWORK &gt; fullUtxo.out\n\ntail -n +3 fullUtxo.out | sort -k3 -nr &gt; balance.out\n\ncat balance.out\n</code></pre> <p>UTXO\u3092\u7b97\u51fa\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>tx_in=\"\"\ntotal_balance=0\nwhile read -r utxo; do\n    in_addr=$(awk '{ print $1 }' &lt;&lt;&lt; \"${utxo}\")\n    idx=$(awk '{ print $2 }' &lt;&lt;&lt; \"${utxo}\")\n    utxo_balance=$(awk '{ print $3 }' &lt;&lt;&lt; \"${utxo}\")\n    total_balance=$((${total_balance}+${utxo_balance}))\n    echo TxHash: ${in_addr}#${idx}\n    echo ADA: ${utxo_balance}\n    tx_in=\"${tx_in} --tx-in ${in_addr}#${idx}\"\ndone &lt; balance.out\ntxcnt=$(cat balance.out | wc -l)\necho Total ADA balance: ${total_balance}\necho Number of UTXOs: ${txcnt}\n</code></pre> <p>poolDeposit\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>poolDeposit=$(cat $NODE_HOME/params.json | jq -r '.stakePoolDeposit')\necho poolDeposit: $poolDeposit\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u4eee\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+$(( ${total_balance} - ${poolDeposit})) \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee 200000 \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.tmp\n</code></pre> <p>\u6700\u4f4e\u624b\u6570\u6599\u3092\u8a08\u7b97\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>fee=$(cardano-cli conway transaction calculate-min-fee \\\n    --tx-body-file tx.tmp \\\n    --witness-count 3 \\\n    --protocol-params-file params.json | awk '{ print $1 }')\necho fee: $fee\n</code></pre> <p>\u8a08\u7b97\u7d50\u679c\u3092\u51fa\u529b\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>txOut=$((${total_balance}-${poolDeposit}-${fee}))\necho txOut: ${txOut}\n</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction build-raw \\\n    ${tx_in} \\\n    --tx-out $(cat payment.addr)+${txOut} \\\n    --invalid-hereafter $(( ${currentSlot} + 10000)) \\\n    --fee ${fee} \\\n    --certificate-file pool.cert \\\n    --certificate-file deleg.cert \\\n    --out-file tx.raw\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>BP\u306e<code>tx.raw</code>\u3092\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002</p> <pre><code>graph LR\n    A[BP] --&gt;|tx.raw| B[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7];</code></pre> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306b\u7f72\u540d\u3057\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>cd $NODE_HOME\ncardano-cli conway transaction sign \\\n    --tx-body-file tx.raw \\\n    --signing-key-file payment.skey \\\n    --signing-key-file $HOME/cold-keys/node.skey \\\n    --signing-key-file stake.skey \\\n    $NODE_NETWORK \\\n    --out-file tx.signed\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>tx.signed</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|tx.signed| B[BP];</code></pre></p> <p>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cardano-cli conway transaction submit \\\n    --tx-file tx.signed \\\n    $NODE_NETWORK\n</code></pre> <p>Transacsion Successfully submitted\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f</p>"},{"location":"setup/7-register-stakepool/#4","title":"4. \u30d7\u30fc\u30eb\u767b\u9332\u78ba\u8a8d","text":"<p>\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30ebID\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3067\u304d\u307e\u3059</p> \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3 <pre><code>chmod u+rwx $HOME/cold-keys\ncardano-cli conway stake-pool id --cold-verification-key-file $HOME/cold-keys/node.vkey --output-format bech32 --out-file pool.id-bech32\ncardano-cli conway stake-pool id --cold-verification-key-file $HOME/cold-keys/node.vkey --output-format hex --out-file pool.id\nchmod a-rwx $HOME/cold-keys\n</code></pre> <p>\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001</p> <p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e<code>pool.id-bech32</code>\u3068<code>pool.id</code>\u3092BP\u306ecnode\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 <pre><code>graph LR\n    A[\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7] --&gt;|pool.id-bech32 / pool.id| B[BP];</code></pre></p> <p>\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30d7\u30fc\u30eb\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>curl -s -X POST \"https://api.koios.rest/api/v0/pool_info\" \\\n    -H \"Accept: application/json\" \\\n    -H \"Content-Type: application/json\" \\\n    -d '{\"_pool_bech32_ids\":[\"'$(cat $NODE_HOME/pool.id-bech32)'\"]}' | jq .\n</code></pre> <p>\u81ea\u5206\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u304c<code>Cardanoscan</code>\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059</p> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <pre><code>cd $NODE_HOME\ncat pool.id-bech32\n</code></pre> <p>\u8868\u793a\u3055\u308c\u305fPoolID\u3067\u3042\u306a\u305f\u306e\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u304c\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u6b21\u306e\u30b5\u30a4\u30c8\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 Cardanoscan</p> <p>\u3042\u3068\u4e00\u606f\u3067\u3059\uff01</p> <p>\u4e0a\u8a18\u30b5\u30a4\u30c8\u3067\u3042\u306a\u305f\u306e\u30d7\u30fc\u30eb\u30c6\u30a3\u30c3\u30ab\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u306b\u767b\u9332\u3055\u308c\u307e\u3057\u305f\uff01\u3057\u304b\u3057\u307e\u3060\u30d6\u30ed\u30c3\u30af\u751f\u6210\u3067\u304d\u308b\u72b6\u614b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u5f8c\u3082\u91cd\u8981\u306a\u4f5c\u696d\u304c\u7d9a\u304d\u307e\u3059\u304c\u3082\u3046\u5c11\u3057\u9811\u5f35\u3063\u3066\u304f\u3060\u3055\u3044\uff01</p>"},{"location":"setup/8-final-adjustment/","title":"8.\u6700\u7d42\u8abf\u6574","text":""},{"location":"setup/8-final-adjustment/#8-1-tx","title":"8-1. Tx\u306e\u78ba\u8a8d","text":"<p>\u91cd\u8981\u306a\u78ba\u8a8d\u4e8b\u9805</p> <p>\u30d6\u30ed\u30c3\u30af\u3092\u751f\u6210\u3059\u308b\u306b\u306f\u3001\u300cTotal Tx\u300d\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30d7\u30fc\u30eb\u767b\u9332\u304b\u3089\u7d0412\u6642\u9593\u5f8c\u304b\u3089\u4ed6\u306e\u30ea\u30ec\u30fc\u304b\u3089\u306e\u63a5\u7d9a(Incoming)\u304c\u5897\u3048\u3066\u304d\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001Tx\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4e07\u4e00\u3001\u5897\u52a0\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u306f\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3084\u30c8\u30dd\u30ed\u30b8\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u518d\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP <pre><code>cd $NODE_HOME/scripts\n./gLiveView.sh\n</code></pre> <p>\u30d7\u30fc\u30eb\u767b\u9332\u304b\u3089\u7d0412\u6642\u9593~24\u6642\u9593\u5f8c\u306b\u300cTotal Tx\u300d\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b</p> <p></p>"},{"location":"setup/8-final-adjustment/#8-2-tracemempool","title":"8-2. Tracemempool\u7121\u52b9","text":"<p>\u91cd\u8981\u306a\u6700\u7d42\u8abf\u6574</p> <p>\u30ce\u30fc\u30c9\u7a3c\u50cd\u6642\u306e\u3001CPU/\u30e1\u30e2\u30ea\u6d88\u8cbb\u3092\u6291\u3048\u308b\u305f\u3081\u30ce\u30fc\u30c9\u8a2d\u5b9a\u3092\u8abf\u6574\u3057\u307e\u3059\u3002 \u3053\u306e\u8abf\u6574\u306f\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5de6\u53f3\u3057\u307e\u3059\u306e\u3067\u63a8\u5968\u8a2d\u5b9a\u3068\u306a\u308a\u307e\u3059\u3002</p> <ul> <li>\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u6d41\u5165\u30ed\u30b0\u3092\u30c8\u30ec\u30fc\u30b9(\u8a18\u9332)\u3059\u308b\u3053\u3068\u3067\u3001CPU/\u30e1\u30e2\u30ea\u6d88\u8cbb\u3092\u5897\u52a0\u3055\u305b\u308b\u539f\u56e0\u3068\u306a\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u306e\u6a5f\u80fd\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002  </li> <li>\u3053\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3068\u3001\u4e0a\u8a18\u3067\u78ba\u8a8d\u3057\u305f\u300cTotal TX\u300d\u300cPending Tx\u300d\u306f\u5897\u52a0\u3057\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u4e0a\u8a18\u3067\u5897\u52a0\u304c\u78ba\u8a8d\u3067\u304d\u3066\u3044\u308c\u3070\u554f\u984c\u3054\u3056\u3044\u307e\u305b\u3093</li> </ul> \u30ea\u30ec\u30fc/BP <pre><code>sed -i $NODE_HOME/${NODE_CONFIG}-config.json \\\n    -e \"s/TraceMempool\\\": true/TraceMempool\\\": false/g\"\n</code></pre> <p>\u30ce\u30fc\u30c9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl reload-or-restart cardano-node\n</code></pre></p> <p>\u30ce\u30fc\u30c9\u30ed\u30b0\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3044\u306a\u3044\u304b\u78ba\u8a8d\u3059\u308b <pre><code>journalctl --unit=cardano-node --follow\n</code></pre></p>"},{"location":"setup/8-final-adjustment/#8-3","title":"8-3. \u30d6\u30ed\u30c3\u30af\u751f\u6210\u53ef\u80fd\u72b6\u614b\u30c1\u30a7\u30c3\u30af","text":"<p>SPO JAPAN GUILD TOOL\u3092\u5c0e\u5165\u3059\u308b</p> <p>\u5c0e\u5165\u624b\u9806\u306f\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb\u5185\u306eSJG TOOL\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044</p> <p>TOOL\u3092\u5b9f\u884c\u3059\u308b</p> <pre><code>gtool\n</code></pre> <p>[2] \u30d6\u30ed\u30c3\u30af\u751f\u6210\u72b6\u614b\u30c1\u30a7\u30c3\u30af \u3092\u9078\u629e\u3059\u308b</p> <p>\uff01\u91cd\u8981\uff01</p> <p>\u30d7\u30fc\u30eb\u904b\u7528\u30de\u30cb\u30e5\u30a2\u30eb\u904b\u7528\u30ac\u30a4\u30c9\u3092\u5fc5\u305a\u78ba\u8a8d\u3057\u3001\u30d7\u30fc\u30eb\u904b\u55b6\u306b\u3064\u3044\u3066\u5b66\u7fd2\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/9-monitoring-tools-setup/","title":"9.\u76e3\u8996\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7","text":"<p>\u30d7\u30ed\u30e1\u30c6\u30a6\u30b9\u306f\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u6307\u5b9a\u3057\u305f\u30e1\u30c8\u30ea\u30c3\u30afHTTP\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3001\u60c5\u5831\u3092\u53ce\u96c6\u3059\u308b\u76e3\u8996\u30c4\u30fc\u30eb\u3067\u3059\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089 \u30b0\u30e9\u30d5\u30a1\u30ca\u306f\u53ce\u96c6\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u8996\u899a\u7684\u306b\u8868\u793a\u3055\u305b\u308b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u30c4\u30fc\u30eb\u3067\u3059\u3002</p>"},{"location":"setup/9-monitoring-tools-setup/#9-1","title":"9-1.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u6982\u8981</p> <p>\u300cprometheus\u300d\u304a\u3088\u3073\u300cprometheus node exporter\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 \u3053\u306e\u624b\u9806\u3067\u306f\u3001\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u3067prometheus\u3068Grafana\u672c\u4f53\u3092\u7a3c\u50cd\u3055\u305b\u3001\u5404\u30b5\u30fc\u30d0\u30fc\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002</p> <p>\u69cb\u6210\u56f3 <pre><code>    flowchart TB\n        bp[\u30ed\u30fc\u30ab\u30ebPC] -- 3000\u30dd\u30fc\u30c8\u958b\u653e --&gt; a1[Grafana] \n        a2[prometheus] -- \u30ea\u30ec\u30fc1IP\u6307\u5b9a\u3067&lt;br&gt;9100/12798\u30dd\u30fc\u30c8\u958b\u653e --&gt; ide2[BP] &amp; ide3[\u30ea\u30ec\u30fc2]\n        subgraph ide1[\u30ea\u30ec\u30fc1]\n            a1[Grafana] &lt;--&gt; a2[prometheus]\n        end\n        subgraph ide2[BP]\n            a3[node-exporter]\n        end\n        subgraph ide3[\u30ea\u30ec\u30fc2]\n            a4[node-exporter]\n        end</code></pre></p> <p>prometheus\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91BP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d <pre><code>sudo apt install -y prometheus prometheus-node-exporter\n</code></pre> <pre><code>sudo apt install -y prometheus-node-exporter\n</code></pre> <p>grafana\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <p><pre><code>sudo apt-get install -y apt-transport-https software-properties-common\n</code></pre> <pre><code>sudo wget -q -O /usr/share/keyrings/grafana.key https://apt.grafana.com/gpg.key\n</code></pre> <pre><code>echo \"deb [signed-by=/usr/share/keyrings/grafana.key] https://apt.grafana.com stable main\" &gt; grafana.list\nsudo mv grafana.list /etc/apt/sources.list.d/grafana.list\n</code></pre> <pre><code>sudo apt update &amp;&amp; sudo apt install -y grafana\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u5316\u3068\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91BP\u307e\u305f\u306f\u30ea\u30ec\u30fc2\u4ee5\u964d Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl enable grafana-server.service\nsudo systemctl enable prometheus.service\nsudo systemctl enable prometheus-node-exporter.service\n</code></pre> <p>FW\u8a2d\u5b9a\u3067Grafana\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b <pre><code>sudo ufw allow 3000/tcp\nsudo ufw reload\n</code></pre></p> <pre><code>sudo systemctl enable prometheus-node-exporter.service\n</code></pre> <p>FW\u8a2d\u5b9a\u3067Prometheus\u30e1\u30c8\u30ea\u30af\u30b9\u30dd\u30fc\u30c8\u3092\u30ea\u30ec\u30fc1\u306eIP\u9650\u5b9a\u3067\u958b\u653e\u3059\u308b</p> Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 12798\nsudo ufw allow from &lt;\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306eIP&gt; to any port 9100\nsudo ufw reload\n</code></pre> <p>prometheus-node-exporter\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c9/BP <p>prometheus-node-exporter\u306e\u30d1\u30b9\u3092\u53d6\u5f97\u3059\u308b <pre><code>cd $HOME/git\nnodeexPath=`which prometheus-node-exporter`\n</code></pre></p> <p>1.5.0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b <pre><code>wget https://github.com/prometheus/node_exporter/releases/download/v1.5.0/node_exporter-1.5.0.linux-amd64.tar.gz\n</code></pre></p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u89e3\u51cd\u3059\u308b <pre><code>tar xvf node_exporter-1.5.0.linux-amd64.tar.gz\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3059\u308b <pre><code>sudo systemctl stop prometheus-node-exporter.service\n</code></pre></p> <p>\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u30b7\u30b9\u30c6\u30e0\u30d5\u30a9\u30eb\u30c0\u3078\u30b3\u30d4\u30fc\u3059\u308b <pre><code>cd node_exporter-1.5.0.linux-amd64\nsudo cp node_exporter $nodeexPath\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b <pre><code>sudo systemctl start prometheus-node-exporter.service\n</code></pre></p> <p>\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d</p> <pre><code>prometheus-node-exporter --version\n</code></pre> <p>\u623b\u308a\u50241\u884c\u76ee\u304c<code>node_exporter, version 1.5.0</code>\u306a\u3089OK</p>"},{"location":"setup/9-monitoring-tools-setup/#9-2","title":"9-2.\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fPrometheus\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</p> <p>\u6ce8\u610f</p> <p>targets:\u306e\u300cxxx.xxx.xxx\u300d\u306f\u3001BP\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002 targets:\u306e\u300cbb.xxx.xxx\u300d\u306f\u3001\u30ea\u30ec\u30fc2\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP(\u9759\u7684)\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u3066\u4e0b\u3055\u3044\u3002</p> <pre><code>cat &gt; $HOME/prometheus.yml &lt;&lt; EOF\nglobal:\n  scrape_interval:     15s # By default, scrape targets every 15 seconds.\n\n  # Attach these labels to any time series or alerts when communicating with\n  # external systems (federation, remote storage, Alertmanager).\n  external_labels:\n    monitor: 'codelab-monitor'\n\n# A scrape configuration containing exactly one endpoint to scrape:\n# Here it's Prometheus itself.\nscrape_configs:\n  # The job name is added as a label job=&lt;job_name&gt; to any timeseries scraped from this config.\n  - job_name: 'prometheus'\n\n    static_configs:\n      - targets: ['localhost:9100']\n        labels:\n          alias: 'relaynode1'\n          type:  'system'\n      - targets: ['bb.xxx.xxx.xxx:9100']\n        labels:\n          alias: 'relaynode2'\n          type:  'system'\n      - targets: ['xx.xxx.xxx.xxx:9100']\n        labels:\n          alias: 'block-producing-node'\n          type:  'system'\n      - targets: ['xxx.xxx.xxx.xxx:12798']\n        labels:\n          alias: 'block-producing-node'\n          type:  'cardano-node'\n      - targets: ['localhost:12798']\n        labels:\n          alias: 'relaynode1'\n          type:  'cardano-node'\n      - targets: ['bb.xxx.xxx.xxx:12798']\n        labels:\n          alias: 'relaynode2'\n          type:  'cardano-node'\nEOF\n</code></pre> <p>prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo promtool check config $HOME/prometheus.yml\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306a\u3057\u306e\u5834\u5408 <pre><code>Checking /home/user/prometheus.yml\nSUCCESS: 0 rule files found\n</code></pre></p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306e\u5834\u5408(\u4e00\u4f8b) <pre><code>Checking /home/user/prometheus.yml\nFAILED: parsing YAML file /home/user/prometheus.yml: yaml: line XX: did not find expected '-' indicator\n</code></pre></p> <p>\u203b/home/user/prometheus.yml\uff08user\u306f\u5404\u81ea\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\uff09</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u3060\u3063\u305f\u5834\u5408\u306f\u3001$HOME/prometheus.yml\u3092\u958b\u3044\u3066\u4f59\u5206\u306a\u30b9\u30da\u30fc\u30b9\u3084\u8a18\u53f7\u306e\u6709\u7121\u306a\u3069\u3092\u78ba\u8a8d\u3057\u3001\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo nano $HOME/prometheus.yml\n</code></pre></p> <p>\u4fee\u6b63\u3057\u305f\u3089\u3001Ctrl + O\u3067\u4fdd\u5b58\u3057\u3001Enter\u3002\u305d\u306e\u5f8cCtrl + X\u3067\u9589\u3058\u308b</p> <p>prometheus.yml\u3092\u79fb\u52d5\u3057\u307e\u3059   <pre><code>sudo mv $HOME/prometheus.yml /etc/prometheus/prometheus.yml\n</code></pre></p> <p>Grafana\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b   <pre><code>sudo grafana-cli plugins install yesoreyeram-infinity-datasource\n</code></pre></p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 Ubuntu22.04\u306e\u5834\u5408\u306f\uff11\u884c\u3065\u3064\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044<pre><code>sudo systemctl restart grafana-server.service\nsudo systemctl restart prometheus.service\nsudo systemctl restart prometheus-node-exporter.service\n</code></pre> <p>\u30b5\u30fc\u30d3\u30b9\u304c\u6b63\u3057\u304f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo systemctl --no-pager status grafana-server.service prometheus.service prometheus-node-exporter.service\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <ul> <li>grafana-server.service</li> <li>prometheus.service</li> <li>prometheus-node-exporter.service \u4e0a\u8a183\u3064\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c \u7dd1\u8272 <code>active (running)</code> \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002</li> </ul>"},{"location":"setup/9-monitoring-tools-setup/#_1","title":"\u65e2\u5b58\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3059\u308b\u5834\u5408","text":"<pre><code>sudo nano /etc/prometheus/prometheus.yml\n</code></pre> <p>\u4fee\u6b63\u3057\u305f\u3089\u3001Ctrl + O\u3067\u4fdd\u5b58\u3057\u3001Enter\u3002\u305d\u306e\u5f8cCtrl + X\u3067\u9589\u3058\u308b</p> <p>prometheus.yml\u69cb\u6587\u30c1\u30a7\u30c3\u30af</p> \u30ea\u30ec\u30fc\u30ce\u30fc\u30c91 <pre><code>sudo promtool check config /etc/prometheus/prometheus.yml\n</code></pre> <p>\u623b\u308a\u5024\u78ba\u8a8d</p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306a\u3057\u306e\u5834\u5408 <pre><code>Checking /etc/prometheus/prometheus.yml\nSUCCESS: 0 rule files found\n</code></pre></p> <p>\u69cb\u6587\u30a8\u30e9\u30fc\u306e\u5834\u5408(\u4e00\u4f8b) <pre><code>Checking /etc/prometheus/prometheus.yml\nFAILED: parsing YAML file /etc/prometheus/prometheus.yml: yaml: line XX: did not find expected '-' indicator\n</code></pre> /etc/prometheus/prometheus.yml\u3092\u958b\u3044\u3066\u4f59\u5206\u306a\u30b9\u30da\u30fc\u30b9\u3084\u8a18\u53f7\u306e\u6709\u7121\u306a\u3069\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b <pre><code>sudo systemctl restart prometheus.service\n</code></pre></p>"},{"location":"setup/9-monitoring-tools-setup/#9-3grafana","title":"9-3.Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u8a2d\u5b9a","text":"<ol> <li>\u30ed\u30fc\u30ab\u30ebPC\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089 http://\u30ea\u30ec\u30fc\u30ce\u30fc\u30c91IP\u30a2\u30c9\u30ec\u30b9:3000 \u3092\u958b\u304d\u307e\u3059\u3002</li> <li>\u30ed\u30b0\u30a4\u30f3\u540d\u30fbPW\u306f admin / admin</li> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3057\u307e\u3059\u3002</li> <li>\u5de6\u4e0a\u306e\u4e09\u672c\u7dda\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u300cConnections\u300d\u2192\u300cData sources\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300cAdd new data source\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cPrometheus\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002</li> <li>\u540d\u524d\u306f <code>Prometheus</code>\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>URL \u3092 http://localhost:9090\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> <li>Save &amp; Test\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Successfully queried the Prometheus API.</code>\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u518d\u5ea6<code>Data sources</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u300cAdd new data source\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u4e0b\u90e8\u306b\u3042\u308b\u300cInfinity\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</li> <li>\u8a2d\u5b9a\u5185\u5bb9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u306a\u304f\u3001Save &amp; Test\u3092\u30af\u30ea\u30c3\u30af\u3057<code>Settings saved</code>\u3068\u8868\u793a\u3055\u308c\u305f\u3089OK\u3002</li> <li>BP\u30b5\u30fc\u30d0\u30fc\u3067\u30d1\u30cd\u30eb\u7528JSON\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</li> </ol> \u30d6\u30ed\u30c3\u30af\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u30ce\u30fc\u30c9 <p><pre><code>curl -s -o $NODE_HOME/SJG_Grafana_Dashboard.json https://raw.githubusercontent.com/akyo3/Extends-SJG-Knowledge/main/SJG_Grafana_Dashboard.json\n</code></pre>   \u4e00\u90e8\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u66f8\u304d\u63db\u3048\u308b   <pre><code>sed -i $NODE_HOME/SJG_Grafana_Dashboard.json \\\n    -e \"s/bech32_id_of_your_pool/$(cat $NODE_HOME/pool.id-bech32)/g\"\n</code></pre> 12. BP\u306e<code>cnode</code>\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b<code>SJG_Grafana_Dashboard.json</code>\u3092\u30ed\u30fc\u30ab\u30ebPC\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059 13. \u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cDashboards\u300d\u2192\u300cNew\u300d\u2192\u300c<code>+import</code>\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002 14. \u300cUpload JSON file\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u300110\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f<code>SJG_Grafana_Dashboard.json</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 15. \u300cPrometheus\u300d\u3068\u300cInfinity\u300d\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3057<code>Import</code>\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002  </p> <p></p> <p>\ud83c\udf8a\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\ud83c\udf8a</p> <p>\u3053\u308c\u3067\u57fa\u672c\u7684\u306a\u76e3\u8996\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u8ffd\u52a0\u8a2d\u5b9a\u3082\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\u8a2d\u5b9a</li> <li>\u7570\u5e38\u6642\u306b\u901a\u77e5\u3059\u308b\u30a2\u30e9\u30fc\u30c8\u8a2d\u5b9a</li> </ul>"},{"location":"setup/99-donation-credit/","title":"\uff0a\u5bc4\u4ed8\u3068\u30af\u30ec\u30b8\u30c3\u30c8","text":"<p>SPO JAPAN GUILD\u3067\u306f\u3001\u30b9\u30c6\u30fc\u30af\u30d7\u30fc\u30eb\u69cb\u7bc9\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u6574\u5099\u3001\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306e\u904b\u55b6\u3001\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3067\u306e\u8a8d\u77e5\u6d3b\u52d5\u306a\u3069\u7686\u69d8\u306e\u30d7\u30fc\u30eb\u904b\u55b6\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304a\u308a\u307e\u3059\u3002 \u4eca\u5f8c\u3082\u30ab\u30eb\u30c0\u30ce\u5206\u6563\u5316\u3092\u4fc3\u9032\u3059\u308b\u305f\u3081\u306b\u3082\u3001\u7d99\u7d9a\u6027\u306e\u3042\u308b\u6d3b\u52d5\u3092\u884c\u3063\u3066\u307e\u3044\u308a\u307e\u3059\u3002 \u5bc4\u4ed8\u3057\u3066\u9802\u3044\u305f\u8cc7\u91d1\u306f\u3001\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u30b5\u30fc\u30d0\u30fc\u4ee3\u3001\u30c9\u30e1\u30a4\u30f3\u4ee3\u3001\u958b\u767a\u8cbb\u3001\u4eba\u4ef6\u8cbb\u3001\u30de\u30fc\u30b1\u30c6\u30a3\u30f3\u30b0\u8cbb\u306b\u4f7f\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002</p>"},{"location":"setup/99-donation-credit/#spo-japan-guild","title":"SPO JAPAN GUILD\u30d7\u30fc\u30eb\u3078\u306e\u59d4\u4efb","text":"<p>\u79c1\u9054\u3092\u30b5\u30dd\u30fc\u30c8\u9802\u3051\u308b\u65b9\u306f\u5f53\u30d7\u30fc\u30eb\u3078\u59d4\u4efb\u9802\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\u3002  </p> <p>Ticker\uff1aSJG</p> <p><pre><code>pool1sqpksswmxpgk6yxllyq9ad4qhtnt5qyz2pv5xmz6kkt5ujrgqwf\n</code></pre>   [SJG] SPO JAPAN GUILD POOLpool1sqpksswmxpgk6yxllyq9ad4qhtnt5qyz2pv5xmz6kkt5ujrgqwf</p> <ul> <li>\u56fa\u5b9a\u624b\u6570\u6599\uff1a340ADA</li> <li>\u5909\u52d5\u624b\u6570\u6599\uff1a20%\uff5e</li> </ul>"},{"location":"setup/99-donation-credit/#spo-japan-guild_1","title":"SPO JAPAN GUILD\u3078\u306e\u5bc4\u4ed8","text":"<p>ADA\u30a2\u30c9\u30ec\u30b9</p> <pre><code>addr1qxq6jar2wtktu3nlak78ghugtd8vcxcze33wsk2ehlwkavp2f4gnzre574n6an99yql25wcy09ygededc7e6f77jutvs0lgxef\n</code></pre> <p>ADA Handle</p> <p>ADA Handle\u5bfe\u5fdc\u30a6\u30a9\u30ec\u30c3\u30c8\u304b\u3089\u306a\u3089 \u300c$spojapanguild\u300d\u5b9b\u3066\u3067\u3082\u5bc4\u4ed8\u3044\u305f\u3060\u3051\u307e\u3059\uff01 <pre><code>$spojapanguild\n</code></pre> </p>"},{"location":"setup/air-gap-guid/","title":"\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u306e\u4f5c\u6210","text":"<p>\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30de\u30b7\u30f3\u3068\u306f\uff1f</p> <p>\u30d7\u30fc\u30eb\u904b\u55b6\u3067\u4f7f\u7528\u3059\u308b\u30a6\u30a9\u30ec\u30c3\u30c8\u306e\u79d8\u5bc6\u9375\u3084\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u79d8\u5bc6\u9375\u3092\u30aa\u30d5\u30e9\u30a4\u30f3\u4e0a\u3067\u7ba1\u7406\u3057\u3001\u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u3067CLI\u3092\u8d77\u52d5\u3057\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306b\u7f72\u540d\u3059\u308b\u4f5c\u696d\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <ul> <li>\u30a6\u30a9\u30ec\u30c3\u30c8\u306e\u79d8\u5bc6\u9375\u3084\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u79d8\u5bc6\u9375\u3092\u30d7\u30fc\u30eb\u904b\u55b6\u306e\u30aa\u30f3\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u4e0a\u306b\u4fdd\u7ba1\u3059\u308b\u3068\u3001\u30cf\u30c3\u30ad\u30f3\u30b0\u306a\u3069\u306e\u969b\u306b\u8cc7\u91d1\u76d7\u96e3\u306e\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002</li> </ul>"},{"location":"setup/air-gap-guid/#windows","title":"Windows\u306e\u5834\u5408","text":"<p>\u8ca2\u732e\u8005</p> <p>[SA8] SMAN8 \u3055\u3093\u306b\u5c0e\u5165\u624b\u9806\u3092\u4f5c\u6210\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p>"},{"location":"setup/air-gap-guid/#_2","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8981\u4ef6","text":"<p>\u74b0\u5883</p> <ul> <li>Windows11 Home</li> <li>\u5b9f\u88c5RAM 8.00 GB</li> </ul> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <ul> <li>Ubuntu Desktop 20.04.x LTS  </li> <li>VirtualBox-7.0.4  </li> </ul>"},{"location":"setup/air-gap-guid/#1-os-ubuntu","title":"1- OS Ubuntu\u306e\u5165\u624b","text":"<p>1-1.\u4e0b\u306e\u753b\u50cf\u306e\u8d64\u3044\u56db\u89d2\u306e\u3068\u3053\u308d\u3092\u30bf\u30c3\u30d7\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <ul> <li>Ubuntu20.04.4 LTS\u306e\u5165\u624b</li> </ul> <p></p> <p>1-2.\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fubuntu-20.04.4-desktop-amd64\u3092\u4f5c\u6210\u3057\u305f\u30d5\u30a9\u30eb\u30c0(\u3053\u3053\u3067\u306fTest_CNode\u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0)\u306b\u79fb\u52d5\u3057\u3066\u304a\u304f\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#2-virtualbox","title":"2- VirtualBox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>2-1. VirtualBox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001<code>Windows hosts</code>\u3092\u30bf\u30c3\u30d7\u3057\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002</p> <ul> <li>VirtualBox\u306e\u5165\u624b</li> </ul>"},{"location":"setup/air-gap-guid/#3-virtualbox","title":"3- VirtualBox\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>3-1.\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fvirtualbox6.1.36\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3067\u8d77\u52d5\u3059\u308b\u3002</p> \u30d5\u30a1\u30a4\u30eb\u540d VirtualBox-7.0.4-154605-Win.exe <p></p> <p>3-2.\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u5de6\u4e0b\u306e\u8d64\u3044\u56db\u89d2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092\u30bf\u30c3\u30d7\u3057\u3066\u8d77\u52d5\u3059\u308b\u3002</p> <p></p> <p>3-3.\u3053\u306e\u753b\u9762\u306b\u306a\u3063\u305f\u3089\u3001<code>Next&gt;</code>\u3092\u30bf\u30c3\u30d7\u3002</p> <p></p> <p>3-4.\u7d9a\u3051\u3066\u305d\u306e\u307e\u307e<code>Next&gt;</code>\u3092\u30bf\u30c3\u30d7\u3057\u3001\u753b\u50cf\u306e\u9806\u756a\u306b\u9032\u307f\u6700\u5f8c\u306b<code>Install</code>\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002</p> <p></p> <p>3-5.Windows\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u4f5c\u52d5\u3057\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304b\uff1f\u3068\u805e\u304b\u308c\u305f\u3089<code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(I)</code>\u3092\u30bf\u30c3\u30d7\u3057\u3001\u4e0b\u306e\u753b\u50cf\u306e\u8d64\u3044\u56db\u89d2\u3067\u56f2\u307e\u308c\u305f<code>Finish</code>\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3002</p> <p></p> <p>3-6.VirtualBox\u306e\u7ba1\u7406\u753b\u9762\u304c\u7acb\u3061\u4e0a\u304c\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#4-virtualbox","title":"4- VirtualBox\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210","text":"<p>4-1.\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u70ba\u306b\u4e0b\u306e\u753b\u50cf\u306e\u8d64\u3044\u56db\u89d2\u306e<code>\u65b0\u898f(N)</code>\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002</p> <p></p> <p>4-2.\u30de\u30b7\u30f3\u8a2d\u5b9a \u540d\u524d\u30fb\u30fb\u30fb\u4efb\u610f\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u540d ISO Imagae\u30fb\u30fb\u30fb1\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fUbuntu-ISO\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3059\u308b \u300cSkip Unattended Installation\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>4-3.\u30e1\u30a4\u30f3\u30e1\u30e2\u30ea\u3092<code>4096MB</code>\u3001Processoros\u3092<code>2</code>\u306b\u8a2d\u5b9a\u3057\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af</p> <p></p> <p>4-4.DiskSize\u3092<code>50.00GB</code>\u306b\u8a2d\u5b9a\u3057\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af</p> <p></p> <p>4-5.\u30d0\u30fc\u30c1\u30e3\u30eb\u30de\u30b7\u30f3\u4f5c\u6210\u6982\u8981\u306e\u78ba\u8a8d\u3002\u300c\u5b8c\u4e86\u300d\u3092\u30af\u30ea\u30c3\u30af</p> <p></p>"},{"location":"setup/air-gap-guid/#5-virtualbox","title":"5- VirtualBox\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u74b0\u5883\u8a2d\u5b9a","text":"<p>5-1.\u4f7f\u7528\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3(\u3053\u3053\u3067\u306fAirGap)\u3092\u9078\u629e\u3057\u3001\u300c\u8a2d\u5b9a\u300d\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b</p> <p></p> <p>\u4e00\u822c 5-2.\u300c\u4e00\u822c\u300d\u2192\u300c\u9ad8\u5ea6\u300d\u30bf\u30d6\u304b\u3089\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306e\u5171\u6709\u3068\u30c9\u30e9\u30c3\u30b0&amp;\u30c9\u30ed\u30c3\u30d7\u3092\u300c\u53cc\u65b9\u5411\u300d\u306b\u5909\u66f4\u3057\u3066OK\u3092\u30af\u30ea\u30c3\u30af</p> <p></p> <p>\u30b7\u30b9\u30c6\u30e0 5-3.\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u2192\u300c\u30de\u30b6\u30fc\u30dc\u30fc\u30c9\u300d\u30bf\u30d6\u306e\u300c\u30d5\u30ed\u30c3\u30d4\u30fc\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092<code>\u5916\u3059</code>\u3002\u30c1\u30c3\u30d7\u30bb\u30c3\u30c8\u3092<code>ICH9</code>\u306b\u5909\u66f4\u3057\u3066OK\u3092\u30af\u30ea\u30c3\u30af</p> <p></p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u8a2d\u5b9a</p> <p>5-4.Windows\u3068Ubuntu\u9593\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0(Share)\u3092\u4f5c\u6210\u3059\u308b(\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a9\u30eb\u30c0\u306a\u3069\u306e\u4efb\u610f\u306e\u5834\u6240)</p> <p></p> <p>5-5.\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u30fc\u304b\u3089\u65b0\u898f\u8ffd\u52a0\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af  </p> <ul> <li>\u300c\u30d5\u30a9\u30eb\u30c0\u30fc\u306e\u30d1\u30b9\u300d\u306b5-4\u3067\u4f5c\u6210\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3059\u308b  </li> <li>\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8\u306b<code>/media/share_win</code>\u3092\u5165\u529b\u3059\u308b  </li> <li>\u300c\u81ea\u52d5\u30de\u30a6\u30f3\u30c8\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3059\u308b</li> </ul> <p></p>"},{"location":"setup/air-gap-guid/#6-ubuntu","title":"6- Ubuntu\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>6-1.<code>\u8d77\u52d5</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-2.\u4e0b\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u30c7\u30a3\u30b9\u30af\u304c\u8d77\u52d5\u3057\u59cb\u3081\u307e\u3059\u3002</p> <p></p> <p>6-3.\u5de6\u306e\u67a0\u306e\u4e2d\u304b\u3089<code>\u65e5\u672c\u8a9e</code>\u3092\u9078\u629e\u3057<code>Ubuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>6-5.\u65e5\u672c\u8a9e\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u65b9\u306f\u3001\u4e21\u65b9\u3068\u3082\u300cJapanese\u300d\u3092\u9078\u629e\u3057\u3001\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p>US\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u65b9\u306f\u300c\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u300d\u2192\u300c\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u691c\u51fa\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u203b \u753b\u9762\u304c\u898b\u5207\u308c\u3066\u3044\u308b\u5834\u5408\u306e\u5bfe\u51e6\u6cd5\uff1aAlt\uff0bF7\u3092\u62bc\u3059\u3068\u30de\u30a6\u30b9\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u79fb\u52d5\u3067\u304d\u307e\u3059)</p> <p></p> <p>6-6.\u4e0b\u306e\u753b\u50cf\u306e\u72b6\u614b\u306e\u307e\u307e\u3001<code>\u7d9a\u3051\u308b</code>\u3092\u30af\u30ea\u30c3\u30af</p> <p></p> <p>6-7.\u4e0b\u306e\u753b\u50cf\u306e\u72b6\u614b\u306e\u307e\u307e\u3001<code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-8.<code>\u7d9a\u3051\u308b</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-9.\u304a\u4f4f\u307e\u3044\u306e\u5730\u57df\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001<code>\u7d9a\u3051\u308b</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-10.<code>\u3042\u306a\u305f\u306e\u540d\u524d</code>\u306f\u30de\u30b7\u30f3\u540d\u3092\u5165\u308c\u308b\u3068\u3001\u305d\u306e\u4e0b\u306e<code>\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306e\u540d\u524d</code>\u3001<code>\u30e6\u30fc\u30b6\u30fc\u540d\u306e\u5165\u529b</code>\u306b\u3082\u81ea\u52d5\u3067\u5165\u529b\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3054\u81ea\u8eab\u3067\u6c7a\u3081\u3066\u5165\u529b\u3092\u6e08\u307e\u305b\u3066\u4e0b\u3055\u3044\u3002\u7d42\u308f\u308a\u307e\u3057\u305f\u3089\u3001<code>\u7d9a\u3051\u308b</code>\u3092\u30bf\u30c3\u30d7\u3002</p> <p></p> <p>6-11.Ubuntu\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u59cb\u307e\u308a\u307e\u3057\u305f\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002</p> <p></p> <p>6-12.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u3001\u518d\u8d77\u52d5\u3092\u884c\u3063\u3066\u4e0b\u3055\u3044</p> <p></p> <p>6-13.\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059</p> <p></p> <p>6-14.\u30aa\u30f3\u30e9\u30a4\u30f3\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u63a5\u7d9a\u306f\u3001\u53f3\u4e0a\u306e<code>\u30b9\u30ad\u30c3\u30d7(S)</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-15.<code>\u6b21\u3078</code>\u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002</p> <p></p> <p>6-16.\u305d\u306e\u307e\u307e\u3001<code>\u6b21\u3078\uff08N)</code>\u3092\u30bf\u30c3\u30d7\u3002</p> <p></p> <p>6-17.<code>\u3044\u3044\u3048\u3001\u9001\u4fe1\u3057\u307e\u305b\u3093</code>\u3092\u9078\u629e\u3057\u3001\u53f3\u4e0a\u306e<code>\u6b21\u3078(N)</code>\u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002</p> <p></p> <p>6-18.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u3002<code>\u5b8c\u4e86</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-19.\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u300c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u306a\u3044\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059</p> <p></p> <p>6-20.<code>OK</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-21.<code>\u3053\u306e\u64cd\u4f5c\u3092\u4eca\u3059\u3050\u5b9f\u884c</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-22.<code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-23.<code>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</code>\u3092\u30af\u30ea\u30c3\u30af\u3002</p> <p></p> <p>6-23.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c<code>\u5168\u4f53\u306b\u9069\u7528\u3059\u308b</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u9589\u3058\u308b</p> <p></p>"},{"location":"setup/air-gap-guid/#7-guest-additions","title":"7- Guest Additions\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>\u30a2\u30d7\u30ea\u4e00\u89a7\u304b\u3089\u30bf\u30fc\u30df\u30ca\u30eb(\u7aef\u672b)\u3092\u8d77\u52d5\u3057\u4ee5\u4e0b\u30b3\u30de\u30f3\u30c9\u3092\u624b\u52d5\u5165\u529b\u3059\u308b\u3002 <pre><code>sudo apt update -y\nsudo apt upgrade -y\nsudo apt install gcc make perl -y\n</code></pre></p> <p>\u307e\u3060\u30b3\u30d4\u30fc\u30a2\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30bf\u30a4\u30d7\u30df\u30b9\u306b\u7559\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>7-1.\u30db\u30b9\u30c8\u30e1\u30a4\u30f3\u753b\u9762\u4e0a\u90e8\u306e\u300cDevices\u300d\u30bf\u30d6\u304b\u3089\u300cInsert Guest Additions CD image...\u300d\u21d2<code>OK</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>7-2.\u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089<code>\u5b9f\u884c</code>\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u5f8c\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <p></p> <p>7-3\u51e6\u7406\u5b8c\u4e86\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3089<code>Enter</code>\u30ad\u30fc\u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002</p> <p></p> <p>7-4.\u30bf\u30fc\u30df\u30ca\u30eb(\u7aef\u672b)\u3092\u8d77\u52d5\u3057\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7\u5316\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002</p> <p><pre><code>sudo adduser $USER vboxsf\n</code></pre> </p> <p>7-5.\u30d5\u30a9\u30eb\u30c0\u306b<code>shere_win</code>\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u30015\u306e\u300c\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u300d\u3067\u8a2d\u5b9a\u3057\u305f\u30ed\u30fc\u30ab\u30ebPC\u306e\u30d5\u30a9\u30eb\u30c0\u3068\u540c\u671f\u3057\u307e\u3059\u3002</p> <p></p> <p>7-6.\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3067\u304d\u308b\u304b\u30db\u30b9\u30c8PC\u3067\u30b3\u30de\u30f3\u30c9\u3092<code>\u30b3\u30d4\u30fc</code>\u3057\u3066\u30b2\u30b9\u30c8OS\u306e\u7aef\u672b\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066<code>\u8cbc\u308a\u4ed8\u3051</code>\u3057\u3066\u307f\u308b\u3002\u554f\u984c\u306a\u3051\u308c\u3070\u3001\u3053\u308c\u3067\u7d42\u4e86\u3067\u3059\u3002\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\uff01</p> <p></p> <p>7-7.\u300c\u8868\u793a\u300d\u2192\u300cAuto-resize\u3000Guest\u3000Display\u300d\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</p> <p></p> <p>\u4e0a\u8a18\u624b\u9806\u3092\u884c\u306a\u3063\u3066\u3082\u3001\u300c\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u300d\u300c\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u300d\u5834\u5408\u306f\u3001\u4e00\u5ea6VBox_GAs_6.1.36\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304b\u3089\u518d\u5ea6\u633f\u5165\u3057\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306f\u5b8c\u4e86\u3057\u307e\u3059\u3002\u305d\u308c\u3067\u3082\u30c0\u30e1\u306a\u3089GUI\u64cd\u4f5c\u3067Guest Additions\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u3092\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"setup/air-gap-guid/#8-swap","title":"8- Swap\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>8-1. \u65e2\u5b58Swap\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664 <pre><code>sudo swapoff /swapfile\n</code></pre> <pre><code>sudo rm /swapfile\n</code></pre></p> <p>8-2. \u65b0\u898fSwap\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 <pre><code>cd $HOME\nsudo fallocate -l 6G /swapfile\n</code></pre> <pre><code>sudo chmod 600 /swapfile\n</code></pre> <pre><code>sudo mkswap /swapfile\nsudo swapon /swapfile\nsudo swapon --show\n</code></pre> <pre><code>sudo cp /etc/fstab /etc/fstab.bak\necho '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab\necho 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf\necho 'vm.vfs_cache_pressure=50' | sudo tee -a /etc/sysctl.conf\ncat /proc/sys/vm/vfs_cache_pressure\ncat /proc/sys/vm/swappiness\n</code></pre></p>"},{"location":"setup/air-gap-guid/#mac","title":"Mac\u306e\u5834\u5408","text":"<p>\u8ca2\u732e\u8005</p> <p>[AKYO] AKYO Akyo\u3055\u3093\u306b\u5c0e\u5165\u624b\u9806\u3092\u4f5c\u6210\u9802\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01</p>"},{"location":"setup/air-gap-guid/#_3","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u8981\u4ef6","text":"<p>\u74b0\u5883 - macOS Ventura version13.0</p> <p>\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - VirtualBox \u30d0\u30fc\u30b8\u30e7\u30f3 7.0.4 - Ubuntu Desktop 20.04.5 LTS (Focal Fossa)</p>"},{"location":"setup/air-gap-guid/#1-ubuntu","title":"1- Ubuntu\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","text":"<p>1-1. \u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u5148\u304b\u3089ISO\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <ul> <li>Ubuntu\u3092\u5165\u624b\u3059\u308b \u203b \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5b8c\u4e86\u307e\u3067\u5c11\u3057\u304b\u304b\u308b\u306e\u3067\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044</li> </ul> \u30d5\u30a1\u30a4\u30eb\u540d ubuntu-20.04.5-desktop-amd64.iso <p></p>"},{"location":"setup/air-gap-guid/#2-virtualbox_1","title":"2- VirtualBox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>2-1. \u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u5148\u304b\u3089VirtualBox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <ul> <li>VirtualBox\u3092\u5165\u624b\u3059\u308b</li> </ul> \u30d5\u30a1\u30a4\u30eb\u540d VirtualBox-7.0.4-154605-OSX.dmg <p></p> <p>2-2. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a6\u30a3\u30b6\u30fc\u30c9\u306b\u5f93\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 \u5b8c\u4e86\u3057\u305f\u3089\u300c\u9589\u3058\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u7d42\u4e86\u3057\u307e\u3059\u3002</p> <p>macOS BigSur \u4ee5\u964d\u3067\u306f\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30ab\u30fc\u30cd\u30eb\u62e1\u5f35\u3092\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u518d\u8d77\u52d5\u304c\u5fc5\u8981\u3067\u3059\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#3-virtualbox_1","title":"3- VirtualBox\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210","text":"<p>VirtualBox\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>3-1. VirtualBox\u304c\u8d77\u52d5\u3057\u305f\u3089\u300c\u65b0\u898f\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>3-2. \u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u8a2d\u5b9a\u3057\u3001\u300c\u7d9a\u304d\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p>\u203b \u540d\u524d\u306f\u304a\u597d\u307f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 ISO Image\u306f\u3001\u300c\u305d\u306e\u4ed6\u300d\u3092\u9078\u629e\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fUbuntu-20.04.5\u306eISO\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u307e\u3059\u3002 \u30bf\u30a4\u30d7\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\u306f\u4e0a\u8a18\u3092\u9078\u629e\u3059\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002   <code>Skip Unattended Installation</code>\u306b\u30c1\u30a7\u30c3\u30af</p> \u540d\u524d airGap Folder \u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK <p></p> <p>3-3. \u4eee\u60f3\u30de\u30b7\u30f3\u306b\u5272\u5f53\u3066\u308b\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306f\u300c<code>4096</code>MB\u300d\u3001Processors\u306f\u300c<code>2</code>\u300d\u3092\u9078\u629e\u3057\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>3-4. Virtual Hard disk\u306f\u300c<code>50</code>GB\u300d\u3092\u5165\u529b\u3057\u3001\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>3-5. \u6982\u8981\u3092\u78ba\u8a8d\u3057\u3066\u300c\u5b8c\u4e86\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#4-","title":"4- \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4ed5\u69d8\u8a2d\u5b9a","text":"<p>\u300c\u5b8c\u4e86\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u300cOracle VM VirtualBox \u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u300d\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u8a2d\u5b9a\u6bce\u306b\u300c\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p>\u4e00\u822c</p> <p>4-1. \u300c\u8a2d\u5b9a\u300d\u2192\u300c\u4e00\u822c\u300d\u2192\u300c\u9ad8\u5ea6\u300d\u30bf\u30d6\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u300c\u53cc\u65b9\u5411\u300d\u306b\u3057\u3001\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>\u30b7\u30b9\u30c6\u30e0</p> <p>4-2. \u300c\u30de\u30b6\u30fc\u30dc\u30fc\u30c9\u300d\u30bf\u30d6\u3092\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306b\u3057\u3001\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> \u30de\u30b6\u30fc\u30dc\u30fc\u30c9 \u8d77\u52d5\u9806\u5e8f \u300c\u30d5\u30ed\u30c3\u30d4\u30fc\u300d\u306e\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u3092\u5916\u3059 \u30c1\u30c3\u30d7\u30bb\u30c3\u30c8 ICH9 \u30dd\u30a4\u30f3\u30c6\u30a3\u30f3\u30b0\u30c7\u30d0\u30a4\u30b9 PS/2\u30de\u30a6\u30b9 <p></p> <p>\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4</p> <p>4-3. \u300c\u30b9\u30af\u30ea\u30fc\u30f3\u300d\u30bf\u30d6\u304b\u3089\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306b\u3057\u3001\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> \u30d3\u30c7\u30aa\u30e1\u30e2\u30ea\u30fc 128MB \u8868\u793a\u500d\u7387 200% \u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc VMSVGA <p></p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u30fc</p> <p>4-4. \u30db\u30b9\u30c8\u5074\u3067\u5171\u6709\u3055\u305b\u305f\u3044\u30d5\u30a9\u30eb\u30c0\u3092\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002 - \u4f8b\uff09\u300cairGap\u300d\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u5f8c\u3001\u914d\u4e0b\u306b\u300cshare\u300d\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3002</p> <p><code>Mac Terminal</code> <pre><code>mkdir -p $HOME/airGap/share\n</code></pre></p> <p>4-5. \u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#5-ubuntu","title":"5- \u4eee\u60f3\u30de\u30b7\u30f3\u306bUbuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>5-1. \u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p></p> <p>PC\u304b\u3089\u6a29\u9650\u8a31\u53ef\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u300c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3068\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u300d\u306b\u3066\u5fc5\u8981\u306a\u6a29\u9650\u3092\u8a31\u53ef\u3057\u3001VirtualBox\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <p>5-2. \u8aad\u307f\u8fbc\u307f\u7d42\u4e86\u5f8c\u3001\u8a00\u8a9e\u306f\u300c\u65e5\u672c\u8a9e\u300d\u306b\u3057\u3001\u300cInstall Ubuntu\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-3. \u30ad\u30fc\u30dc\u30fc\u30c9\u8a2d\u5b9a\u3067\u306f\u3001\u65e5\u672c\u8a9e\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u65b9\u306f\u3001\u4e21\u65b9\u3068\u3082\u300cJapanese\u300d\u3092\u9078\u629e\u3057\u3001\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002  </p> <p>US\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u65b9\u306f\u300c\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u300d\u2192\u300c\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u691c\u51fa\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u203b \u753b\u9762\u304c\u898b\u5207\u308c\u3066\u3044\u305f\u5834\u5408\u306e\u5bfe\u51e6\u6cd5\uff1aAlt\uff0bF7\u3067\u79fb\u52d5\u3067\u304d\u307e\u3059)</p> <p>5-4. \u300c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3068\u4ed6\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3001\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-5. \u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u7a2e\u985e\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u300c\u30c7\u30a3\u30b9\u30af\u3092\u524a\u9664\u3057\u3066Ubuntu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-6. \u300c\u30c7\u30a3\u30b9\u30af\u306b\u5909\u66f4\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u304b?\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-7. \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u8a2d\u5b9a\u306f\u3001\u300cTokyo\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-8. \u5fc5\u8981\u306a\u60c5\u5831\u3092\u5165\u529b\u3057\u3001\u300c\u7d9a\u3051\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p>\u203b \u753b\u50cf\u306f\u4e00\u4f8b\u3067\u3059\u306e\u3067\u304a\u597d\u307f\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> <p></p> <p>5-9. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u958b\u59cb\u3002</p> <p></p> <p>5-10. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u3001VM\u306e\u518d\u8d77\u52d5\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u300c\u4eca\u3059\u3050\u518d\u8d77\u52d5\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Enter\u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002</p> <p></p> <p>5-11. \u518d\u8d77\u52d5\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002</p> <p>5-12. \u300c\u30aa\u30f3\u30e9\u30a4\u30f3\u30a2\u30ab\u30a6\u30f3\u30c8\u3078\u306e\u63a5\u7d9a\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u53f3\u4e0a\u306e\u300c\u30b9\u30ad\u30c3\u30d7\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-13. \u300cLivepatch\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u53f3\u4e0a\u306e\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-14. \u300cUbuntu\u306e\u6539\u5584\u3092\u652f\u63f4\u3059\u308b\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u300c\u3044\u3044\u3048\u3001\u9001\u4fe1\u3057\u307e\u305b\u3093\u300d\u3092\u9078\u629e\u5f8c\u3001\u53f3\u4e0a\u306e\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-15. \u300c\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u300d\u306e\u8a2d\u5b9a\u3067\u306f\u53f3\u4e0a\u306e\u300c\u6b21\u3078\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-16. \u300c\u6e96\u5099\u5b8c\u4e86\u300d\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u53f3\u4e0a\u306e\u300c\u5b8c\u4e86\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-17. \u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u66f4\u65b0\u300d\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u300c\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u306a\u3044\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u305d\u306e\u5f8c\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>5-18. \u300c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u60c5\u5831\u2192\u4e0d\u5b8c\u5168\u306a\u8a00\u8a9e\u30b5\u30dd\u30fc\u30c8\u300d\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u300c\u3053\u306e\u64cd\u4f5c\u3092\u4eca\u3059\u3050\u5b9f\u884c\u3059\u308b\u300d\u2192\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u300d\u3092\u30af\u30ea\u30c3\u30af\u5f8c\u3001\u8a8d\u8a3c\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u300c\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306b\u9069\u7528\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p>"},{"location":"setup/air-gap-guid/#6-guest-additions","title":"6- Guest Additions\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>6-1. \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u3044\u3066\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>Guest Additions\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u306a\u306e\u3067\u30db\u30b9\u30c8\u304b\u3089\u30b2\u30b9\u30c8\u306b\u30b3\u30d4\u30fc\u30a2\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u3067\u304d\u307e\u305b\u3093\u3002\u30bf\u30a4\u30d7\u30df\u30b9\u306b\u7559\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u307e\u305f\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u884c\u306a\u3063\u3066\u3082\u3001\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u304cGUI\u3067\u8868\u793a\u3055\u308c\u306a\u3044\u3001\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u4e00\u5ea6VBox_GAs_6.1.36\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304b\u3089\u518d\u5ea6\u633f\u5165\u3057\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306f\u5b8c\u4e86\u3057\u307e\u3059\u3002 \u305d\u308c\u3067\u3082\u30c0\u30e1\u306a\u3089<code>GUI\u64cd\u4f5c\u3067Guest Additions\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408</code>\u3092\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002 <pre><code>sudo apt update -y\nsudo apt upgrade -y\nsudo apt install gcc make perl -y\n</code></pre></p> <p>6-2. \u30db\u30b9\u30c8\u30e1\u30a4\u30f3\u753b\u9762\u4e0a\u90e8\u306e\u300cDevices\u300d\u30bf\u30d6\u304b\u3089\u300cInsert Guest Additions CD image...\u300d\u2192\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p>6-3. \u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u300c\u5b9f\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u5f8c\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002</p> <p></p> <p>6-4. \u51e6\u7406\u5b8c\u4e86\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3089Enter\u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002</p> <p>\u753b\u9762\u304c\u70b9\u6ec5\u3057\u305f\u5834\u5408\u306f\u3001\u30ea\u30b5\u30a4\u30ba\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u5c11\u3057\u5f85\u3063\u3066\u3044\u308b\u3068\u70b9\u6ec5\u3057\u306a\u304f\u306a\u308b\u306f\u305a\u3067\u3059\u3002</p> <p></p> <p>6-5. \u30e6\u30fc\u30b6\u30fc\u3092<code>vboxsf</code>\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u3066\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo adduser $USER vboxsf\nsudo reboot\n</code></pre></p> <p>6-6. \u300cView\u300d\u2192\u300cAuto-resize\u3000Guest\u3000Display\u300d\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002  </p> <p>\u78ba\u8a8d\u5f8c\u3001\u53f3\u30af\u30ea\u30c3\u30af\u2192\u300c\u53d6\u308a\u51fa\u3059\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002</p> <p></p> <p>6-7. \u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 \u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u3044\u3066\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002</p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30db\u30b9\u30c8\u5074\u3067\u78ba\u8a8d\u3067\u304d\u305f\u3089\u6210\u529f\u3067\u3059\u3002</p> <pre><code>touch /media/sf_share/test.txt\nls /media/sf_share/\n</code></pre> <p>\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066VM\u3068\u30db\u30b9\u30c8\u306b<code>test.txt</code>\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 </p>"},{"location":"setup/air-gap-guid/#6-swap","title":"6- Swap\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210","text":"<p>6-1. \u65e2\u5b58Swap\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664 <pre><code>sudo swapoff /swapfile\n</code></pre> <pre><code>sudo rm /swapfile\n</code></pre></p> <p>6-2. \u65b0\u898fSwap\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 <pre><code>cd $HOME\nsudo fallocate -l 6G /swapfile\n</code></pre> <pre><code>sudo chmod 600 /swapfile\n</code></pre> <pre><code>sudo mkswap /swapfile\nsudo swapon /swapfile\nsudo swapon --show\n</code></pre> <pre><code>sudo cp /etc/fstab /etc/fstab.bak\necho '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab\necho 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf\necho 'vm.vfs_cache_pressure=50' | sudo tee -a /etc/sysctl.conf\ncat /proc/sys/vm/vfs_cache_pressure\ncat /proc/sys/vm/swappiness\n</code></pre></p>"},{"location":"setup/air-gap-guid/#_4","title":"\u88dc\u8db3","text":""},{"location":"setup/air-gap-guid/#_5","title":"\u672c\u756a\u904b\u7528\u3067\u4f7f\u7528\u3059\u308b\u969b\u306e\u6ce8\u610f\u70b9","text":"<ul> <li>\u672c\u756a\u904b\u7528\u3067\u4f7f\u7528\u3055\u308c\u308b\u5834\u5408\u306f\u5fc5\u305a\u300c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u6709\u52b9\u5316\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u3066\u304f\u3060\u3055\u3044\u3002 2-8. \u30a8\u30a2\u30ae\u30e3\u30c3\u30d7\u30aa\u30d5\u30e9\u30a4\u30f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\u3092\u7d42\u3048\u305f\u5f8c\u306b\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002</li> </ul>"},{"location":"setup/air-gap-guid/#guiguest-additions","title":"GUI\u64cd\u4f5c\u3067Guest Additions\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408","text":"<p>Virtualbox guest addition packages\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <p>\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u3044\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 Guest Additions\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u72b6\u614b\u306a\u306e\u3067\u30db\u30b9\u30c8\u304b\u3089\u30b2\u30b9\u30c8\u306b\u30b3\u30d4\u30fc\u30a2\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u3067\u304d\u307e\u305b\u3093\u3002\u30bf\u30a4\u30d7\u30df\u30b9\u306b\u7559\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \u6210\u529f\u3057\u3066\u3044\u308c\u3070\u518d\u8d77\u52d5\u5f8c\u3001\u30b3\u30d4\u30fc\u30a2\u30f3\u30c9\u30da\u30fc\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002 <pre><code>sudo apt update -y\nsudo apt upgrade -y\nsudo add-apt-repository multiverse\nsudo apt install virtualbox-guest-dkms virtualbox-guest-x11 -y\n</code></pre></p> <p>\u30e6\u30fc\u30b6\u30fc\u3092<code>vboxsf</code>\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u3066\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002 <pre><code>sudo adduser $USER vboxsf\nsudo reboot\n</code></pre></p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d <pre><code>df\n</code></pre></p> <p><code>share</code>          488245288 203122832 285122456  42% <code>/media/sf_share</code></p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d <pre><code>ls -l /media\n</code></pre></p> <p>drwxrwx--- 1 root <code>vboxsf</code> 96  x\u6708 xx xx:xx sf_share</p> <p>\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210  </p> <p>\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30db\u30b9\u30c8\u5074\u3067\u78ba\u8a8d\u3067\u304d\u305f\u3089\u6210\u529f\u3067\u3059\u3002</p> <pre><code>touch /media/sf_share/test.txt\nls /media/sf_share/\n</code></pre> <p>\u5b9f\u884c\u7d50\u679c\u3068\u3057\u3066VM\u3068\u30db\u30b9\u30c8\u306b<code>test.txt</code>\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002 </p>"}]}